<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>3.2. Library string Type</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" type="text/css" rel="stylesheet"/>
<link href="page_styles.css" type="text/css" rel="stylesheet"/>
</head>
  <body class="calibre">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;"><a href="001-contents.html"><img src="images/teamlib.gif" width="62" height="15" border="0" align="absmiddle"  alt="Team LiB"></a></div></td><td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href="030-3.1._namespace_using_declarations.html"><img src="images/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
<a href="032-3.3._library_vector_type.html"><img src="images/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a></div></td></tr></table><h3 id="filepos649069" class="calibre29"><span class="bold"><a id="filepos649102" class="calibre2"/>3.2. Library <code class="calibre54"><tt class="calibre54"><span class="calibre55"><span class="calibre2"><tt class="calibre54"><span class="calibre56"><span class="bold">string</span></span></tt></span></span></tt></code> Type</span></h3><div class="calibre12">&#160;</div>
<div class="calibre28"><img alt="Image" src="images/00009.jpg" class="calibre9"/></div>
<p class="calibre14">A <code class="calibre23"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5"><a id="filepos649482" href="037-defined_terms.html#filepos988355">string</a></span></span></tt></span></span></tt></code> is a variable-length sequence of characters. To use the <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> type, we must include the <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> header. Because it is part of the library, <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> is defined in the <code class="calibre23"><tt class="calibre23"><span class="calibre24">std</span></tt></code> namespace. Our examples assume the following code:</p><div class="calibre15">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">#include &lt;string&gt;<br class="calibre6"/>using std::string;</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">This section describes the most common <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> operations; &#167; <a href="093-9.5._additional_string_operations.html#filepos2373261">9.5</a> (p. <a href="093-9.5._additional_string_operations.html#filepos2373261">360</a>) will cover additional operations.</p><div class="calibre15">&#160;</div>
<div class="calibre33"><blockquote class="calibre26"><hr class="calibre34"/><p class="calibre14"><span class="calibre5"><a/><img alt="Image" src="images/00012.jpg" class="calibre9"/> Note</span></p><div class="calibre15">&#160;</div>
<blockquote class="calibre13"><p class="calibre14">In addition to specifying the operations that the library types provide, the standard also imposes efficiency requirements on implementors. As a result, library types are efficient enough for general use.</p></blockquote><div class="calibre22">&#160;</div>
<hr class="calibre34"/></blockquote></div><div class="calibre3">&#160;</div>
<h4 id="filepos651083" class="calibre37"><span class="calibre5">3.2.1. Defining and Initializing <code class="calibre23"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">string</span></span></tt></span></span></tt></code>s</span></h4><div class="calibre38">&#160;</div>
<div class="calibre28"><img alt="Image" src="images/00009.jpg" class="calibre9"/></div>
<p class="calibre14">Each class defines how objects of its type can be initialized. A class may define many different ways to initialize objects of its type. Each way must be distinguished from the others either by the number of initializers that we supply, or by the types of those initializers. <a href="031-3.2._library_string_type.html#filepos653301">Table 3.1</a> lists the most common ways to initialize <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>s. Some examples:</p><div class="calibre15">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">string s1;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">default initialization;</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s1</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">is the empty string</span></span></span><br class="calibre6"/>string s2 = s1;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// <span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s2</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">is a copy of</span></span></span>&#160;&#160;<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s1</span></span></tt></span><br class="calibre6"/>string s3 = "hiya";&#160;&#160;&#160;// <span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s3</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">is a copy of the string literal</span></span></span><br class="calibre6"/>string s4(10, 'c');&#160;&#160;&#160;// <span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s4</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">is</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">cccccccccc</span></span></tt></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre51"><span class="calibre5"><a id="filepos653301"/>Table 3.1. Ways to Initialize a <code class="calibre23"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">string</span></span></tt></span></span></tt></code></span></p><div class="calibre12">&#160;</div>
<div class="calibre52"><img alt="Image" src="images/00022.jpg" class="calibre9"/></div><div class="calibre22">&#160;</div>
<p class="calibre14">We can default initialize a <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> (&#167; <a href="022-2.2._variables.html#filepos350704">2.2.1</a>, p. <a href="022-2.2._variables.html#filepos350704">44</a>), which creates an empty <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>; that is, a <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> with no characters. When we supply a string literal (&#167; <a href="021-2.1._primitive_builtin_types.html#filepos326709">2.1.3</a>, p. <a href="021-2.1._primitive_builtin_types.html#filepos326709">39</a>), the characters from that literal&#8212;up to but not including the null character at the end of the literal&#8212;are copied into the newly created <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>. When we supply a count and a character, the <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> contains that many copies of the given character.</p><div class="calibre15">&#160;</div>
<h5 class="calibre39"><span class="calibre5">Direct and Copy Forms of Initialization</span></h5><div class="calibre38">&#160;</div>
<p class="calibre14">In &#167; <a href="022-2.2._variables.html#filepos350704">2.2.1</a> (p. <a href="022-2.2._variables.html#filepos350704">43</a>) we saw that C++ has several different forms of initialization. Using <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>s, we can start to understand how these forms differ from one another. When we initialize a variable using <code class="calibre23"><tt class="calibre23"><span class="calibre24">=</span></tt></code>, we are asking the compiler to <strong class="calibre5"><a id="filepos655091" href="037-defined_terms.html#filepos980347">copy initialize</a></strong> the object by copying the initializer on the right-hand side into the object being created. Otherwise, when we omit the <code class="calibre23"><tt class="calibre23"><span class="calibre24">=</span></tt></code>, we use <strong class="calibre5"><a id="filepos655361" href="037-defined_terms.html#filepos981163">direct initialization</a></strong>.</p><div class="calibre15">&#160;</div>
<p class="calibre25">When we have a single initializer, we can use either the direct or copy form of initialization. When we initialize a variable from more than one value, such as in the initialization of <code class="calibre23"><tt class="calibre23"><span class="calibre24">s4</span></tt></code> above, we must use the direct form of initialization:</p><div class="calibre22">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">string s5 = "hiya";&#160;&#160;// <span><span class="calibre45"><span class="calibre16">copy initialization</span></span></span><br class="calibre6"/>string s6("hiya");&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">direct initialization</span></span></span><br class="calibre6"/>string s7(10, 'c');&#160;&#160;// <span><span class="calibre45"><span class="calibre16">direct initialization;</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s7</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">is</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">cccccccccc</span></span></tt></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14"><a id="filepos656741"/>When we want to use several values, we can indirectly use the copy form of initialization by explicitly creating a (temporary) object to copy:</p><div class="calibre15">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">string s8 = string(10, 'c'); // <span><span class="calibre45"><span class="calibre16">copy initialization;</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s8</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">is</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">cccccccccc</span></span></tt></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">The initializer of <code class="calibre23"><tt class="calibre23"><span class="calibre24">s8</span></tt></code>&#8212;<code class="calibre23"><tt class="calibre23"><span class="calibre24">string(10, 'c')</span></tt></code>&#8212;creates a <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> of the given size and character value and then copies that value into <code class="calibre23"><tt class="calibre23"><span class="calibre24">s8</span></tt></code>. It is as if we had written</p><div class="calibre15">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">string temp(10, 'c'); // <span><tt class="calibre23"><span class="calibre46"><span class="calibre16">temp</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">is</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">cccccccccc</span></span></tt></span><br class="calibre6"/>string s8 = temp;&#160;&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">copy</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">temp</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">into</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s8</span></span></tt></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">Although the code used to initialize <code class="calibre23"><tt class="calibre23"><span class="calibre24">s8</span></tt></code> is legal, it is less readable and offers no compensating advantage over the way we initialized <code class="calibre23"><tt class="calibre23"><span class="calibre24">s7</span></tt></code>.</p><div class="calibre15">&#160;</div>
<h4 id="filepos659212" class="calibre37"><span class="calibre5">3.2.2. Operations on <code class="calibre23"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">string</span></span></tt></span></span></tt></code>s</span></h4><div class="calibre38">&#160;</div>
<div class="calibre28"><img alt="Image" src="images/00009.jpg" class="calibre9"/></div>
<p class="calibre14">Along with defining how objects are created and initialized, a class also defines the operations that objects of the class type can perform. A class can define operations that are called by name, such as the <code class="calibre23"><tt class="calibre23"><span class="calibre24">isbn</span></tt></code> function of our <code class="calibre23"><tt class="calibre23"><span class="calibre24">Sales_item</span></tt></code> class (&#167; <a href="015-1.5._introducing_classes.html#filepos237516">1.5.2</a>, p. <a href="015-1.5._introducing_classes.html#filepos237516">23</a>). A class also can define what various operator symbols, such as <code class="calibre23"><tt class="calibre23"><span class="calibre24">&lt;&lt;</span></tt></code> or <code class="calibre23"><tt class="calibre23"><span class="calibre24">+</span></tt></code>, mean when applied to objects of the class&#8217; type. <a href="031-3.2._library_string_type.html#filepos660463">Table 3.2</a> (overleaf) lists the most common <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> operations.</p><div class="calibre15">&#160;</div>
<p class="calibre51"><span class="calibre5"><a id="filepos660463"/>Table 3.2. <code class="calibre23"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">string</span></span></tt></span></span></tt></code> Operations</span></p><div class="calibre12">&#160;</div>
<div class="calibre52"><img alt="Image" src="images/00023.jpg" class="calibre9"/></div><div class="calibre22">&#160;</div>
<h5 class="calibre39"><span class="calibre5">Reading and Writing <code class="calibre23"><tt class="calibre23"><span class="calibre49"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">string</span></span></tt></span></span></tt></code>s</span></h5><div class="calibre38">&#160;</div>
<p class="calibre14">As we saw in <a href="010-chapter_1._getting_started.html#filepos113276">Chapter 1</a>, we use the <code class="calibre23"><tt class="calibre23"><span class="calibre24">iostream</span></tt></code> library to read and write values of built-in types such as <code class="calibre23"><tt class="calibre23"><span class="calibre24">int</span></tt></code>, <code class="calibre23"><tt class="calibre23"><span class="calibre24">double</span></tt></code>, and so on. We use the same IO operators to read and write <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>s:</p><div class="calibre15">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">// <span><span class="calibre45"><span class="calibre16">Note:</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">#include</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">and</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">using</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">declarations must be added to compile this code</span></span></span><br class="calibre6"/>int main()<br class="calibre6"/>{<br class="calibre6"/>&#160;&#160;&#160;&#160;string s;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">empty string</span></span></span><br class="calibre6"/>&#160;&#160;&#160;&#160;cin &gt;&gt; s;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">read a whitespace-separated string into</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s</span></span></tt></span><br class="calibre6"/>&#160;&#160;&#160;&#160;cout &lt;&lt; s &lt;&lt; endl; // <span><span class="calibre45"><span class="calibre16">write</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">to the output</span></span></span><br class="calibre6"/>&#160;&#160;&#160;&#160;return 0;<br class="calibre6"/>}</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14"><a id="filepos663014"/>This program begins by defining an empty <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> named <code class="calibre23"><tt class="calibre23"><span class="calibre24">s</span></tt></code>. The next line reads the standard input, storing what is read in <code class="calibre23"><tt class="calibre23"><span class="calibre24">s</span></tt></code>. The <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> input operator reads and discards any leading whitespace (e.g., spaces, newlines, tabs). It then reads characters until the next whitespace character is encountered.</p><div class="calibre15">&#160;</div>
<p class="calibre25">So, if the input to this program is <code class="calibre23"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">Hello World!</span></span></tt></span></span></tt></code> (note leading and trailing spaces), then the output will be <code class="calibre23"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">Hello</span></span></tt></span></span></tt></code> with no extra spaces.</p><div class="calibre22">&#160;</div>
<p class="calibre25">Like the input and output operations on the built-in types, the <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> operators return their left-hand operand as their result. Thus, we can chain together multiple reads or writes:</p><div class="calibre22">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">string s1, s2;<br class="calibre6"/>cin &gt;&gt; s1 &gt;&gt; s2; // <span><span class="calibre45"><span class="calibre16">read first input into</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s1</span></span></tt></span>, <span><span class="calibre45"><span class="calibre16">second into</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s2</span></span></tt></span><br class="calibre6"/>cout &lt;&lt; s1 &lt;&lt; s2 &lt;&lt; endl; // <span><span class="calibre45"><span class="calibre16">write both</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">string</span></span></tt></span><span><span class="calibre45"><span class="calibre16">s</span></span></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">If we give this version of the program the same input, <code class="calibre23"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">Hello World!</span></span></tt></span></span></tt></code>, our output would be &#8220;<code class="calibre23"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">HelloWorld!</span></span></tt></span></span></tt></code>&#8221;</p><div class="calibre15">&#160;</div>
<h5 class="calibre39"><span class="calibre5">Reading an Unknown Number of <code class="calibre23"><tt class="calibre23"><span class="calibre49"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">string</span></span></tt></span></span></tt></code>s</span></h5><div class="calibre38">&#160;</div>
<p class="calibre14">In &#167; <a href="014-1.4._flow_of_control.html#filepos191453">1.4.3</a> (p. <a href="014-1.4._flow_of_control.html#filepos191453">14</a>) we wrote a program that read an unknown number of <code class="calibre23"><tt class="calibre23"><span class="calibre24">int</span></tt></code> values. We can write a similar program that reads <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>s instead:</p><div class="calibre15">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">int main()<br class="calibre6"/>{<br class="calibre6"/>&#160;&#160;&#160;&#160;string word;<br class="calibre6"/>&#160;&#160;&#160;&#160;while (cin &gt;&gt; word)&#160;&#160;&#160;&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">read until end-of-file</span></span></span><br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;cout &lt;&lt; word &lt;&lt; endl; // <span><span class="calibre45"><span class="calibre16">write each word followed by a new line</span></span></span><br class="calibre6"/>&#160;&#160;&#160;&#160;return 0;<br class="calibre6"/>}</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">In this program, we read into a <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>, not an <code class="calibre23"><tt class="calibre23"><span class="calibre24">int</span></tt></code>. Otherwise, the <code class="calibre23"><tt class="calibre23"><span class="calibre24">while</span></tt></code> condition executes similarly to the one in our previous program. The condition tests the stream after the read completes. If the stream is valid&#8212;it hasn&#8217;t hit end-of-file <a id="filepos667577"/>or encountered an invalid input&#8212;then the body of the <code class="calibre23"><tt class="calibre23"><span class="calibre24">while</span></tt></code> is executed. The body prints the value we read on the standard output. Once we hit end-of-file (or invalid input), we fall out of the <code class="calibre23"><tt class="calibre23"><span class="calibre24">while</span></tt></code>.</p><div class="calibre15">&#160;</div>
<h5 class="calibre39"><span class="calibre5">Using <code class="calibre23"><tt class="calibre23"><span class="calibre49"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">getline</span></span></tt></span></span></tt></code> to Read an Entire Line</span></h5><div class="calibre38">&#160;</div>
<p class="calibre14">Sometimes we do not want to ignore the whitespace in our input. In such cases, we can use the <code class="calibre23"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5"><a id="filepos668391" href="037-defined_terms.html#filepos982571">getline</a></span></span></tt></span></span></tt></code> function instead of the <code class="calibre23"><tt class="calibre23"><span class="calibre24">&gt;&gt;</span></tt></code> operator. The <code class="calibre23"><tt class="calibre23"><span class="calibre24">getline</span></tt></code> function takes an input stream and a <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>. This function reads the given stream up to and including the first newline and stores what it read&#8212;<em class="calibre16">not including</em> the newline&#8212;in its <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> argument. After <code class="calibre23"><tt class="calibre23"><span class="calibre24">getline</span></tt></code> sees a newline, even if it is the first character in the input, it stops reading and returns. If the first character in the input is a newline, then the resulting <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> is the empty <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>.</p><div class="calibre15">&#160;</div>
<p class="calibre25">Like the input operator, <code class="calibre23"><tt class="calibre23"><span class="calibre24">getline</span></tt></code> returns its <code class="calibre23"><tt class="calibre23"><span class="calibre24">istream</span></tt></code> argument. As a result, we can use <code class="calibre23"><tt class="calibre23"><span class="calibre24">getline</span></tt></code> as a condition just as we can use the input operator as a condition (&#167; <a href="014-1.4._flow_of_control.html#filepos191453">1.4.3</a>, p. <a href="014-1.4._flow_of_control.html#filepos191453">14</a>). For example, we can rewrite the previous program that wrote one word per line to write a line at a time instead:</p><div class="calibre22">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">int main()<br class="calibre6"/>{<br class="calibre6"/>&#160;&#160;&#160;&#160;string line;<br class="calibre6"/>&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">read input a line at a time until end-of-file</span></span></span><br class="calibre6"/>&#160;&#160;&#160;&#160;while (getline(cin, line))<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;cout &lt;&lt; line &lt;&lt; endl;<br class="calibre6"/>&#160;&#160;&#160;&#160;return 0;<br class="calibre6"/>}</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">Because <code class="calibre23"><tt class="calibre23"><span class="calibre24">line</span></tt></code> does not contain a newline, we must write our own. As usual, we use <code class="calibre23"><tt class="calibre23"><span class="calibre24">endl</span></tt></code> to end the current line and flush the buffer.</p><div class="calibre15">&#160;</div>
<div class="calibre33"><blockquote class="calibre26"><hr class="calibre34"/><p class="calibre14"><span class="calibre5"><a/><img alt="Image" src="images/00012.jpg" class="calibre9"/> Note</span></p><div class="calibre15">&#160;</div>
<blockquote class="calibre13"><p class="calibre14">The newline that causes <code class="calibre23"><tt class="calibre23"><span class="calibre24">getline</span></tt></code> to return is discarded; the newline is <em class="calibre16">not</em> stored in the <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>.</p></blockquote><div class="calibre22">&#160;</div>
<hr class="calibre34"/></blockquote></div><div class="calibre3">&#160;</div>
<h5 class="calibre39"><span class="calibre5">The <code class="calibre23"><tt class="calibre23"><span class="calibre49"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">string empty</span></span></tt></span></span></tt></code> and <code class="calibre23"><tt class="calibre23"><span class="calibre49"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">size</span></span></tt></span></span></tt></code> Operations</span></h5><div class="calibre38">&#160;</div>
<p class="calibre14">The <code class="calibre23"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5"><a id="filepos672075" href="037-defined_terms.html#filepos981460">empty</a></span></span></tt></span></span></tt></code> function does what one would expect: It returns a <code class="calibre23"><tt class="calibre23"><span class="calibre24">bool</span></tt></code> (&#167; <a href="021-2.1._primitive_builtin_types.html#filepos288112">2.1</a>, p. <a href="021-2.1._primitive_builtin_types.html#filepos288112">32</a>) indicating whether the <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> is empty. Like the <code class="calibre23"><tt class="calibre23"><span class="calibre24">isbn</span></tt></code> member of <code class="calibre23"><tt class="calibre23"><span class="calibre24">Sales_item</span></tt></code> (&#167; <a href="015-1.5._introducing_classes.html#filepos237516">1.5.2</a>, p. <a href="015-1.5._introducing_classes.html#filepos237516">23</a>), <code class="calibre23"><tt class="calibre23"><span class="calibre24">empty</span></tt></code> is a member function of <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>. To call this function, we use the dot operator to specify the object on which we want to run the <code class="calibre23"><tt class="calibre23"><span class="calibre24">empty</span></tt></code> function.</p><div class="calibre15">&#160;</div>
<p class="calibre25">We can revise the previous program to only print lines that are not empty:</p><div class="calibre22">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">// <span><span class="calibre45"><span class="calibre16">read input a line at a time and discard blank lines</span></span></span><br class="calibre6"/>while (getline(cin, line))<br class="calibre6"/>&#160;&#160;&#160;&#160;if (!line.empty())<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;cout &lt;&lt; line &lt;&lt; endl;</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">The condition uses the logical <small class="calibre48">NOT</small> operator (the <a id="filepos673879" href="037-defined_terms.html#filepos993484"><code class="calibre23"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">!</span></span></tt></span></span></tt></code>
<strong class="calibre5">operator</strong></a>). This operator returns the inverse of the <code class="calibre23"><tt class="calibre23"><span class="calibre24">bool</span></tt></code> value of its operand. In this case, the condition is <code class="calibre23"><tt class="calibre23"><span class="calibre24">true</span></tt></code> if <code class="calibre23"><tt class="calibre23"><span class="calibre24">str</span></tt></code> is not empty.</p><div class="calibre15">&#160;</div>
<p class="calibre25"><a id="filepos674460"/>The <code class="calibre23"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5"><a id="filepos674559" href="037-defined_terms.html#filepos986741">size</a></span></span></tt></span></span></tt></code> member returns the length of a <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> (i.e., the number of characters in it). We can use <code class="calibre23"><tt class="calibre23"><span class="calibre24">size</span></tt></code> to print only lines longer than 80 characters:</p><div class="calibre22">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">string line;<br class="calibre6"/>// <span><span class="calibre45"><span class="calibre16">read input a line at a time and print lines that are longer than 80 characters</span></span></span><br class="calibre6"/>while (getline(cin, line))<br class="calibre6"/>&#160;&#160;&#160;&#160;if (line.size() &gt; 80)<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;cout &lt;&lt; line &lt;&lt; endl;</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<h5 class="calibre39"><span class="calibre5">The <code class="calibre23"><tt class="calibre23"><span class="calibre49"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">string::size_type</span></span></tt></span></span></tt></code> Type</span></h5><div class="calibre38">&#160;</div>
<p class="calibre14">It might be logical to expect that <code class="calibre23"><tt class="calibre23"><span class="calibre24">size</span></tt></code> returns an <code class="calibre23"><tt class="calibre23"><span class="calibre24">int</span></tt></code> or, thinking back to &#167; <a href="021-2.1._primitive_builtin_types.html#filepos288881">2.1.1</a> (p. <a href="021-2.1._primitive_builtin_types.html#filepos288881">34</a>), an <code class="calibre23"><tt class="calibre23"><span class="calibre24">unsigned</span></tt></code>. Instead, <code class="calibre23"><tt class="calibre23"><span class="calibre24">size</span></tt></code> returns a <code class="calibre23"><tt class="calibre23"><span class="calibre24">string::size_type</span></tt></code> value. This type requires a bit of explanation.</p><div class="calibre15">&#160;</div>
<p class="calibre25">The <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> class&#8212;and most other library types&#8212;defines several companion types. These companion types make it possible to use the library types in a machine-independent manner. The type <code class="calibre23"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5"><a id="filepos676802" href="037-defined_terms.html#filepos987603">size_type</a></span></span></tt></span></span></tt></code> is one of these companion types. To use the <code class="calibre23"><tt class="calibre23"><span class="calibre24">size_type</span></tt></code> defined by <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>, we use the scope operator to say that the name <code class="calibre23"><tt class="calibre23"><span class="calibre24">size_type</span></tt></code> is defined in the <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> class.</p><div class="calibre22">&#160;</div>
<p class="calibre25">Although we don&#8217;t know the precise type of <code class="calibre23"><tt class="calibre23"><span class="calibre24">string::size_type</span></tt></code>, we do know that it is an unsigned type (&#167; <a href="021-2.1._primitive_builtin_types.html#filepos288881">2.1.1</a>, p. <a href="021-2.1._primitive_builtin_types.html#filepos288881">32</a>) big enough to hold the size of any <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>. Any variable used to store the result from the <code class="calibre23"><tt class="calibre23"><span class="calibre24">string size</span></tt></code> operation should be of type <code class="calibre23"><tt class="calibre23"><span class="calibre24">string::size_type</span></tt></code>.</p><div class="calibre22">&#160;</div>
<div class="calibre28"><a id="filepos678006"/><img alt="Image" src="images/00008.jpg" class="calibre9"/></div>
<p class="calibre25">Admittedly, it can be tedious to type <code class="calibre23"><tt class="calibre23"><span class="calibre24">string::size_type</span></tt></code>. Under the new standard, we can ask the compiler to provide the appropriate type by using <code class="calibre23"><tt class="calibre23"><span class="calibre24">auto</span></tt></code> or <code class="calibre23"><tt class="calibre23"><span class="calibre24">decltype</span></tt></code> (&#167; <a href="025-2.5._dealing_with_types.html#filepos544751">2.5.2</a>, p. <a href="025-2.5._dealing_with_types.html#filepos544751">68</a>):</p><div class="calibre22">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">auto len = line.size(); // <span><tt class="calibre23"><span class="calibre46"><span class="calibre16">len</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">has type</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">string::size_type</span></span></tt></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre25">Because <code class="calibre23"><tt class="calibre23"><span class="calibre24">size</span></tt></code> returns an unsigned type, it is essential to remember that expressions that mix signed and unsigned data can have surprising results (&#167; <a href="021-2.1._primitive_builtin_types.html#filepos304094">2.1.2</a>, p. <a href="021-2.1._primitive_builtin_types.html#filepos304094">36</a>). For example, if <code class="calibre23"><tt class="calibre23"><span class="calibre24">n</span></tt></code> is an <code class="calibre23"><tt class="calibre23"><span class="calibre24">int</span></tt></code> that holds a negative value, then <code class="calibre23"><tt class="calibre23"><span class="calibre24">s.size() &lt; n</span></tt></code> will almost surely evaluate as <code class="calibre23"><tt class="calibre23"><span class="calibre24">true</span></tt></code>. It yields <code class="calibre23"><tt class="calibre23"><span class="calibre24">true</span></tt></code> because the negative value in <code class="calibre23"><tt class="calibre23"><span class="calibre24">n</span></tt></code> will convert to a large unsigned value.</p><div class="calibre22">&#160;</div>
<div class="calibre33"><blockquote class="calibre26"><hr class="calibre34"/><p class="calibre14"><span class="calibre5"><a/><img alt="Image" src="images/00018.jpg" class="calibre9"/> Tip</span></p><div class="calibre15">&#160;</div>
<blockquote class="calibre13"><p class="calibre14">You can avoid problems due to conversion between <code class="calibre23"><tt class="calibre23"><span class="calibre24">unsigned</span></tt></code> and <code class="calibre23"><tt class="calibre23"><span class="calibre24">int</span></tt></code> by not using <code class="calibre23"><tt class="calibre23"><span class="calibre24">int</span></tt></code>s in expressions that use <code class="calibre23"><tt class="calibre23"><span class="calibre24">size()</span></tt></code>.</p></blockquote><div class="calibre22">&#160;</div>
<hr class="calibre34"/></blockquote></div><div class="calibre3">&#160;</div>
<h5 class="calibre39"><span class="calibre5">Comparing <code class="calibre23"><tt class="calibre23"><span class="calibre49"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">string</span></span></tt></span></span></tt></code>s</span></h5><div class="calibre38">&#160;</div>
<p class="calibre14">The <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> class defines several operators that compare <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>s. These operators work by comparing the characters of the <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>s. The comparisons are case-sensitive&#8212;upper- and lowercase versions of a letter are different characters.</p><div class="calibre15">&#160;</div>
<p class="calibre25">The equality operators (<code class="calibre23"><tt class="calibre23"><span class="calibre24">==</span></tt></code> and <code class="calibre23"><tt class="calibre23"><span class="calibre24">!=</span></tt></code>) test whether two <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>s are equal or unequal, respectively. Two <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>s are equal if they are the same length and contain the same characters. The relational operators <code class="calibre23"><tt class="calibre23"><span class="calibre24">&lt;</span></tt></code>, <code class="calibre23"><tt class="calibre23"><span class="calibre24">&lt;=</span></tt></code>, <code class="calibre23"><tt class="calibre23"><span class="calibre24">&gt;</span></tt></code>, <code class="calibre23"><tt class="calibre23"><span class="calibre24">&gt;=</span></tt></code> test whether one <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> is less than, less than or equal to, greater than, or greater than or equal to another. These operators use the same strategy as a (case-sensitive) dictionary:</p><div class="calibre22">&#160;</div>
<blockquote class="calibre26"><p class="calibre47"><a id="filepos682521"/><strong class="calibre5">1.</strong> If two <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>s have different lengths and if every character in the shorter <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> is equal to the corresponding character of the longer <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>, then the shorter <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> is less than the longer one.</p></blockquote><div class="calibre15">&#160;</div>
<blockquote class="calibre26"><p class="calibre47"><strong class="calibre5">2.</strong> If any characters at corresponding positions in the two <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>s differ, then the result of the <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> comparison is the result of comparing the first character at which the <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>s differ.</p></blockquote><div class="calibre15">&#160;</div>
<p class="calibre14">As an example, consider the following <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>s:</p><div class="calibre15">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">string str = "Hello";<br class="calibre6"/>string phrase = "Hello World";<br class="calibre6"/>string slang&#160;&#160;= "Hiya";</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre25">Using rule 1, we see that <code class="calibre23"><tt class="calibre23"><span class="calibre24">str</span></tt></code> is less than <code class="calibre23"><tt class="calibre23"><span class="calibre24">phrase</span></tt></code>. By applying rule 2, we see that <code class="calibre23"><tt class="calibre23"><span class="calibre24">slang</span></tt></code> is greater than both <code class="calibre23"><tt class="calibre23"><span class="calibre24">str</span></tt></code> and <code class="calibre23"><tt class="calibre23"><span class="calibre24">phrase</span></tt></code>.</p><div class="calibre22">&#160;</div>
<h5 class="calibre39"><span class="calibre5">Assignment for <code class="calibre23"><tt class="calibre23"><span class="calibre49"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">string</span></span></tt></span></span></tt></code>s</span></h5><div class="calibre38">&#160;</div>
<p class="calibre14">In general, the library types strive to make it as easy to use a library type as it is to use a built-in type. To this end, most of the library types support assignment. In the case of <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>s, we can assign one <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> object to another:</p><div class="calibre15">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">string st1(10, 'c'), st2; // <span><tt class="calibre23"><span class="calibre46"><span class="calibre16">st1</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">is</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">cccccccccc; st2</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">is an empty</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">string</span></span></tt></span><br class="calibre6"/>st1 = st2; // <span><span class="calibre45"><span class="calibre16">assignment: replace contents of</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">st1</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">with a copy of</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">st2</span></span></tt></span><br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">both</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">st1</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">and</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">st2</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">are now the empty</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">string</span></span></tt></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<h5 class="calibre39"><span class="calibre5">Adding Two <code class="calibre23"><tt class="calibre23"><span class="calibre49"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">string</span></span></tt></span></span></tt></code>s</span></h5><div class="calibre38">&#160;</div>
<p class="calibre14">Adding two <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>s yields a new <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> that is the concatenation of the left-hand followed by the right-hand operand. That is, when we use the plus operator (<code class="calibre23"><tt class="calibre23"><span class="calibre24">+</span></tt></code>) on <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>s, the result is a new <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> whose characters are a copy of those in the left-hand operand followed by those from the right-hand operand. The compound assignment operator (<code class="calibre23"><tt class="calibre23"><span class="calibre24">+=</span></tt></code>) (&#167; <a href="014-1.4._flow_of_control.html#filepos166704">1.4.1</a>, p. <a href="014-1.4._flow_of_control.html#filepos166704">12</a>) appends the right-hand operand to the left-hand <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>:</p><div class="calibre15">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">string s1&#160;&#160;= "hello, ", s2 = "world\n";<br class="calibre6"/>string s3 = s1 + s2;&#160;&#160;&#160;// <span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s3</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">is</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">hello, world\n</span></span></tt></span><br class="calibre6"/>s1 += s2;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">equivalent to</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s1 = s1 + s2</span></span></tt></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<h5 class="calibre39"><span class="calibre5">Adding Literals and <code class="calibre23"><tt class="calibre23"><span class="calibre49"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">string</span></span></tt></span></span></tt></code>s</span></h5><div class="calibre38">&#160;</div>
<p class="calibre14">As we saw in &#167; <a href="021-2.1._primitive_builtin_types.html#filepos304094">2.1.2</a> (p. <a href="021-2.1._primitive_builtin_types.html#filepos304094">35</a>), we can use one type where another type is expected if there is a conversion from the given type to the expected type. The <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> library lets us convert both character literals and character string literals (&#167; <a href="021-2.1._primitive_builtin_types.html#filepos326709">2.1.3</a>, p. <a href="021-2.1._primitive_builtin_types.html#filepos326709">39</a>) to <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>s. Because we can use these literals where a <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> is expected, we can rewrite the previous program as follows:</p><div class="calibre15">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">string s1 = "hello", s2 = "world"; // <span><span class="calibre45"><span class="calibre16">no punctuation in</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s1</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">or</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s2</span></span></tt></span><br class="calibre6"/>string s3 = s1 + ", " + s2 + '\n';</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre25">When we mix <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>s and string or character literals, at least one operand to each <code class="calibre23"><tt class="calibre23"><span class="calibre24">+</span></tt></code> operator must be of <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> type:</p><div class="calibre22">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"><a id="filepos690788"/></span></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">string s4 = s1 + ", ";&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">ok: adding a</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">string</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">and a literal</span></span></span><br class="calibre6"/>string s5 = "hello" + ", ";&#160;&#160;&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">error: no</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">string</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">operand</span></span></span><br class="calibre6"/>string s6 = s1 + ", " + "world"; // <span><span class="calibre45"><span class="calibre16">ok: each</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">+</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">has a</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">string</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">operand</span></span></span><br class="calibre6"/>string s7 = "hello" + ", " + s2; // <span><span class="calibre45"><span class="calibre16">error: can't add string literals</span></span></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">The initializations of <code class="calibre23"><tt class="calibre23"><span class="calibre24">s4</span></tt></code> and <code class="calibre23"><tt class="calibre23"><span class="calibre24">s5</span></tt></code> involve only a single operation each, so it is easy to see whether the initialization is legal. The initialization of <code class="calibre23"><tt class="calibre23"><span class="calibre24">s6</span></tt></code> may appear surprising, but it works in much the same way as when we chain together input or output expressions (&#167; <a href="012-1.2._a_first_look_at_inputoutput.html#filepos136281">1.2</a>, p. <a href="012-1.2._a_first_look_at_inputoutput.html#filepos136281">7</a>). This initialization groups as</p><div class="calibre15">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">string s6 = (s1 + ", ") + "world";</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">The subexpression <code class="calibre23"><tt class="calibre23"><span class="calibre24">s1 + ", "</span></tt></code> returns a <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>, which forms the left-hand operand of the second <code class="calibre23"><tt class="calibre23"><span class="calibre24">+</span></tt></code> operator. It is as if we had written</p><div class="calibre15">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">string tmp = s1 + ", ";&#160;&#160;// <span><span class="calibre45"><span class="calibre16">ok: + has a</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">string</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">operand</span></span></span><br class="calibre6"/>s6 = tmp + "world";&#160;&#160;&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">ok: + has a</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">string</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">operand</span></span></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">On the other hand, the initialization of <code class="calibre23"><tt class="calibre23"><span class="calibre24">s7</span></tt></code> is illegal, which we can see if we parenthesize the expression:</p><div class="calibre15">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">string s7 = ("hello" + ", ") + s2; // <span><span class="calibre45"><span class="calibre16">error: can't add string literals</span></span></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre25">Now it should be easy to see that the first subexpression adds two string literals. There is no way to do so, and so the statement is in error.</p><div class="calibre22">&#160;</div>
<div class="calibre33"><blockquote class="calibre26"><hr class="calibre34"/><p class="calibre14"><span class="calibre5"><a/><img alt="Image" src="images/00013.jpg" class="calibre9"/> Warning</span></p><div class="calibre15">&#160;</div>
<blockquote class="calibre13"><p class="calibre14">For historical reasons, and for compatibility with C, string literals are <em class="calibre16">not</em> standard library <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>s. It is important to remember that these types differ when you use string literals and library <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>s.</p></blockquote><div class="calibre22">&#160;</div>
<hr class="calibre34"/></blockquote></div><div class="calibre3">&#160;</div>
<div class="calibre42"><blockquote class="calibre26"><hr class="calibre34"/><blockquote class="calibre13"><p class="calibre43"><span class="calibre5">Exercises Section 3.2.2</span></p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 3.2:</strong> Write a program to read the standard input a line at a time. Modify your program to read a word at a time.</p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 3.3:</strong> Explain how whitespace characters are handled in the <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> input operator and in the <code class="calibre23"><tt class="calibre23"><span class="calibre24">getline</span></tt></code> function.</p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 3.4:</strong> Write a program to read two <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>s and report whether the <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>s are equal. If not, report which of the two is larger. Now, change the program to report whether the <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>s have the same length, and if not, report which is longer.</p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 3.5:</strong> Write a program to read <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>s from the standard input, concatenating what is read into one large <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>. Print the concatenated <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>. Next, change the program to separate adjacent input <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>s by a space.</p></blockquote><div class="calibre10">&#160;</div>
<hr class="calibre34"/></blockquote></div><div class="calibre3">&#160;</div>
<h4 id="filepos697807" class="calibre37"><span class="calibre5">3.2.3. Dealing with the Characters in a <code class="calibre23"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">string</span></span></tt></span></span></tt></code></span></h4><div class="calibre38">&#160;</div>
<div class="calibre28"><img alt="Image" src="images/00009.jpg" class="calibre9"/></div>
<p class="calibre14">Often we need to deal with the individual characters in a <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>. We might want to check to see whether a <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> contains any whitespace, or to change the characters to lowercase, or to see whether a given character is present, and so on.</p><div class="calibre15">&#160;</div>
<p class="calibre25"><a id="filepos698573"/>One part of this kind of processing involves how we gain access to the characters themselves. Sometimes we need to process every character. Other times we need to process only a specific character, or we can stop processing once some condition is met. It turns out that the best way to deal with these cases involves different language and library facilities.</p><div class="calibre22">&#160;</div>
<p class="calibre25">The other part of processing characters is knowing and/or changing the characteristics of a character. This part of the job is handled by a set of library functions, described in <a href="031-3.2._library_string_type.html#filepos699416">Table 3.3</a> (overleaf). These functions are defined in the <code class="calibre23"><tt class="calibre23"><span class="calibre24">cctype</span></tt></code> header.</p><div class="calibre22">&#160;</div>
<p class="calibre51"><span class="calibre5"><a id="filepos699416"/>Table 3.3. <code class="calibre23"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">cctype</span></span></tt></span></span></tt></code> Functions</span></p><div class="calibre12">&#160;</div>
<div class="calibre52"><img alt="Image" src="images/00024.jpg" class="calibre9"/></div><div class="calibre22">&#160;</div>
<div class="calibre35"><blockquote class="calibre26"><hr class="calibre34"/><blockquote class="calibre13"><p class="calibre14"><span class="calibre5"><a/>Advice: Use the C++ Versions of C Library Headers</span></p></blockquote><div class="calibre15">&#160;</div>
<blockquote class="calibre13"><p class="calibre14">In addition to facilities defined specifically for C++, the C++ library incorporates the C library. Headers in C have names of the form <em class="calibre16">name</em>
<code class="calibre23"><tt class="calibre23"><span class="calibre24">.h</span></tt></code>. The C++ versions of these headers are named <code class="calibre23"><tt class="calibre23"><span class="calibre24">c</span></tt></code>
<em class="calibre16">name</em>&#8212;they remove the <code class="calibre23"><tt class="calibre23"><span class="calibre24">.h</span></tt></code> suffix and precede the <em class="calibre16">name</em> with the letter <code class="calibre23"><tt class="calibre23"><span class="calibre24">c</span></tt></code>. The <code class="calibre23"><tt class="calibre23"><span class="calibre24">c</span></tt></code> indicates that the header is part of the C library.</p></blockquote><div class="calibre15">&#160;</div>
<blockquote class="calibre36"><p class="calibre25">Hence, <code class="calibre23"><tt class="calibre23"><span class="calibre24">cctype</span></tt></code> has the same contents as <code class="calibre23"><tt class="calibre23"><span class="calibre24">ctype.h</span></tt></code>, but in a form that is appropriate for C++ programs. In particular, the names defined in the <code class="calibre23"><tt class="calibre23"><span class="calibre24">c</span></tt></code><em class="calibre16">name</em> headers are defined inside the <code class="calibre23"><tt class="calibre23"><span class="calibre24">std</span></tt></code> namespace, whereas those defined in the <code class="calibre23"><tt class="calibre23"><span class="calibre24">.h</span></tt></code> versions are not.</p></blockquote><div class="calibre22">&#160;</div>
<blockquote class="calibre36"><p class="calibre25">Ordinarily, C++ programs should use the <code class="calibre23"><tt class="calibre23"><span class="calibre24">c</span></tt></code><em class="calibre16">name</em> versions of headers and not the <em class="calibre16">name</em>
<code class="calibre23"><tt class="calibre23"><span class="calibre24">.h</span></tt></code> versions. That way names from the standard library are consistently found in the <code class="calibre23"><tt class="calibre23"><span class="calibre24">std</span></tt></code> namespace. Using the <code class="calibre23"><tt class="calibre23"><span class="calibre24">.h</span></tt></code> headers puts the burden on the programmer to remember which library names are inherited from C and which are unique to C++.</p></blockquote><div class="calibre22">&#160;</div>
<hr class="calibre34"/></blockquote></div><div class="calibre3">&#160;</div>
<div class="calibre28"><a id="filepos702111"/><img alt="Image" src="images/00008.jpg" class="calibre9"/></div>
<h5 class="calibre39"><span class="calibre5">Processing Every Character? Use Range-Based <code class="calibre23"><tt class="calibre23"><span class="calibre49"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">for</span></span></tt></span></span></tt></code></span></h5><div class="calibre38">&#160;</div>
<p class="calibre14">If we want to do something to every character in a <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>, by far the best approach is to use a statement introduced by the new standard: the <strong class="calibre5"><a id="filepos702652" href="037-defined_terms.html#filepos986496">range <code class="calibre23"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">for</span></span></tt></span></span></tt></code></a></strong> statement. This statement iterates through the elements in a given sequence and performs some operation on each value in that sequence. The syntactic form is</p><div class="calibre15">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">for (<span><span class="calibre45"><span class="calibre16">declaration</span></span></span> : <span><span class="calibre45"><span class="calibre16">expression)</span></span></span><br class="calibre6"/>&#160;&#160;&#160;&#160;<span><span class="calibre45"><span class="calibre16">statement</span></span></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">where <em class="calibre16">expression</em> is an object of a type that represents a sequence, and <em class="calibre16">declaration</em> defines the variable that we&#8217;ll use to access the underlying elements in the sequence. On each iteration, the variable in <em class="calibre16">declaration</em> is initialized from the value of the next element in <em class="calibre16">expression</em>.</p><div class="calibre15">&#160;</div>
<p class="calibre25">A <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> represents a sequence of characters, so we can use a <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> as the <em class="calibre16">expression</em> in a range <code class="calibre23"><tt class="calibre23"><span class="calibre24">for</span></tt></code>. As a simple example, we can use a range <code class="calibre23"><tt class="calibre23"><span class="calibre24">for</span></tt></code> to print each character from a <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> on its own line of output:</p><div class="calibre22">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">string str("some string");<br class="calibre6"/>// <span><span class="calibre45"><span class="calibre16">print the characters in</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">str</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">one character to a line</span></span></span><br class="calibre6"/>for (auto c : str)&#160;&#160;&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">for every</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">char</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">in</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">str</span></span></tt></span><br class="calibre6"/>&#160;&#160;&#160;&#160;cout &lt;&lt; c &lt;&lt; endl;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">print the current character followed by a newline</span></span></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">The <code class="calibre23"><tt class="calibre23"><span class="calibre24">for</span></tt></code> loop associates the variable <code class="calibre23"><tt class="calibre23"><span class="calibre24">c</span></tt></code> with <code class="calibre23"><tt class="calibre23"><span class="calibre24">str</span></tt></code>. We define the loop control variable the same way we do any other variable. In this case, we use <code class="calibre23"><tt class="calibre23"><span class="calibre24">auto</span></tt></code> (&#167; <a href="025-2.5._dealing_with_types.html#filepos544751">2.5.2</a>, <a id="filepos705989"/>p. <a href="025-2.5._dealing_with_types.html#filepos544751">68</a>) to let the compiler determine the type of <code class="calibre23"><tt class="calibre23"><span class="calibre24">c</span></tt></code>, which in this case will be <code class="calibre23"><tt class="calibre23"><span class="calibre24">char</span></tt></code>. On each iteration, the next character in <code class="calibre23"><tt class="calibre23"><span class="calibre24">str</span></tt></code> will be copied into <code class="calibre23"><tt class="calibre23"><span class="calibre24">c</span></tt></code>. Thus, we can read this loop as saying, &#8220;For every character <code class="calibre23"><tt class="calibre23"><span class="calibre24">c</span></tt></code> in the <code class="calibre23"><tt class="calibre23"><span class="calibre24">string str</span></tt></code>,&#8221; do something. The &#8220;something&#8221; in this case is to print the character followed by a newline.</p><div class="calibre15">&#160;</div>
<p class="calibre25">As a somewhat more complicated example, we&#8217;ll use a range <code class="calibre23"><tt class="calibre23"><span class="calibre24">for</span></tt></code> and the <code class="calibre23"><tt class="calibre23"><span class="calibre24">ispunct</span></tt></code> function to count the number of punctuation characters in a <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>:</p><div class="calibre22">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">string s("Hello World!!!");<br class="calibre6"/>// <span><tt class="calibre23"><span class="calibre46"><span class="calibre16">punct_cnt</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">has the same type that</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s.size</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">returns; see</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">&#167; 2.5.3 (p. 70)</span></span></tt></span><br class="calibre6"/>decltype(s.size()) punct_cnt = 0;<br class="calibre6"/>// <span><span class="calibre45"><span class="calibre16">count the number of punctuation characters in</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s</span></span></tt></span><br class="calibre6"/>for (auto c : s)&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">for every</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">char</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">in</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s</span></span></tt></span><br class="calibre6"/>&#160;&#160;&#160;&#160;if (ispunct(c))&#160;&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">if the character is punctuation</span></span></span><br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;++punct_cnt;&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">increment the punctuation counter</span></span></span><br class="calibre6"/>cout &lt;&lt; punct_cnt<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&lt;&lt; " punctuation characters in " &lt;&lt; s &lt;&lt; endl;</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">The output of this program is</p><div class="calibre15">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">3 punctuation characters in Hello World!!!</span></span></tt></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">Here we use <code class="calibre23"><tt class="calibre23"><span class="calibre24">decltype</span></tt></code> (&#167; <a href="025-2.5._dealing_with_types.html#filepos562878">2.5.3</a>, p. <a href="025-2.5._dealing_with_types.html#filepos562878">70</a>) to declare our counter, <code class="calibre23"><tt class="calibre23"><span class="calibre24">punct_cnt</span></tt></code>. Its type is the type returned by calling <code class="calibre23"><tt class="calibre23"><span class="calibre24">s.size</span></tt></code>, which is <code class="calibre23"><tt class="calibre23"><span class="calibre24">string::size_type</span></tt></code>. We use a range <code class="calibre23"><tt class="calibre23"><span class="calibre24">for</span></tt></code> to process each character in the <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>. This time we check whether each character is punctuation. If so, we use the increment operator (&#167; <a href="014-1.4._flow_of_control.html#filepos166704">1.4.1</a>, p. <a href="014-1.4._flow_of_control.html#filepos166704">12</a>) to add <code class="calibre23"><tt class="calibre23"><span class="calibre24">1</span></tt></code> to the counter. When the range <code class="calibre23"><tt class="calibre23"><span class="calibre24">for</span></tt></code> completes, we print the result.</p><div class="calibre15">&#160;</div>
<h5 class="calibre39"><span class="calibre5"><a id="filepos710583"/>Using a Range <code class="calibre23"><tt class="calibre23"><span class="calibre49"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">for</span></span></tt></span></span></tt></code> to Change the Characters in a <code class="calibre23"><tt class="calibre23"><span class="calibre49"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">string</span></span></tt></span></span></tt></code></span></h5><div class="calibre38">&#160;</div>
<p class="calibre14">If we want to change the value of the characters in a <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>, we must define the loop variable as a reference type (&#167; <a href="023-2.3._compound_types.html#filepos396246">2.3.1</a>, p. <a href="023-2.3._compound_types.html#filepos396246">50</a>). Remember that a reference is just another name for a given object. When we use a reference as our control variable, that variable is bound to each element in the sequence in turn. Using the reference, we can change the character to which the reference is bound.</p><div class="calibre15">&#160;</div>
<p class="calibre25">Suppose that instead of counting punctuation, we wanted to convert a <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> to all uppercase letters. To do so we can use the library <code class="calibre23"><tt class="calibre23"><span class="calibre24">toupper</span></tt></code> function, which takes a character and returns the uppercase version of that character. To convert the whole <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> we need to call <code class="calibre23"><tt class="calibre23"><span class="calibre24">toupper</span></tt></code> on each character and put the result back in that character:</p><div class="calibre22">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">string s("Hello World!!!");<br class="calibre6"/>// <span><span class="calibre45"><span class="calibre16">convert</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">to uppercase</span></span></span><br class="calibre6"/>for (auto &amp;c : s)&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">for every</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">char</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">in</span></span></span>
<span><span class="calibre45"><span class="calibre16">s (note:</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">c</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">is a reference)</span></span></span><br class="calibre6"/>&#160;&#160;&#160;&#160;c = toupper(c); // <span><tt class="calibre23"><span class="calibre46"><span class="calibre16">c</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">is a reference, so the assignment changes the</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">char</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">in</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s</span></span></tt></span><br class="calibre6"/>cout &lt;&lt; s &lt;&lt; endl;</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">The output of this code is</p><div class="calibre15">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">HELLO WORLD!!!</span></span></tt></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">On each iteration, <code class="calibre23"><tt class="calibre23"><span class="calibre24">c</span></tt></code> refers to the next character in <code class="calibre23"><tt class="calibre23"><span class="calibre24">s</span></tt></code>. When we assign to <code class="calibre23"><tt class="calibre23"><span class="calibre24">c</span></tt></code>, we are changing the underlying character in <code class="calibre23"><tt class="calibre23"><span class="calibre24">s</span></tt></code>. So, when we execute</p><div class="calibre15">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">c = toupper(c); // <span><tt class="calibre23"><span class="calibre46"><span class="calibre16">c</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">is a reference, so the assignment changes the</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">char</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">in</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s</span></span></tt></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">we&#8217;re changing the value of the character to which <code class="calibre23"><tt class="calibre23"><span class="calibre24">c</span></tt></code> is bound. When this loop completes, all the characters in <code class="calibre23"><tt class="calibre23"><span class="calibre24">str</span></tt></code> will be uppercase.</p><div class="calibre15">&#160;</div>
<h5 class="calibre39"><span class="calibre5">Processing Only Some Characters?</span></h5><div class="calibre38">&#160;</div>
<p class="calibre14">A range <code class="calibre23"><tt class="calibre23"><span class="calibre24">for</span></tt></code> works well when we need to process every character. However, sometimes we need to access only a single character or to access characters until some condition is reached. For example, we might want to capitalize only the first character or only the first word in a <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>.</p><div class="calibre15">&#160;</div>
<p class="calibre25">There are two ways to access individual characters in a <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>: We can use a subscript or an iterator. We&#8217;ll have more to say about iterators in &#167; <a href="033-3.4._introducing_iterators.html#filepos802543">3.4</a> (p. <a href="033-3.4._introducing_iterators.html#filepos802543">106</a>) and in <a href="088-chapter_9._sequential_containers.html#filepos2171064">Chapter 9</a>.</p><div class="calibre22">&#160;</div>
<p class="calibre25">The subscript operator (the <a id="filepos716487" href="037-defined_terms.html#filepos990568"><code class="calibre23"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">[ ]</span></span></tt></span></span></tt></code>
<strong class="calibre5">operator</strong></a>) takes a <code class="calibre23"><tt class="calibre23"><span class="calibre24">string::size_type</span></tt></code> (&#167; <a href="031-3.2._library_string_type.html#filepos659212">3.2.2</a>, p. <a href="031-3.2._library_string_type.html#filepos659212">88</a>) value that denotes the position of the character we want to access. The operator returns a reference to the character at the given position.</p><div class="calibre22">&#160;</div>
<p class="calibre25">Subscripts for <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>s start at zero; if <code class="calibre23"><tt class="calibre23"><span class="calibre24">s</span></tt></code> is a <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> with at least two characters, then <code class="calibre23"><tt class="calibre23"><span class="calibre24">s[0]</span></tt></code> is the first character, <code class="calibre23"><tt class="calibre23"><span class="calibre24">s[1]</span></tt></code> is the second, and the last character is in <code class="calibre23"><tt class="calibre23"><span class="calibre24">s[s.size() - 1]</span></tt></code>.</p><div class="calibre22">&#160;</div>
<div class="calibre33"><blockquote class="calibre26"><hr class="calibre34"/><p class="calibre14"><span class="calibre5"><a/><img alt="Image" src="images/00012.jpg" class="calibre9"/> Note</span></p><div class="calibre15">&#160;</div>
<blockquote class="calibre13"><p class="calibre14">The values we use to subscript a <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> must be <code class="calibre23"><tt class="calibre23"><span class="calibre24">&gt;= 0</span></tt></code> and <code class="calibre23"><tt class="calibre23"><span class="calibre24">&lt; size()</span></tt></code>.</p></blockquote><div class="calibre22">&#160;</div>
<blockquote class="calibre13"><p class="calibre14"><strong class="calibre5">The result of using an index outside this range is undefined.</strong></p></blockquote><div class="calibre15">&#160;</div>
<blockquote class="calibre13"><p class="calibre14"><strong class="calibre5">By implication, subscripting an empty <code class="calibre23"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">string</span></span></tt></span></span></tt></code> is undefined.</strong></p></blockquote><div class="calibre15">&#160;</div>
<hr class="calibre34"/></blockquote></div><div class="calibre3">&#160;</div>
<p class="calibre25"><a id="filepos718762"/>The value in the subscript is referred to as &#8220;a subscript&#8221; or &#8220;an <strong class="calibre5"><a id="filepos718862" href="037-defined_terms.html#filepos983281">index</a></strong>.&#8221; The index we supply can be any expression that yields an integral value. However, if our index has a signed type, its value will be converted to the unsigned type that <code class="calibre23"><tt class="calibre23"><span class="calibre24">string::size_type</span></tt></code> represents (&#167; <a href="021-2.1._primitive_builtin_types.html#filepos304094">2.1.2</a>, p. <a href="021-2.1._primitive_builtin_types.html#filepos304094">36</a>).</p><div class="calibre22">&#160;</div>
<p class="calibre25">The following example uses the subscript operator to print the first character in a <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>:</p><div class="calibre22">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">if (!s.empty())&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">make sure there's a character to print</span></span></span><br class="calibre6"/>&#160;&#160;&#160;&#160;cout &lt;&lt; s[0] &lt;&lt; endl;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">print the first character in</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s</span></span></tt></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">Before accessing the character, we check that <code class="calibre23"><tt class="calibre23"><span class="calibre24">s</span></tt></code> is not empty. Any time we use a subscript, we must ensure that there is a value at the given location. If <code class="calibre23"><tt class="calibre23"><span class="calibre24">s</span></tt></code> is empty, then <code class="calibre23"><tt class="calibre23"><span class="calibre24">s[0]</span></tt></code> is undefined.</p><div class="calibre15">&#160;</div>
<p class="calibre25">So long as the <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> is not <code class="calibre23"><tt class="calibre23"><span class="calibre24">const</span></tt></code> (&#167; <a href="024-2.4._const_qualifier.html#filepos462256">2.4</a>, p. <a href="024-2.4._const_qualifier.html#filepos462256">59</a>), we can assign a new value to the character that the subscript operator returns. For example, we can capitalize the first letter as follows:</p><div class="calibre22">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">string s("some string");<br class="calibre6"/>if (!s.empty())&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">make sure there's a character in</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s[0]</span></span></tt></span><br class="calibre6"/>&#160;&#160;&#160;&#160;s[0] = toupper(s[0]);&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">assign a new value to the first character in</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s</span></span></tt></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">The output of this program is</p><div class="calibre15">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">Some string</span></span></tt></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<h5 class="calibre39"><span class="calibre5">Using a Subscript for Iteration</span></h5><div class="calibre38">&#160;</div>
<p class="calibre14">As a another example, we&#8217;ll change the first word in <code class="calibre23"><tt class="calibre23"><span class="calibre24">s</span></tt></code> to all uppercase:</p><div class="calibre15">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">// <span><span class="calibre45"><span class="calibre16">process characters in</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">until we run out of characters or we hit a whitespace</span></span></span><br class="calibre6"/>for (decltype(s.size()) index = 0;<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;index != s.size() &amp;&amp; !isspace(s[index]); ++index)<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s[index] = toupper(s[index]); // <span><span class="calibre45"><span class="calibre16">capitalize the current character</span></span></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">This program generates</p><div class="calibre15">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">SOME string</span></span></tt></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">Our <code class="calibre23"><tt class="calibre23"><span class="calibre24">for</span></tt></code> loop (&#167; <a href="014-1.4._flow_of_control.html#filepos180866">1.4.2</a>, p. <a href="014-1.4._flow_of_control.html#filepos180866">13</a>) uses <code class="calibre23"><tt class="calibre23"><span class="calibre24">index</span></tt></code> to subscript <code class="calibre23"><tt class="calibre23"><span class="calibre24">s</span></tt></code>. We use <code class="calibre23"><tt class="calibre23"><span class="calibre24">decltype</span></tt></code> to give <code class="calibre23"><tt class="calibre23"><span class="calibre24">index</span></tt></code> the appropriate type. We initialize <code class="calibre23"><tt class="calibre23"><span class="calibre24">index</span></tt></code> to <code class="calibre23"><tt class="calibre23"><span class="calibre24">0</span></tt></code> so that the first iteration will start on the first character in <code class="calibre23"><tt class="calibre23"><span class="calibre24">s</span></tt></code>. On each iteration we increment <code class="calibre23"><tt class="calibre23"><span class="calibre24">index</span></tt></code> to look at the next character in <code class="calibre23"><tt class="calibre23"><span class="calibre24">s</span></tt></code>. In the body of the loop we capitalize the current letter.</p><div class="calibre15">&#160;</div>
<p class="calibre25">The new part in this loop is the condition in the <code class="calibre23"><tt class="calibre23"><span class="calibre24">for</span></tt></code>. That condition uses the logical <small class="calibre48">AND</small> operator (the <a id="filepos725031" href="037-defined_terms.html#filepos994116"><code class="calibre23"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">&amp;&amp;</span></span></tt></span></span></tt></code>
<strong class="calibre5">operator</strong></a>). This operator yields <code class="calibre23"><tt class="calibre23"><span class="calibre24">true</span></tt></code> if both operands are <code class="calibre23"><tt class="calibre23"><span class="calibre24">true</span></tt></code> and <code class="calibre23"><tt class="calibre23"><span class="calibre24">false</span></tt></code> otherwise. The important part about this operator is that we are guaranteed that it evaluates its right-hand operand <em class="calibre16">only</em> if the left-hand operand is <code class="calibre23"><tt class="calibre23"><span class="calibre24">true</span></tt></code>. In this case, we are guaranteed that we will not subscript <code class="calibre23"><tt class="calibre23"><span class="calibre24">s</span></tt></code> unless we know that <code class="calibre23"><tt class="calibre23"><span class="calibre24">index</span></tt></code> is in range. That is, <code class="calibre23"><tt class="calibre23"><span class="calibre24">s[index]</span></tt></code> is executed only if <code class="calibre23"><tt class="calibre23"><span class="calibre24">index</span></tt></code> is not equal to <code class="calibre23"><tt class="calibre23"><span class="calibre24">s.size()</span></tt></code>. Because <code class="calibre23"><tt class="calibre23"><span class="calibre24">index</span></tt></code> is never incremented beyond the value of <code class="calibre23"><tt class="calibre23"><span class="calibre24">s.size()</span></tt></code>, we know that <code class="calibre23"><tt class="calibre23"><span class="calibre24">index</span></tt></code> will always be less than <code class="calibre23"><tt class="calibre23"><span class="calibre24">s.size()</span></tt></code>.</p><div class="calibre22">&#160;</div>
<div class="calibre35"><blockquote class="calibre26"><a id="filepos726663"/><hr class="calibre34"/><blockquote class="calibre13"><p class="calibre14"><span class="calibre5"><a/>Caution: Subscripts are Unchecked</span></p></blockquote><div class="calibre15">&#160;</div>
<blockquote class="calibre13"><p class="calibre14">When we use a subscript, we must ensure that the subscript is in range. That is, the subscript must be <code class="calibre23"><tt class="calibre23"><span class="calibre24">&gt;= 0</span></tt></code> and <code class="calibre23"><tt class="calibre23"><span class="calibre24">&lt;</span></tt></code> the <code class="calibre23"><tt class="calibre23"><span class="calibre24">size()</span></tt></code> of the <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>. One way to simplify code that uses subscripts is <em class="calibre16">always</em> to use a variable of type <code class="calibre23"><tt class="calibre23"><span class="calibre24">string::size_type</span></tt></code> as the subscript. Because that type is <code class="calibre23"><tt class="calibre23"><span class="calibre24">unsigned</span></tt></code>, we ensure that the subscript cannot be less than zero. When we use a <code class="calibre23"><tt class="calibre23"><span class="calibre24">size_type</span></tt></code> value as the subscript, we need to check only that our subscript is less than value returned by <code class="calibre23"><tt class="calibre23"><span class="calibre24">size()</span></tt></code>.</p></blockquote><div class="calibre22">&#160;</div>
<div class="calibre33"><blockquote class="calibre26"><hr class="calibre34"/><p class="calibre14"><span class="calibre5"><a/><img alt="Image" src="images/00013.jpg" class="calibre9"/> Warning</span></p><div class="calibre15">&#160;</div>
<blockquote class="calibre13"><p class="calibre14">The library is not required to check the value of an subscript. The result of using an out-of-range subscript is undefined.</p></blockquote><div class="calibre22">&#160;</div>
<hr class="calibre34"/></blockquote></div><div class="calibre3">&#160;</div>
<hr class="calibre34"/></blockquote></div><div class="calibre3">&#160;</div>
<h5 class="calibre39"><span class="calibre5">Using a Subscript for Random Access</span></h5><div class="calibre38">&#160;</div>
<p class="calibre14">In the previous example we advanced our subscript one position at a time to capitalize each character in sequence. We can also calculate an subscript and directly fetch the indicated character. There is no need to access characters in sequence.</p><div class="calibre15">&#160;</div>
<p class="calibre25">As an example, let&#8217;s assume we have a number between 0 and 15 and we want to generate the hexadecimal representation of that number. We can do so using a <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> that is initialized to hold the 16 hexadecimal &#8220;digits&#8221;:</p><div class="calibre22">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">const string hexdigits = "0123456789ABCDEF"; // <span><span class="calibre45"><span class="calibre16">possible hex digits</span></span></span><br class="calibre6"/>cout &lt;&lt; "Enter a series of numbers between 0 and 15"<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&lt;&lt; " separated by spaces. Hit ENTER when finished: "<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&lt;&lt; endl;<br class="calibre6"/>string result;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">will hold the resulting hexify'd string</span></span></span><br class="calibre6"/>string::size_type n;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">hold numbers from the input</span></span></span><br class="calibre6"/>while (cin &gt;&gt; n)<br class="calibre6"/>&#160;&#160;&#160;&#160;if (n &lt; hexdigits.size())&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">ignore invalid input</span></span></span><br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;result += hexdigits[n];&#160;&#160;// <span><span class="calibre45"><span class="calibre16">fetch the indicated hex digit</span></span></span><br class="calibre6"/>cout &lt;&lt; "Your hex number is: " &lt;&lt; result &lt;&lt; endl;</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">If we give this program the input</p><div class="calibre15">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">12 0 5 15 8 15</span></span></tt></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">the output will be</p><div class="calibre15">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">Your hex number is: C05F8F</span></span></tt></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">We start by initializing <code class="calibre23"><tt class="calibre23"><span class="calibre24">hexdigits</span></tt></code> to hold the hexadecimal digits <code class="calibre23"><tt class="calibre23"><span class="calibre24">0</span></tt></code> through <code class="calibre23"><tt class="calibre23"><span class="calibre24">F</span></tt></code>. We make that <code class="calibre23"><tt class="calibre23"><span class="calibre24">string const</span></tt></code> (&#167; <a href="024-2.4._const_qualifier.html#filepos462256">2.4</a>, p. <a href="024-2.4._const_qualifier.html#filepos462256">59</a>) because we do not want these values to change. Inside the loop we use the input value <code class="calibre23"><tt class="calibre23"><span class="calibre24">n</span></tt></code> to subscript <code class="calibre23"><tt class="calibre23"><span class="calibre24">hexdigits</span></tt></code>. The value of <code class="calibre23"><tt class="calibre23"><span class="calibre24">hexdigits[n]</span></tt></code> is the <code class="calibre23"><tt class="calibre23"><span class="calibre24">char</span></tt></code> that appears at position <code class="calibre23"><tt class="calibre23"><span class="calibre24">n</span></tt></code> in <code class="calibre23"><tt class="calibre23"><span class="calibre24">hexdigits</span></tt></code>. For example, if <code class="calibre23"><tt class="calibre23"><span class="calibre24">n</span></tt></code> is <code class="calibre23"><tt class="calibre23"><span class="calibre24">15</span></tt></code>, then the result is <code class="calibre23"><tt class="calibre23"><span class="calibre24">F</span></tt></code>; if it&#8217;s <code class="calibre23"><tt class="calibre23"><span class="calibre24">12</span></tt></code>, the result is <code class="calibre23"><tt class="calibre23"><span class="calibre24">C</span></tt></code>; and so on. We append that digit to <code class="calibre23"><tt class="calibre23"><span class="calibre24">result</span></tt></code>, which we print once we have read all the input.</p><div class="calibre15">&#160;</div>
<p class="calibre25">Whenever we use a subscript, we should think about how we know that it is in range. In this program, our subscript, <code class="calibre23"><tt class="calibre23"><span class="calibre24">n</span></tt></code>, is a <code class="calibre23"><tt class="calibre23"><span class="calibre24">string::size_type</span></tt></code>, which as we know is an unsigned type. As a result, we know that <code class="calibre23"><tt class="calibre23"><span class="calibre24">n</span></tt></code> is guaranteed to be greater than or equal to <code class="calibre23"><tt class="calibre23"><span class="calibre24">0</span></tt></code>. Before we use <code class="calibre23"><tt class="calibre23"><span class="calibre24">n</span></tt></code> to subscript <code class="calibre23"><tt class="calibre23"><span class="calibre24">hexdigits</span></tt></code>, we verify that it is less than the <code class="calibre23"><tt class="calibre23"><span class="calibre24">size</span></tt></code> of <code class="calibre23"><tt class="calibre23"><span class="calibre24">hexdigits</span></tt></code>.</p><div class="calibre22">&#160;</div>
<div class="calibre42"><blockquote class="calibre26"><a id="filepos733750"/><hr class="calibre34"/><blockquote class="calibre13"><p class="calibre43"><span class="calibre5">Exercises Section 3.2.3</span></p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 3.6:</strong> Use a range <code class="calibre23"><tt class="calibre23"><span class="calibre24">for</span></tt></code> to change all the characters in a <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> to <code class="calibre23"><tt class="calibre23"><span class="calibre24">X</span></tt></code>.</p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 3.7:</strong> What would happen if you define the loop control variable in the previous exercise as type <code class="calibre23"><tt class="calibre23"><span class="calibre24">char</span></tt></code>? Predict the results and then change your program to use a <code class="calibre23"><tt class="calibre23"><span class="calibre24">char</span></tt></code> to see if you were right.</p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 3.8:</strong> Rewrite the program in the first exercise, first using a <code class="calibre23"><tt class="calibre23"><span class="calibre24">while</span></tt></code> and again using a traditional <code class="calibre23"><tt class="calibre23"><span class="calibre24">for</span></tt></code> loop. Which of the three approaches do you prefer and why?</p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 3.9:</strong> What does the following program do? Is it valid? If not, why not?</p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">string s;<br class="calibre6"/>cout &lt;&lt; s[0] &lt;&lt; endl;</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 3.10:</strong> Write a program that reads a string of characters including punctuation and writes what was read but with the punctuation removed.</p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 3.11:</strong> Is the following range <code class="calibre23"><tt class="calibre23"><span class="calibre24">for</span></tt></code> legal? If so, what is the type of <code class="calibre23"><tt class="calibre23"><span class="calibre24">c</span></tt></code>?</p></blockquote><div class="calibre10">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">const string s = "Keep out!";<br class="calibre6"/>for (auto &amp;c : s) { /* ...&#160;&#160;*/ }</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<hr class="calibre34"/></blockquote></div><div class="calibre3">&#160;</div>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;"><a href="001-contents.html"><img src="images/teamlib.gif" width="62" height="15" border="0" align="absmiddle"  alt="Team LiB"></a></div></td><td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href="030-3.1._namespace_using_declarations.html"><img src="images/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
<a href="032-3.3._library_vector_type.html"><img src="images/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a></div></td></tr></table></body></html>
