<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>11.1. Using an Associative Container</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" type="text/css" rel="stylesheet"/>
<link href="page_styles.css" type="text/css" rel="stylesheet"/>
</head>
  <body class="calibre">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;"><a href="001-contents.html"><img src="images/teamlib.gif" width="62" height="15" border="0" align="absmiddle"  alt="Team LiB"></a></div></td><td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href="106-chapter_11._associative_containers.html"><img src="images/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
<a href="108-11.2._overview_of_the_associative_containers.html"><img src="images/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a></div></td></tr></table><h3 id="filepos2724280" class="calibre29"><span class="bold">11.1. Using an Associative Container</span></h3><div class="calibre12">&#160;</div>
<div class="calibre28"><img alt="Image" src="images/00009.jpg" class="calibre9"/></div>
<p class="calibre14">Although most programmers are familiar with data structures such as <code class="calibre23"><tt class="calibre23"><span class="calibre24">vector</span></tt></code>s and <code class="calibre23"><tt class="calibre23"><span class="calibre24">list</span></tt></code>s, many have never used an associative data structure. Before we look at the details of how the library supports these types, it will be helpful to start with examples of how we can use these containers.</p><div class="calibre15">&#160;</div>
<p class="calibre25">A <code class="calibre23"><tt class="calibre23"><span class="calibre24">map</span></tt></code> is a collection of key&#8211;value pairs. For example, each pair might contain a person&#8217;s name as a key and a phone number as its value. We speak of such a data structure as &#8220;mapping names to phone numbers.&#8221; The <code class="calibre23"><tt class="calibre23"><span class="calibre24">map</span></tt></code> type is often referred to as an <strong class="calibre5"><a id="filepos2725363" href="112-defined_terms.html#filepos2890650">associative array</a></strong>. An associative array is like a &#8220;normal&#8221; array except that its subscripts don&#8217;t have to be integers. Values in a <code class="calibre23"><tt class="calibre23"><span class="calibre24">map</span></tt></code> are found by a key <a id="filepos2725651"/>rather than by their position. Given a <code class="calibre23"><tt class="calibre23"><span class="calibre24">map</span></tt></code> of names to phone numbers, we&#8217;d use a person&#8217;s name as a subscript to fetch that person&#8217;s phone number.</p><div class="calibre22">&#160;</div>
<p class="calibre14">In contrast, a <code class="calibre23"><tt class="calibre23"><span class="calibre24">set</span></tt></code> is simply a collection of keys. A <code class="calibre23"><tt class="calibre23"><span class="calibre24">set</span></tt></code> is most useful when we simply want to know whether a value is present. For example, a business might define a <code class="calibre23"><tt class="calibre23"><span class="calibre24">set</span></tt></code> named <code class="calibre23"><tt class="calibre23"><span class="calibre24">bad_checks</span></tt></code> to hold the names of individuals who have written bad checks. Before accepting a check, that business would query <code class="calibre23"><tt class="calibre23"><span class="calibre24">bad_checks</span></tt></code> to see whether the customer&#8217;s name was present.</p><div class="calibre15">&#160;</div>
<h4 class="calibre37"><span class="calibre5">Using a <code class="calibre23"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">map</span></span></tt></span></span></tt></code></span></h4><div class="calibre38">&#160;</div>
<p class="calibre14">A classic example that relies on associative arrays is a word-counting program:</p><div class="calibre15">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">// <span><span class="calibre45"><span class="calibre16">count the number of times each word occurs in the input</span></span></span><br class="calibre6"/>map&lt;string, size_t&gt; word_count; // <span><span class="calibre45"><span class="calibre16">empty</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">map</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">from</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">string</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">to</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">size_t</span></span></tt></span><br class="calibre6"/>string word;<br class="calibre6"/>while (cin &gt;&gt; word)<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;++word_count[word];&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">fetch and increment the counter for</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">word</span></span></tt></span><br class="calibre6"/>for (const auto &amp;w : word_count) // <span><span class="calibre45"><span class="calibre16">for each element in the</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">map</span></span></tt></span><br class="calibre6"/>&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">print the results</span></span></span><br class="calibre6"/>&#160;&#160;&#160;&#160;cout &lt;&lt;&#160;&#160;w.first &lt;&lt; " occurs " &lt;&lt; w.second<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;&lt; ((w.second &gt; 1) ? " times" : " time") &lt;&lt; endl;</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">This program reads its input and reports how often each word appears.</p><div class="calibre15">&#160;</div>
<p class="calibre25">Like the sequential containers, the associative containers are templates (&#167; <a href="032-3.3._library_vector_type.html#filepos736471">3.3</a>, p. <a href="032-3.3._library_vector_type.html#filepos736471">96</a>). To define a <code class="calibre23"><tt class="calibre23"><span class="calibre24">map</span></tt></code>, we must specify both the key and value types. In this program, the <code class="calibre23"><tt class="calibre23"><span class="calibre24">map</span></tt></code> stores elements in which the keys are <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>s and the values are <code class="calibre23"><tt class="calibre23"><span class="calibre24">size_t</span></tt></code>s (&#167; <a href="034-3.5._arrays.html#filepos873638">3.5.2</a>, p. <a href="034-3.5._arrays.html#filepos873638">116</a>). When we subscript <code class="calibre23"><tt class="calibre23"><span class="calibre24">word_count</span></tt></code>, we use a <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> as the subscript, and we get back the <code class="calibre23"><tt class="calibre23"><span class="calibre24">size_t</span></tt></code> counter associated with that <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>.</p><div class="calibre22">&#160;</div>
<p class="calibre25">The <code class="calibre23"><tt class="calibre23"><span class="calibre24">while</span></tt></code> loop reads the standard input one word at a time. It uses each word to subscript <code class="calibre23"><tt class="calibre23"><span class="calibre24">word_count</span></tt></code>. If <code class="calibre23"><tt class="calibre23"><span class="calibre24">word</span></tt></code> is not already in the <code class="calibre23"><tt class="calibre23"><span class="calibre24">map</span></tt></code>, the subscript operator creates a new element whose key is <code class="calibre23"><tt class="calibre23"><span class="calibre24">word</span></tt></code> and whose value is <code class="calibre23"><tt class="calibre23"><span class="calibre24">0</span></tt></code>. Regardless of whether the element had to be created, we increment the value.</p><div class="calibre22">&#160;</div>
<p class="calibre25">Once we&#8217;ve read all the input, the range <code class="calibre23"><tt class="calibre23"><span class="calibre24">for</span></tt></code> (&#167; <a href="031-3.2._library_string_type.html#filepos697807">3.2.3</a>, p. <a href="031-3.2._library_string_type.html#filepos697807">91</a>) iterates through the <code class="calibre23"><tt class="calibre23"><span class="calibre24">map</span></tt></code>, printing each word and the corresponding counter. When we fetch an element from a <code class="calibre23"><tt class="calibre23"><span class="calibre24">map</span></tt></code>, we get an object of type <code class="calibre23"><tt class="calibre23"><span class="calibre24">pair</span></tt></code>, which we&#8217;ll describe in &#167; <a href="108-11.2._overview_of_the_associative_containers.html#filepos2764131">11.2.3</a> (p. <a href="108-11.2._overview_of_the_associative_containers.html#filepos2764131">426</a>). Briefly, a <code class="calibre23"><tt class="calibre23"><span class="calibre24">pair</span></tt></code> is a template type that holds two (<code class="calibre23"><tt class="calibre23"><span class="calibre24">public</span></tt></code>) data elements named <code class="calibre23"><tt class="calibre23"><span class="calibre24">first</span></tt></code> and <code class="calibre23"><tt class="calibre23"><span class="calibre24">second</span></tt></code>. The <code class="calibre23"><tt class="calibre23"><span class="calibre24">pair</span></tt></code>s used by <code class="calibre23"><tt class="calibre23"><span class="calibre24">map</span></tt></code> have a <code class="calibre23"><tt class="calibre23"><span class="calibre24">first</span></tt></code> member that is the key and a <code class="calibre23"><tt class="calibre23"><span class="calibre24">second</span></tt></code> member that is the corresponding value. Thus, the effect of the output statement is to print each word and its associated counter.</p><div class="calibre22">&#160;</div>
<p class="calibre25">If we ran this program on the text of the first paragraph in this section, our output would be</p><div class="calibre22">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">Although occurs 1 time</span></span></tt></span><br class="calibre6"/><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">Before occurs 1 time</span></span></tt></span><br class="calibre6"/><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">an occurs 1 time</span></span></tt></span><br class="calibre6"/><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">and occurs 1 time</span></span></tt></span><br class="calibre6"/><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">...</span></span></tt></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<h4 class="calibre37"><span class="calibre5"><a id="filepos2732953"/>Using a <code class="calibre23"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">set</span></span></tt></span></span></tt></code></span></h4><div class="calibre38">&#160;</div>
<p class="calibre14">A logical extension to our program is to ignore common words like &#8220;the,&#8221; &#8220;and,&#8221; &#8220;or,&#8221; and so on. We&#8217;ll use a <code class="calibre23"><tt class="calibre23"><span class="calibre24">set</span></tt></code> to hold the words we want to ignore and count only those words that are not in this set:</p><div class="calibre15">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">// <span><span class="calibre45"><span class="calibre16">count the number of times each word occurs in the input</span></span></span><br class="calibre6"/>map&lt;string, size_t&gt; word_count; // <span><span class="calibre45"><span class="calibre16">empty</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">map</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">from</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">string</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">to</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">size_t</span></span></tt></span><br class="calibre6"/>set&lt;string&gt; exclude = {"The", "But", "And", "Or", "An", "A",<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;"the", "but", "and", "or", "an", "a"};<br class="calibre6"/>string word;<br class="calibre6"/>while (cin &gt;&gt; word)<br class="calibre6"/>&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">count only words that are not in</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">exclude</span></span></tt></span><br class="calibre6"/>&#160;&#160;&#160;&#160;if (exclude.find(word) == exclude.end())<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;++word_count[word];&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">fetch and increment the counter for</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">word</span></span></tt></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">Like the other containers, <code class="calibre23"><tt class="calibre23"><span class="calibre24">set</span></tt></code> is a template. To define a <code class="calibre23"><tt class="calibre23"><span class="calibre24">set</span></tt></code>, we specify the type of its elements, which in this case are <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>s. As with the sequential containers, we can list initialize (&#167; <a href="090-9.2._container_library_overview.html#filepos2221429">9.2.4</a>, p. <a href="090-9.2._container_library_overview.html#filepos2221429">336</a>) the elements of an associative container. Our <code class="calibre23"><tt class="calibre23"><span class="calibre24">exclude</span></tt></code> set holds the 12 words we want to ignore.</p><div class="calibre15">&#160;</div>
<p class="calibre25">The important difference between this program and the previous program is that before counting each word, we check whether the word is in the exclusion set. We do this check in the <code class="calibre23"><tt class="calibre23"><span class="calibre24">if</span></tt></code>:</p><div class="calibre22">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">// <span><span class="calibre45"><span class="calibre16">count only words that are not in</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">exclude</span></span></tt></span><br class="calibre6"/>if (exclude.find(word) == exclude.end())</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">The call to <code class="calibre23"><tt class="calibre23"><span class="calibre24">find</span></tt></code> returns an iterator. If the given key is in the <code class="calibre23"><tt class="calibre23"><span class="calibre24">set</span></tt></code>, the iterator refers to that key. If the element is not found, <code class="calibre23"><tt class="calibre23"><span class="calibre24">find</span></tt></code> returns the off-the-end iterator. In this version, we update the counter for <code class="calibre23"><tt class="calibre23"><span class="calibre24">word</span></tt></code> only if <code class="calibre23"><tt class="calibre23"><span class="calibre24">word</span></tt></code> is not in <code class="calibre23"><tt class="calibre23"><span class="calibre24">exclude</span></tt></code>.</p><div class="calibre15">&#160;</div>
<p class="calibre25">If we run this version on the same input as before, our output would be</p><div class="calibre22">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">Although occurs 1 time</span></span></tt></span><br class="calibre6"/><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">Before occurs 1 time</span></span></tt></span><br class="calibre6"/><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">are occurs 1 time</span></span></tt></span><br class="calibre6"/><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">as occurs 1 time</span></span></tt></span><br class="calibre6"/><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">...</span></span></tt></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<div class="calibre42"><blockquote class="calibre26"><hr class="calibre34"/><blockquote class="calibre13"><p class="calibre43"><span class="calibre5">Exercises Section 11.1</span></p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 11.1:</strong> Describe the differences between a <code class="calibre23"><tt class="calibre23"><span class="calibre24">map</span></tt></code> and a <code class="calibre23"><tt class="calibre23"><span class="calibre24">vector</span></tt></code>.</p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 11.2:</strong> Give an example of when each of <code class="calibre23"><tt class="calibre23"><span class="calibre24">list</span></tt></code>, <code class="calibre23"><tt class="calibre23"><span class="calibre24">vector</span></tt></code>, <code class="calibre23"><tt class="calibre23"><span class="calibre24">deque</span></tt></code>, <code class="calibre23"><tt class="calibre23"><span class="calibre24">map</span></tt></code>, and <code class="calibre23"><tt class="calibre23"><span class="calibre24">set</span></tt></code> might be most useful.</p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 11.3:</strong> Write your own version of the word-counting program.</p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 11.4:</strong> Extend your program to ignore case and punctuation. For example, &#8220;example.&#8221; &#8220;example,&#8221; and &#8220;Example&#8221; should all increment the same counter.</p></blockquote><div class="calibre10">&#160;</div>
<hr class="calibre34"/></blockquote></div><div class="calibre3">&#160;</div>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;"><a href="001-contents.html"><img src="images/teamlib.gif" width="62" height="15" border="0" align="absmiddle"  alt="Team LiB"></a></div></td><td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href="106-chapter_11._associative_containers.html"><img src="images/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
<a href="108-11.2._overview_of_the_associative_containers.html"><img src="images/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a></div></td></tr></table></body></html>
