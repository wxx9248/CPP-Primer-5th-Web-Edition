<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>9.1. Overview of the Sequential Containers</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" type="text/css" rel="stylesheet"/>
<link href="page_styles.css" type="text/css" rel="stylesheet"/>
</head>
  <body class="calibre">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;"><a href="001-contents.html"><img src="images/teamlib.gif" width="62" height="15" border="0" align="absmiddle"  alt="Team LiB"></a></div></td><td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href="088-chapter_9._sequential_containers.html"><img src="images/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
<a href="090-9.2._container_library_overview.html"><img src="images/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a></div></td></tr></table><h3 id="filepos2175374" class="calibre29"><span class="bold">9.1. Overview of the Sequential Containers</span></h3><div class="calibre12">&#160;</div>
<div class="calibre28"><img alt="Image" src="images/00009.jpg" class="calibre9"/></div>
<p class="calibre14">The sequential containers, which are listed in <a href="089-9.1._overview_of_the_sequential_containers.html#filepos2176185">Table 9.1</a>, all provide fast sequential access to their elements. However, these containers offer different performance trade-offs relative to</p><div class="calibre15">&#160;</div>
<blockquote class="calibre26"><p class="calibre27">&#8226; The costs to add or delete elements to the container</p></blockquote><div class="calibre15">&#160;</div>
<blockquote class="calibre26"><p class="calibre27">&#8226; The costs to perform nonsequential access to elements of the container</p></blockquote><div class="calibre15">&#160;</div>
<p class="calibre51"><span class="calibre5"><a id="filepos2176185"/>Table 9.1. Sequential Container Types</span></p><div class="calibre12">&#160;</div>
<div class="calibre52"><img alt="Image" src="images/00046.jpg" class="calibre9"/></div><div class="calibre22">&#160;</div>
<p class="calibre25">With the exception of <code class="calibre23"><tt class="calibre23"><span class="calibre24">array</span></tt></code>, which is a fixed-size container, the containers provide efficient, flexible memory management. We can add and remove elements, growing and shrinking the size of the container. The strategies that the containers use for storing their elements have inherent, and sometimes significant, impact on the efficiency of these operations. In some cases, these strategies also affect whether a particular container supplies a particular operation.</p><div class="calibre22">&#160;</div>
<p class="calibre25">For example, <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> and <code class="calibre23"><tt class="calibre23"><span class="calibre24">vector</span></tt></code> hold their elements in contiguous memory. Because elements are contiguous, it is fast to compute the address of an element <a id="filepos2177258"/>from its index. However, adding or removing elements in the middle of one of these containers takes time: All the elements after the one inserted or removed have to be moved to maintain contiguity. Moreover, adding an element can sometimes require that additional storage be allocated. In that case, every element must be moved into the new storage.</p><div class="calibre22">&#160;</div>
<p class="calibre25">The <code class="calibre23"><tt class="calibre23"><span class="calibre24">list</span></tt></code> and <code class="calibre23"><tt class="calibre23"><span class="calibre24">forward_list</span></tt></code> containers are designed to make it fast to add or remove an element anywhere in the container. In exchange, these types do not support random access to elements: We can access an element only by iterating through the container. Moreover, the memory overhead for these containers is often substantial, when compared to <code class="calibre23"><tt class="calibre23"><span class="calibre24">vector, deque</span></tt></code>, and <code class="calibre23"><tt class="calibre23"><span class="calibre24">array</span></tt></code>.</p><div class="calibre22">&#160;</div>
<p class="calibre25">A <code class="calibre23"><tt class="calibre23"><span class="calibre24">deque</span></tt></code> is a more complicated data structure. Like <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> and <code class="calibre23"><tt class="calibre23"><span class="calibre24">vector, deque</span></tt></code> supports fast random access. As with <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> and <code class="calibre23"><tt class="calibre23"><span class="calibre24">vector</span></tt></code>, adding or removing elements in the middle of a <code class="calibre23"><tt class="calibre23"><span class="calibre24">deque</span></tt></code> is a (potentially) expensive operation. However, adding or removing elements at either end of the <code class="calibre23"><tt class="calibre23"><span class="calibre24">deque</span></tt></code> is a fast operation, comparable to adding an element to a <code class="calibre23"><tt class="calibre23"><span class="calibre24">list</span></tt></code> or <code class="calibre23"><tt class="calibre23"><span class="calibre24">forward_list</span></tt></code>.</p><div class="calibre22">&#160;</div>
<div class="calibre28"><a id="filepos2179346"/><img alt="Image" src="images/00008.jpg" class="calibre9"/></div>
<p class="calibre25">The <code class="calibre23"><tt class="calibre23"><span class="calibre24">forward_list</span></tt></code> and <code class="calibre23"><tt class="calibre23"><span class="calibre24">array</span></tt></code> types were added by the new standard. An <code class="calibre23"><tt class="calibre23"><span class="calibre24">array</span></tt></code> is a safer, easier-to-use alternative to built-in arrays. Like built-in arrays, library <code class="calibre23"><tt class="calibre23"><span class="calibre24">array</span></tt></code>s have fixed size. As a result, <code class="calibre23"><tt class="calibre23"><span class="calibre24">array</span></tt></code> does not support operations to add and remove elements or to resize the container. A <code class="calibre23"><tt class="calibre23"><span class="calibre24">forward_list</span></tt></code> is intended to be comparable to the best handwritten, singly linked list. Consequently, <code class="calibre23"><tt class="calibre23"><span class="calibre24">forward_list</span></tt></code> does not have the <code class="calibre23"><tt class="calibre23"><span class="calibre24">size</span></tt></code> operation because storing or computing its size would entail overhead compared to a handwritten list. For the other containers, <code class="calibre23"><tt class="calibre23"><span class="calibre24">size</span></tt></code> is guaranteed to be a fast, constant-time operation.</p><div class="calibre22">&#160;</div>
<div class="calibre33"><blockquote class="calibre26"><hr class="calibre34"/><p class="calibre14"><span class="calibre5"><a/><img alt="Image" src="images/00012.jpg" class="calibre9"/> Note</span></p><div class="calibre15">&#160;</div>
<blockquote class="calibre13"><p class="calibre14">For reasons we&#8217;ll explain in &#167; <a href="126-13.6._moving_objects.html#filepos3426774">13.6</a> (p. <a href="126-13.6._moving_objects.html#filepos3426774">531</a>), the new library containers are dramatically faster than in previous releases. The library containers almost certainly perform as well as (and usually better than) even the most carefully crafted alternatives. Modern C++ programs should use the library containers rather than more primitive structures like arrays.</p></blockquote><div class="calibre22">&#160;</div>
<hr class="calibre34"/></blockquote></div><div class="calibre3">&#160;</div>
<h4 class="calibre37"><span class="calibre5">Deciding Which Sequential Container to Use</span></h4><div class="calibre38">&#160;</div>
<div class="calibre33"><blockquote class="calibre26"><hr class="calibre34"/><p class="calibre14"><span class="calibre5"><a/><img alt="Image" src="images/00018.jpg" class="calibre9"/> Tip</span></p><div class="calibre15">&#160;</div>
<blockquote class="calibre13"><p class="calibre14">Ordinarily, it is best to use <code class="calibre23"><tt class="calibre23"><span class="calibre24">vector</span></tt></code> unless there is a good reason to prefer another container.</p></blockquote><div class="calibre22">&#160;</div>
<hr class="calibre34"/></blockquote></div><div class="calibre3">&#160;</div>
<p class="calibre14">There are a few rules of thumb that apply to selecting which container to use:</p><div class="calibre15">&#160;</div>
<blockquote class="calibre26"><p class="calibre27">&#8226; Unless you have a reason to use another container, use a <code class="calibre23"><tt class="calibre23"><span class="calibre24">vector</span></tt></code>.</p></blockquote><div class="calibre15">&#160;</div>
<blockquote class="calibre26"><p class="calibre27">&#8226; If your program has lots of small elements and space overhead matters, don&#8217;t use <code class="calibre23"><tt class="calibre23"><span class="calibre24">list</span></tt></code> or <code class="calibre23"><tt class="calibre23"><span class="calibre24">forward_list</span></tt></code>.</p></blockquote><div class="calibre15">&#160;</div>
<blockquote class="calibre26"><p class="calibre27">&#8226; If the program requires random access to elements, use a <code class="calibre23"><tt class="calibre23"><span class="calibre24">vector</span></tt></code> or a <code class="calibre23"><tt class="calibre23"><span class="calibre24">deque</span></tt></code>.</p></blockquote><div class="calibre15">&#160;</div>
<blockquote class="calibre26"><p class="calibre27">&#8226; If the program needs to insert or delete elements in the middle of the container, use a <code class="calibre23"><tt class="calibre23"><span class="calibre24">list</span></tt></code> or <code class="calibre23"><tt class="calibre23"><span class="calibre24">forward_list</span></tt></code>.</p></blockquote><div class="calibre15">&#160;</div>
<blockquote class="calibre26"><p class="calibre27">&#8226; If the program needs to insert or delete elements at the front and the back, but not in the middle, use a <code class="calibre23"><tt class="calibre23"><span class="calibre24">deque</span></tt></code>.</p></blockquote><div class="calibre15">&#160;</div>
<blockquote class="calibre26"><p class="calibre27"><a id="filepos2183652"/>&#8226; If the program needs to insert elements in the middle of the container only while reading input, and subsequently needs random access to the elements:</p></blockquote><div class="calibre15">&#160;</div>
<blockquote class="calibre26"><p class="calibre58">&#8211; First, decide whether you actually need to add elements in the middle of a container. It is often easier to append to a <code class="calibre23"><tt class="calibre23"><span class="calibre24">vector</span></tt></code> and then call the library <code class="calibre23"><tt class="calibre23"><span class="calibre24">sort</span></tt></code> function (which we shall cover in &#167; <a href="099-10.2._a_first_look_at_the_algorithms.html#filepos2506543">10.2.3</a> (p. <a href="099-10.2._a_first_look_at_the_algorithms.html#filepos2506543">384</a>)) to reorder the container when you&#8217;re done with input.</p></blockquote><div class="calibre15">&#160;</div>
<blockquote class="calibre26"><p class="calibre58">&#8211; If you must insert into the middle, consider using a <code class="calibre23"><tt class="calibre23"><span class="calibre24">list</span></tt></code> for the input phase. Once the input is complete, copy the <code class="calibre23"><tt class="calibre23"><span class="calibre24">list</span></tt></code> into a <code class="calibre23"><tt class="calibre23"><span class="calibre24">vector</span></tt></code>.</p></blockquote><div class="calibre15">&#160;</div>
<p class="calibre25">What if the program needs random access <em class="calibre16">and</em> needs to insert and delete elements in the middle of the container? This decision will depend on the relative cost of accessing the elements in a <code class="calibre23"><tt class="calibre23"><span class="calibre24">list</span></tt></code> or <code class="calibre23"><tt class="calibre23"><span class="calibre24">forward_list</span></tt></code> versus the cost of inserting or deleting elements in a <code class="calibre23"><tt class="calibre23"><span class="calibre24">vector</span></tt></code> or <code class="calibre23"><tt class="calibre23"><span class="calibre24">deque</span></tt></code>. In general, the predominant operation of the application (whether it does more access or more insertion or deletion) will determine the choice of container type. In such cases, performance testing the application using both containers will probably be necessary.</p><div class="calibre22">&#160;</div>
<div class="calibre33"><blockquote class="calibre26"><hr class="calibre34"/><p class="calibre14"><span class="calibre5"><a/><img alt="Image" src="images/00017.jpg" class="calibre9"/> Best Practices</span></p><div class="calibre15">&#160;</div>
<blockquote class="calibre13"><p class="calibre14">If you&#8217;re not sure which container to use, write your code so that it uses only operations common to both <code class="calibre23"><tt class="calibre23"><span class="calibre24">vector</span></tt></code>s and <code class="calibre23"><tt class="calibre23"><span class="calibre24">list</span></tt></code>s: Use iterators, not subscripts, and avoid random access to elements. That way it will be easy to use either a <code class="calibre23"><tt class="calibre23"><span class="calibre24">vector</span></tt></code> or a <code class="calibre23"><tt class="calibre23"><span class="calibre24">list</span></tt></code> as necessary.</p></blockquote><div class="calibre22">&#160;</div>
<hr class="calibre34"/></blockquote></div><div class="calibre3">&#160;</div>
<div class="calibre42"><blockquote class="calibre26"><hr class="calibre34"/><blockquote class="calibre13"><p class="calibre43"><span class="calibre5">Exercises Section 9.1</span></p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 9.1:</strong> Which is the most appropriate&#8212;a <code class="calibre23"><tt class="calibre23"><span class="calibre24">vector</span></tt></code>, a <code class="calibre23"><tt class="calibre23"><span class="calibre24">deque</span></tt></code>, or a <code class="calibre23"><tt class="calibre23"><span class="calibre24">list</span></tt></code>&#8212;for the following program tasks? Explain the rationale for your choice. If there is no reason to prefer one or another container, explain why not.</p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre26"><p class="calibre53"><strong class="calibre5">(a)</strong> Read a fixed number of words, inserting them in the container alphabetically as they are entered. We&#8217;ll see in the next chapter that associative containers are better suited to this problem.</p></blockquote><div class="calibre15">&#160;</div>
<blockquote class="calibre26"><p class="calibre53"><strong class="calibre5">(b)</strong> Read an unknown number of words. Always insert new words at the back. Remove the next value from the front.</p></blockquote><div class="calibre15">&#160;</div>
<blockquote class="calibre26"><p class="calibre53"><strong class="calibre5">(c)</strong> Read an unknown number of integers from a file. Sort the numbers and then print them to standard output.</p></blockquote><div class="calibre15">&#160;</div>
<hr class="calibre34"/></blockquote></div><div class="calibre3">&#160;</div>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;"><a href="001-contents.html"><img src="images/teamlib.gif" width="62" height="15" border="0" align="absmiddle"  alt="Team LiB"></a></div></td><td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href="088-chapter_9._sequential_containers.html"><img src="images/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
<a href="090-9.2._container_library_overview.html"><img src="images/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a></div></td></tr></table></body></html>
