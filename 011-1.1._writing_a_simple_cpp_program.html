<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>1.1. Writing a Simple C++ Program</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" type="text/css" rel="stylesheet"/>
<link href="page_styles.css" type="text/css" rel="stylesheet"/>
</head>
  <body class="calibre">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;"><a href="001-contents.html"><img src="images/teamlib.gif" width="62" height="15" border="0" align="absmiddle"  alt="Team LiB"></a></div></td><td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href="010-chapter_1._getting_started.html"><img src="images/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
<a href="012-1.2._a_first_look_at_inputoutput.html"><img src="images/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a></div></td></tr></table><h3 id="filepos117760" class="calibre29"><span class="bold">1.1. Writing a Simple C++ Program</span></h3><div class="calibre12">&#160;</div>
<p class="calibre14">Every C++ program contains one or more <em class="calibre16"><strong class="calibre5"><a id="filepos117947" href="018-defined_terms.html#filepos261712">functions</a></strong></em>, one of which must be named <code class="calibre23"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5"><a id="filepos118130" href="018-defined_terms.html#filepos264173">main</a></span></span></tt></span></span></tt></code>. The operating system runs a C++ program by calling <code class="calibre23"><tt class="calibre23"><span class="calibre24">main</span></tt></code>. Here is a simple version of <code class="calibre23"><tt class="calibre23"><span class="calibre24">main</span></tt></code> that does nothing but return a value to the operating system:</p><div class="calibre15">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">int main()<br class="calibre6"/>{<br class="calibre6"/>&#160;&#160;&#160;&#160;return 0;<br class="calibre6"/>}</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre25">A function definition has four elements: a <em class="calibre16"><strong class="calibre5"><a id="filepos118815" href="018-defined_terms.html#filepos266268">return type</a></strong></em>, a <em class="calibre16"><strong class="calibre5"><a id="filepos118900" href="018-defined_terms.html#filepos262140">function name</a></strong></em>, a (possibly empty) <em class="calibre16"><strong class="calibre5"><a id="filepos119004" href="018-defined_terms.html#filepos265970">parameter list</a></strong></em> enclosed in parentheses, and a <em class="calibre16"><strong class="calibre5"><a id="filepos119120" href="018-defined_terms.html#filepos261909">function body</a></strong></em>. Although <code class="calibre23"><tt class="calibre23"><span class="calibre24">main</span></tt></code> is special in some ways, we define <code class="calibre23"><tt class="calibre23"><span class="calibre24">main</span></tt></code> the same way we define any other function.</p><div class="calibre22">&#160;</div>
<p class="calibre25">In this example, <code class="calibre23"><tt class="calibre23"><span class="calibre24">main</span></tt></code> has an empty list of parameters (shown by the <code class="calibre23"><tt class="calibre23"><span class="calibre24">()</span></tt></code> with nothing inside). &#167; <a href="064-6.2._argument_passing.html#filepos1526324">6.2.5</a> (p. <a href="064-6.2._argument_passing.html#filepos1526324">218</a>) will discuss the other parameter types that we can define for <code class="calibre23"><tt class="calibre23"><span class="calibre24">main</span></tt></code>.</p><div class="calibre22">&#160;</div>
<p class="calibre25">The <code class="calibre23"><tt class="calibre23"><span class="calibre24">main</span></tt></code> function is required to have a return type of <code class="calibre23"><tt class="calibre23"><span class="calibre24">int</span></tt></code>, which is a type that represents integers. The <code class="calibre23"><tt class="calibre23"><span class="calibre24">int</span></tt></code> type is a <strong class="calibre5"><a id="filepos120289" href="018-defined_terms.html#filepos255779">built-in type</a></strong>, which means that it is one of the types the language defines.</p><div class="calibre22">&#160;</div>
<p class="calibre25">The final part of a function definition, the function body, is a <em class="calibre16"><strong class="calibre5"><a id="filepos120560" href="018-defined_terms.html#filepos254859">block</a></strong></em> of <em class="calibre16"><strong class="calibre5"><a id="filepos120639" href="018-defined_terms.html#filepos268219">statements</a></strong></em> starting with an open <strong class="calibre5"><a id="filepos120738" href="018-defined_terms.html#filepos259548">curly brace</a></strong> and ending with a close curly:</p><div class="calibre22">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24"><a id="filepos120944"/>{<br class="calibre6"/>&#160;&#160;&#160;&#160;return 0;<br class="calibre6"/>}</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">The only statement in this block is a <code class="calibre23"><tt class="calibre23"><span class="calibre24">return</span></tt></code>, which is a statement that terminates a function. As is the case here, a <code class="calibre23"><tt class="calibre23"><span class="calibre24">return</span></tt></code> can also send a value back to the function&#8217;s caller. When a <code class="calibre23"><tt class="calibre23"><span class="calibre24">return</span></tt></code> statement includes a value, the value returned must have a type that is compatible with the return type of the function. In this case, the return type of <code class="calibre23"><tt class="calibre23"><span class="calibre24">main</span></tt></code> is <code class="calibre23"><tt class="calibre23"><span class="calibre24">int</span></tt></code> and the return value is <code class="calibre23"><tt class="calibre23"><span class="calibre24">0</span></tt></code>, which is an <code class="calibre23"><tt class="calibre23"><span class="calibre24">int</span></tt></code>.</p><div class="calibre15">&#160;</div>
<div class="calibre33"><blockquote class="calibre26"><hr class="calibre34"/><p class="calibre14"><span class="calibre5"><a/><img alt="Image" src="images/00012.jpg" class="calibre9"/> Note</span></p><div class="calibre15">&#160;</div>
<blockquote class="calibre13"><p class="calibre14">Note the semicolon at the end of the <code class="calibre23"><tt class="calibre23"><span class="calibre24">return</span></tt></code> statement. Semicolons mark the end of most statements in C++. They are easy to overlook but, when forgotten, can lead to mysterious compiler error messages.</p></blockquote><div class="calibre22">&#160;</div>
<hr class="calibre34"/></blockquote></div><div class="calibre3">&#160;</div>
<p class="calibre25">On most systems, the value returned from <code class="calibre23"><tt class="calibre23"><span class="calibre24">main</span></tt></code> is a status indicator. A return value of <code class="calibre23"><tt class="calibre23"><span class="calibre24">0</span></tt></code> indicates success. A nonzero return has a meaning that is defined by the system. Ordinarily a nonzero return indicates what kind of error occurred.</p><div class="calibre22">&#160;</div>
<div class="calibre35"><blockquote class="calibre26"><hr class="calibre34"/><blockquote class="calibre13"><p class="calibre14"><span class="calibre5"><a/>Key Concept: Types</span></p></blockquote><div class="calibre15">&#160;</div>
<blockquote class="calibre13"><p class="calibre14">Types are one of the most fundamental concepts in programming and a concept that we will come back to over and over in this Primer. A type defines both the contents of a data element and the operations that are possible on those data.</p></blockquote><div class="calibre15">&#160;</div>
<blockquote class="calibre36"><p class="calibre25">The data our programs manipulate are stored in variables and every variable has a type. When the type of a variable named <code class="calibre23"><tt class="calibre23"><span class="calibre24">v</span></tt></code> is <code class="calibre23"><tt class="calibre23"><span class="calibre24">T</span></tt></code>, we often say that &#8220;<code class="calibre23"><tt class="calibre23"><span class="calibre24">v</span></tt></code> has type <code class="calibre23"><tt class="calibre23"><span class="calibre24">T</span></tt></code>&#8221; or, interchangeably, that &#8220;<code class="calibre23"><tt class="calibre23"><span class="calibre24">v</span></tt></code> is a <code class="calibre23"><tt class="calibre23"><span class="calibre24">T</span></tt></code>.&#8221;</p></blockquote><div class="calibre22">&#160;</div>
<hr class="calibre34"/></blockquote></div><div class="calibre3">&#160;</div>
<h4 id="filepos124263" class="calibre37"><span class="calibre5">1.1.1. Compiling and Executing Our Program</span></h4><div class="calibre38">&#160;</div>
<p class="calibre14">Having written the program, we need to compile it. How you compile a program depends on your operating system and compiler. For details on how your particular compiler works, check the reference manual or ask a knowledgeable colleague.</p><div class="calibre15">&#160;</div>
<p class="calibre25">Many PC-based compilers are run from an integrated development environment (IDE) that bundles the compiler with build and analysis tools. These environments can be a great asset in developing large programs but require a fair bit of time to learn how to use effectively. Learning how to use such environments is well beyond the scope of this book.</p><div class="calibre22">&#160;</div>
<p class="calibre25">Most compilers, including those that come with an IDE, provide a command-line interface. Unless you already know the IDE, you may find it easier to start with the command-line interface. Doing so will let you concentrate on learning C++ first. Moreover, once you understand the language, the IDE is likely to be easier to learn.</p><div class="calibre22">&#160;</div>
<h5 class="calibre39"><span class="calibre5">Program Source File Naming Convention</span></h5><div class="calibre38">&#160;</div>
<p class="calibre14">Whether you use a command-line interface or an IDE, most compilers expect program source code to be stored in one or more files. Program files are normally <a id="filepos125769"/>referred to as a <em class="calibre16"><strong class="calibre5"><a id="filepos125806" href="018-defined_terms.html#filepos266483">source files</a></strong></em>. On most systems, the name of a source file ends with a suffix, which is a period followed by one or more characters. The suffix tells the system that the file is a C++ program. Different compilers use different suffix conventions; the most common include <code class="calibre23"><tt class="calibre23"><span class="calibre24">.cc</span></tt></code>, <code class="calibre23"><tt class="calibre23"><span class="calibre24">.cxx</span></tt></code>, <code class="calibre23"><tt class="calibre23"><span class="calibre24">.cpp</span></tt></code>, <code class="calibre23"><tt class="calibre23"><span class="calibre24">.cp</span></tt></code>, and <code class="calibre23"><tt class="calibre23"><span class="calibre24">.C</span></tt></code>.</p><div class="calibre15">&#160;</div>
<h5 class="calibre39"><span class="calibre5">Running the Compiler from the Command Line</span></h5><div class="calibre38">&#160;</div>
<p class="calibre14">If we are using a command-line interface, we will typically compile a program in a console window (such as a shell window on a UNIX system or a Command Prompt window on Windows). Assuming that our <code class="calibre23"><tt class="calibre23"><span class="calibre24">main</span></tt></code> program is in a file named <code class="calibre23"><tt class="calibre23"><span class="calibre24">prog1.cc</span></tt></code>, we might compile it by using a command such as</p><div class="calibre15">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">$ CC prog1.cc</span></span></tt></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">where <code class="calibre23"><tt class="calibre23"><span class="calibre24">CC</span></tt></code> names the compiler and <code class="calibre23"><tt class="calibre23"><span class="calibre24">$</span></tt></code> is the system prompt. The compiler generates an executable file. On a Windows system, that executable file is named <code class="calibre23"><tt class="calibre23"><span class="calibre24">prog1.exe</span></tt></code>. UNIX compilers tend to put their executables in files named <code class="calibre23"><tt class="calibre23"><span class="calibre24">a.out</span></tt></code>.</p><div class="calibre15">&#160;</div>
<p class="calibre25">To run an executable on Windows, we supply the executable file name and can omit the <code class="calibre23"><tt class="calibre23"><span class="calibre24">.exe</span></tt></code> file extension:</p><div class="calibre22">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">$ prog1</span></span></tt></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">On some systems you must specify the file&#8217;s location explicitly, even if the file is in the current directory or folder. In such cases, we would write</p><div class="calibre15">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">$ .\prog1</span></span></tt></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">The &#8220;<code class="calibre23"><tt class="calibre23"><span class="calibre24">.</span></tt></code>&#8221; followed by a backslash indicates that the file is in the current directory.</p><div class="calibre15">&#160;</div>
<p class="calibre25">To run an executable on UNIX, we use the full file name, including the file extension:</p><div class="calibre22">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">$ a.out</span></span></tt></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">If we need to specify the file&#8217;s location, we&#8217;d use a &#8220;<code class="calibre23"><tt class="calibre23"><span class="calibre24">.</span></tt></code>&#8221; followed by a forward slash to indicate that our executable is in the current directory:</p><div class="calibre15">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">$ ./a.out</span></span></tt></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre25">The value returned from <code class="calibre23"><tt class="calibre23"><span class="calibre24">main</span></tt></code> is accessed in a system-dependent manner. On both UNIX and Windows systems, after executing the program, you must issue an appropriate <code class="calibre23"><tt class="calibre23"><span class="calibre24">echo</span></tt></code> command.</p><div class="calibre22">&#160;</div>
<p class="calibre25">On UNIX systems, we obtain the status by writing</p><div class="calibre22">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">$ echo $?</span></span></tt></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">To see the status on a Windows system, we write</p><div class="calibre15">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">$ echo %ERRORLEVEL%</span></span></tt></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<div class="calibre35"><blockquote class="calibre26"><a id="filepos130891"/><hr class="calibre34"/><blockquote class="calibre13"><p class="calibre14"><span class="calibre5"><a/>Running the GNU or Microsoft Compilers</span></p></blockquote><div class="calibre15">&#160;</div>
<blockquote class="calibre13"><p class="calibre14">The command used to run the C++ compiler varies across compilers and operating systems. The most common compilers are the GNU compiler and the Microsoft Visual Studio compilers. By default, the command to run the GNU compiler is <code class="calibre23"><tt class="calibre23"><span class="calibre24">g++</span></tt></code>:</p></blockquote><div class="calibre15">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">$ g++ -o prog1 prog1.cc</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<blockquote class="calibre13"><p class="calibre14">Here <code class="calibre23"><tt class="calibre23"><span class="calibre24">$</span></tt></code> is the system prompt. The <code class="calibre23"><tt class="calibre23"><span class="calibre24">-o prog1</span></tt></code> is an argument to the compiler and names the file in which to put the executable file. This command generates an executable file named <code class="calibre23"><tt class="calibre23"><span class="calibre24">prog1</span></tt></code> or <code class="calibre23"><tt class="calibre23"><span class="calibre24">prog1.exe</span></tt></code>, depending on the operating system. On UNIX, executable files have no suffix; on Windows, the suffix is <code class="calibre23"><tt class="calibre23"><span class="calibre24">.exe</span></tt></code>. If the <code class="calibre23"><tt class="calibre23"><span class="calibre24">-o prog1</span></tt></code> is omitted, the compiler generates an executable named <code class="calibre23"><tt class="calibre23"><span class="calibre24">a.out</span></tt></code> on UNIX systems and <code class="calibre23"><tt class="calibre23"><span class="calibre24">a.exe</span></tt></code> on Windows. (Note: Depending on the release of the GNU compiler you are using, you may need to specify <code class="calibre23"><tt class="calibre23"><span class="calibre24">-std=c++0x</span></tt></code> to turn on C++ 11 support.)</p></blockquote><div class="calibre15">&#160;</div>
<blockquote class="calibre36"><p class="calibre25">The command to run the Microsoft Visual Studio 2010 compiler is <code class="calibre23"><tt class="calibre23"><span class="calibre24">cl</span></tt></code>:</p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">C:\Users\me\Programs&gt; cl /EHsc prog1.cpp</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<blockquote class="calibre13"><p class="calibre14">Here <code class="calibre23"><tt class="calibre23"><span class="calibre24">C:\Users\me\Programs&gt;</span></tt></code> is the system prompt and <code class="calibre23"><tt class="calibre23"><span class="calibre24">\Users\me\Programs</span></tt></code> is the name of the current directory (aka the current folder). The <code class="calibre23"><tt class="calibre23"><span class="calibre24">cl</span></tt></code> command invokes the compiler, and <code class="calibre23"><tt class="calibre23"><span class="calibre24">/EHsc</span></tt></code> is the compiler option that turns on standard exception handling. The Microsoft compiler automatically generates an executable with a name that corresponds to the first source file name. The executable has the suffix <code class="calibre23"><tt class="calibre23"><span class="calibre24">.exe</span></tt></code> and the same name as the source file name. In this case, the executable is named <code class="calibre23"><tt class="calibre23"><span class="calibre24">prog1.exe</span></tt></code>.</p></blockquote><div class="calibre15">&#160;</div>
<blockquote class="calibre36"><p class="calibre25">Compilers usually include options to generate warnings about problematic constructs. It is usually a good idea to use these options. Our preference is to use <code class="calibre23"><tt class="calibre23"><span class="calibre24">-Wall</span></tt></code> with the GNU compiler, and to use <code class="calibre23"><tt class="calibre23"><span class="calibre24">/W4</span></tt></code> with the Microsoft compilers.</p></blockquote><div class="calibre22">&#160;</div>
<blockquote class="calibre36"><p class="calibre25">For further information consult your compiler&#8217;s user&#8217;s guide.</p></blockquote><div class="calibre22">&#160;</div>
<hr class="calibre34"/></blockquote></div><div class="calibre3">&#160;</div>
<div class="calibre42"><blockquote class="calibre26"><hr class="calibre34"/><blockquote class="calibre13"><p class="calibre43"><span class="calibre5">Exercises Section 1.1.1</span></p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 1.1:</strong> Review the documentation for your compiler and determine what file naming convention it uses. Compile and run the <code class="calibre23"><tt class="calibre23"><span class="calibre24">main</span></tt></code> program from page <a href="010-chapter_1._getting_started.html#filepos115465">2</a>.</p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 1.2:</strong> Change the program to return <code class="calibre23"><tt class="calibre23"><span class="calibre24">-1</span></tt></code>. A return value of <code class="calibre23"><tt class="calibre23"><span class="calibre24">-1</span></tt></code> is often treated as an indicator that the program failed. Recompile and rerun your program to see how your system treats a failure indicator from <code class="calibre23"><tt class="calibre23"><span class="calibre24">main</span></tt></code>.</p></blockquote><div class="calibre10">&#160;</div>
<hr class="calibre34"/></blockquote></div><div class="calibre3">&#160;</div>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;"><a href="001-contents.html"><img src="images/teamlib.gif" width="62" height="15" border="0" align="absmiddle"  alt="Team LiB"></a></div></td><td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href="010-chapter_1._getting_started.html"><img src="images/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
<a href="012-1.2._a_first_look_at_inputoutput.html"><img src="images/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a></div></td></tr></table></body></html>
