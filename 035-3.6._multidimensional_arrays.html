<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>3.6. Multidimensional Arrays</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" type="text/css" rel="stylesheet"/>
<link href="page_styles.css" type="text/css" rel="stylesheet"/>
</head>
  <body class="calibre">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;"><a href="001-contents.html"><img src="images/teamlib.gif" width="62" height="15" border="0" align="absmiddle"  alt="Team LiB"></a></div></td><td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href="034-3.5._arrays.html"><img src="images/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
<a href="036-chapter_summary.html"><img src="images/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a></div></td></tr></table><h3 id="filepos942882" class="calibre29"><span class="bold">3.6. Multidimensional Arrays</span></h3><div class="calibre12">&#160;</div>
<div class="calibre28"><img alt="Image" src="images/00010.jpg" class="calibre9"/></div>
<p class="calibre14">Strictly speaking, there are no multidimensional arrays in C++. What are commonly referred to as multidimensional arrays are actually arrays of arrays. It can <a id="filepos943232"/>be helpful to keep this fact in mind when you use what appears to be a multidimensional array.</p><div class="calibre15">&#160;</div>
<div class="calibre42"><blockquote class="calibre26"><hr class="calibre34"/><blockquote class="calibre13"><p class="calibre43"><span class="calibre5">Exercises Section 3.5.5</span></p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 3.41:</strong> Write a program to initialize a <code class="calibre23"><tt class="calibre23"><span class="calibre24">vector</span></tt></code> from an array of <code class="calibre23"><tt class="calibre23"><span class="calibre24">int</span></tt></code>s.</p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 3.42:</strong> Write a program to copy a <code class="calibre23"><tt class="calibre23"><span class="calibre24">vector</span></tt></code> of <code class="calibre23"><tt class="calibre23"><span class="calibre24">int</span></tt></code>s into an array of <code class="calibre23"><tt class="calibre23"><span class="calibre24">int</span></tt></code>s.</p></blockquote><div class="calibre10">&#160;</div>
<hr class="calibre34"/></blockquote></div><div class="calibre3">&#160;</div>
<p class="calibre14">We define an array whose elements are arrays by providing two dimensions: the dimension of the array itself and the dimension of its elements:</p><div class="calibre15">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">int ia[3][4]; // <span><span class="calibre45"><span class="calibre16">array of size 3; each element is an array of</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">int</span></span></tt></span><span><span class="calibre45"><span class="calibre16">s of size 4</span></span></span><br class="calibre6"/>// <span><span class="calibre45"><span class="calibre16">array of size 10; each element is a 20-element array whose elements are arrays of 30</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">int</span></span></tt></span><span><span class="calibre45"><span class="calibre16">s</span></span></span><br class="calibre6"/>int arr[10][20][30] = {0}; // <span><span class="calibre45"><span class="calibre16">initialize all elements to</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">0</span></span></tt></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">As we saw in &#167; <a href="034-3.5._arrays.html#filepos855259">3.5.1</a> (p. <a href="034-3.5._arrays.html#filepos855259">115</a>), we can more easily understand these definitions by reading them from the inside out. We start with the name we&#8217;re defining (<code class="calibre23"><tt class="calibre23"><span class="calibre24">ia</span></tt></code>) and see that <code class="calibre23"><tt class="calibre23"><span class="calibre24">ia</span></tt></code> is an array of size 3. Continuing to look to the right, we see that the elements of <code class="calibre23"><tt class="calibre23"><span class="calibre24">ia</span></tt></code> also have a dimension. Thus, the elements in <code class="calibre23"><tt class="calibre23"><span class="calibre24">ia</span></tt></code> are themselves arrays of size 4. Looking left, we see that the type of those elements is <code class="calibre23"><tt class="calibre23"><span class="calibre24">int</span></tt></code>. So, <code class="calibre23"><tt class="calibre23"><span class="calibre24">ia</span></tt></code> is an array of size 3, each of whose elements is an array of four <code class="calibre23"><tt class="calibre23"><span class="calibre24">int</span></tt></code>s.</p><div class="calibre15">&#160;</div>
<p class="calibre25">We read the definition for <code class="calibre23"><tt class="calibre23"><span class="calibre24">arr</span></tt></code> in the same way. First we see that <code class="calibre23"><tt class="calibre23"><span class="calibre24">arr</span></tt></code> is an array of size 10. The elements of that array are themselves arrays of size 20. Each of those arrays has 30 elements that are of type <code class="calibre23"><tt class="calibre23"><span class="calibre24">int</span></tt></code>. There is no limit on how many subscripts are used. That is, we can have an array whose elements are arrays of elements that are arrays, and so on.</p><div class="calibre22">&#160;</div>
<p class="calibre25">In a two-dimensional array, the first dimension is usually referred to as the row and the second as the column.</p><div class="calibre22">&#160;</div>
<h4 class="calibre37"><span class="calibre5">Initializing the Elements of a Multidimensional Array</span></h4><div class="calibre38">&#160;</div>
<p class="calibre14">As with any array, we can initialize the elements of a multidimensional array by providing a bracketed list of initializers. Multidimensional arrays may be initialized by specifying bracketed values for each row:</p><div class="calibre15">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">int ia[3][4] = {&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">three elements; each element is an array of size 4</span></span></span><br class="calibre6"/>&#160;&#160;&#160;&#160;{0, 1, 2, 3},&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">initializers for the row indexed by</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">0</span></span></tt></span><br class="calibre6"/>&#160;&#160;&#160;&#160;{4, 5, 6, 7},&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">initializers for the row indexed by</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">1</span></span></tt></span><br class="calibre6"/>&#160;&#160;&#160;&#160;{8, 9, 10, 11}&#160;&#160;// <span><span class="calibre45"><span class="calibre16">initializers for the row indexed by</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">2</span></span></tt></span><br class="calibre6"/>};</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">The nested braces are optional. The following initialization is equivalent, although considerably less clear:</p><div class="calibre15">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">// <span><span class="calibre45"><span class="calibre16">equivalent initialization without the optional nested braces for each row</span></span></span><br class="calibre6"/>int ia[3][4] = {0,1,2,3,4,5,6,7,8,9,10,11};</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre25">As is the case for single-dimension arrays, elements may be left out of the initializer list. We can initialize only the first element of each row as follows:</p><div class="calibre22">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"><a id="filepos949803"/></span></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">// <span><span class="calibre45"><span class="calibre16">explicitly initialize only element 0 in each row</span></span></span><br class="calibre6"/>int ia[3][4] = {{ 0 }, { 4 }, { 8 }};</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">The remaining elements are value initialized in the same way as ordinary, single-dimension arrays (&#167; <a href="034-3.5._arrays.html#filepos855259">3.5.1</a>, p. <a href="034-3.5._arrays.html#filepos855259">114</a>). If the nested braces were omitted, the results would be very different. This code</p><div class="calibre15">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">// <span><span class="calibre45"><span class="calibre16">explicitly initialize row 0; the remaining elements are value initialized</span></span></span><br class="calibre6"/>int ix[3][4] = {0, 3, 6, 9};</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">initializes the elements of the first row. The remaining elements are initialized to 0.</p><div class="calibre15">&#160;</div>
<h4 class="calibre37"><span class="calibre5">Subscripting a Multidimensional Array</span></h4><div class="calibre38">&#160;</div>
<p class="calibre14">As with any array, we can use a subscript to access the elements of a multidimensional array. To do so, we use a separate subscript for each dimension.</p><div class="calibre15">&#160;</div>
<p class="calibre25">If an expression provides as many subscripts as there are dimensions, we get an element with the specified type. If we supply fewer subscripts than there are dimensions, then the result is the inner-array element at the specified index:</p><div class="calibre22">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">// <span><span class="calibre45"><span class="calibre16">assigns the first element of</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">arr</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">to the last element in the last row of</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">ia</span></span></tt></span><br class="calibre6"/>ia[2][3] = arr[0][0][0];<br class="calibre6"/>int (&amp;row)[4] = ia[1]; // <span><span class="calibre45"><span class="calibre16">binds</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">row</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">to the second four-element array in</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">ia</span></span></tt></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">In the first example we supply indices for all the dimensions for both arrays. On the left-hand side, <code class="calibre23"><tt class="calibre23"><span class="calibre24">ia[2]</span></tt></code> returns the last row in <code class="calibre23"><tt class="calibre23"><span class="calibre24">ia</span></tt></code>. It does not fetch an element from that array but returns the array itself. We subscript that array, fetching element <code class="calibre23"><tt class="calibre23"><span class="calibre24">[3]</span></tt></code>, which is the last element in that array.</p><div class="calibre15">&#160;</div>
<p class="calibre25">Similarly, the right-hand operand has three dimensions. We first fetch the array at index <code class="calibre23"><tt class="calibre23"><span class="calibre24">0</span></tt></code> from the outermost array. The result of that operation is a (multidimensional) array of size 20. We take the first element from that 20-element array, yielding an array of size 30. We then fetch the first element from that array.</p><div class="calibre22">&#160;</div>
<p class="calibre25">In the second example, we define <code class="calibre23"><tt class="calibre23"><span class="calibre24">row</span></tt></code> as a reference to an array of four <code class="calibre23"><tt class="calibre23"><span class="calibre24">int</span></tt></code>s. We bind that reference to the second row in <code class="calibre23"><tt class="calibre23"><span class="calibre24">ia</span></tt></code>.</p><div class="calibre22">&#160;</div>
<p class="calibre25">As another example, it is common to use a pair of nested <code class="calibre23"><tt class="calibre23"><span class="calibre24">for</span></tt></code> loops to process the elements in a multidimensional array:</p><div class="calibre22">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">constexpr size_t rowCnt = 3, colCnt = 4;<br class="calibre6"/>int ia[rowCnt][colCnt];&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">12 uninitialized elements</span></span></span><br class="calibre6"/>// <span><span class="calibre45"><span class="calibre16">for each row</span></span></span><br class="calibre6"/>for (size_t i = 0; i != rowCnt; ++i) {<br class="calibre6"/>&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">for each column within the row</span></span></span><br class="calibre6"/>&#160;&#160;&#160;&#160;for (size_t j = 0; j != colCnt; ++j) {<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">assign the element's positional index as its value</span></span></span><br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ia[i][j] = i * colCnt + j;<br class="calibre6"/>&#160;&#160;&#160;&#160;}<br class="calibre6"/>}</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">The outer <code class="calibre23"><tt class="calibre23"><span class="calibre24">for</span></tt></code> loops through each of the array elements in <code class="calibre23"><tt class="calibre23"><span class="calibre24">ia</span></tt></code>. The inner <code class="calibre23"><tt class="calibre23"><span class="calibre24">for</span></tt></code> loops through the elements of those interior arrays. In this case, we set the value of each element as its index in the overall array.</p><div class="calibre15">&#160;</div>
<h4 class="calibre37"><span class="calibre5"><a id="filepos955955"/>Using a Range <code class="calibre23"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">for</span></span></tt></span></span></tt></code> with Multidimensional Arrays</span></h4><div class="calibre38">&#160;</div>
<div class="calibre28"><img alt="Image" src="images/00011.jpg" class="calibre9"/></div>
<p class="calibre14">Under the new standard we can simplify the previous loop by using a range <code class="calibre23"><tt class="calibre23"><span class="calibre24">for</span></tt></code>:</p><div class="calibre15">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">size_t cnt = 0;<br class="calibre6"/>for (auto &amp;row : ia)&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">for every element in the outer array</span></span></span><br class="calibre6"/>&#160;&#160;&#160;&#160;for (auto &amp;col :&#160;row) { // <span><span class="calibre45"><span class="calibre16">for every element in the inner array</span></span></span><br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;col = cnt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">give this element the next value</span></span></span><br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;++cnt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">increment</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">cnt</span></span></tt></span><br class="calibre6"/>&#160;&#160;&#160;&#160;}</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">This loop gives the elements of <code class="calibre23"><tt class="calibre23"><span class="calibre24">ia</span></tt></code> the same values as the previous loop, but this time we let the system manage the indices for us. We want to change the value of the elements, so we declare our control variables, <code class="calibre23"><tt class="calibre23"><span class="calibre24">row</span></tt></code> and <code class="calibre23"><tt class="calibre23"><span class="calibre24">col</span></tt></code>, as references (&#167; <a href="031-3.2._library_string_type.html#filepos697807">3.2.3</a>, p. <a href="031-3.2._library_string_type.html#filepos697807">93</a>). The first <code class="calibre23"><tt class="calibre23"><span class="calibre24">for</span></tt></code> iterates through the elements in <code class="calibre23"><tt class="calibre23"><span class="calibre24">ia</span></tt></code>. Those elements are arrays of size 4. Thus, the type of <code class="calibre23"><tt class="calibre23"><span class="calibre24">row</span></tt></code> is a reference to an array of four <code class="calibre23"><tt class="calibre23"><span class="calibre24">int</span></tt></code>s. The second <code class="calibre23"><tt class="calibre23"><span class="calibre24">for</span></tt></code> iterates through one of those 4-element arrays. Hence, <code class="calibre23"><tt class="calibre23"><span class="calibre24">col</span></tt></code> is <code class="calibre23"><tt class="calibre23"><span class="calibre24">int&amp;</span></tt></code>. On each iteration we assign the value of <code class="calibre23"><tt class="calibre23"><span class="calibre24">cnt</span></tt></code> to the next element in <code class="calibre23"><tt class="calibre23"><span class="calibre24">ia</span></tt></code> and increment <code class="calibre23"><tt class="calibre23"><span class="calibre24">cnt</span></tt></code>.</p><div class="calibre15">&#160;</div>
<p class="calibre25">In the previous example, we used references as our loop control variables because we wanted to change the elements in the array. However, there is a deeper reason for using references. As an example, consider the following loop:</p><div class="calibre22">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">for (const auto &amp;row : ia)&#160;&#160;// <span><span class="calibre45"><span class="calibre16">for every element in the outer array</span></span></span><br class="calibre6"/>&#160;&#160;&#160;&#160;for (auto col : row)&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">for every element in the inner array</span></span></span><br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;cout &lt;&lt; col &lt;&lt; endl;</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">This loop does not write to the elements, yet we still define the control variable of the outer loop as a reference. We do so in order to avoid the normal array to pointer conversion (&#167; <a href="034-3.5._arrays.html#filepos881970">3.5.3</a>, p. <a href="034-3.5._arrays.html#filepos881970">117</a>). Had we neglected the reference and written these loops as:</p><div class="calibre15">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">for (auto row : ia)<br class="calibre6"/>&#160;&#160;&#160;&#160;for (auto col : row)</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">our program would not compile. As before, the first <code class="calibre23"><tt class="calibre23"><span class="calibre24">for</span></tt></code> iterates through <code class="calibre23"><tt class="calibre23"><span class="calibre24">ia</span></tt></code>, whose elements are arrays of size 4. Because <code class="calibre23"><tt class="calibre23"><span class="calibre24">row</span></tt></code> is not a reference, when the compiler initializes <code class="calibre23"><tt class="calibre23"><span class="calibre24">row</span></tt></code> it will convert each array element (like any other object of array type) to a pointer to that array&#8217;s first element. As a result, in this loop the type of <code class="calibre23"><tt class="calibre23"><span class="calibre24">row</span></tt></code> is <code class="calibre23"><tt class="calibre23"><span class="calibre24">int*</span></tt></code>. The inner <code class="calibre23"><tt class="calibre23"><span class="calibre24">for</span></tt></code> loop is illegal. Despite our intentions, that loop attempts to iterate over an <code class="calibre23"><tt class="calibre23"><span class="calibre24">int*</span></tt></code>.</p><div class="calibre15">&#160;</div>
<div class="calibre33"><blockquote class="calibre26"><hr class="calibre34"/><p class="calibre14"><span class="calibre5"><a/><img alt="Image" src="images/00012.jpg" class="calibre9"/> Note</span></p><div class="calibre15">&#160;</div>
<blockquote class="calibre13"><p class="calibre14">To use a multidimensional array in a range <code class="calibre23"><tt class="calibre23"><span class="calibre24">for</span></tt></code>, the loop control variable for all but the innermost array must be references.</p></blockquote><div class="calibre22">&#160;</div>
<hr class="calibre34"/></blockquote></div><div class="calibre3">&#160;</div>
<h4 class="calibre37"><span class="calibre5">Pointers and Multidimensional Arrays</span></h4><div class="calibre38">&#160;</div>
<p class="calibre14">As with any array, when we use the name of a multidimensional array, it is automatically converted to a pointer to the first element in the array.</p><div class="calibre15">&#160;</div>
<div class="calibre33"><blockquote class="calibre26"><a id="filepos962635"/><hr class="calibre34"/><p class="calibre14"><span class="calibre5"><a/><img alt="Image" src="images/00012.jpg" class="calibre9"/> Note</span></p><div class="calibre15">&#160;</div>
<blockquote class="calibre13"><p class="calibre14">When you define a pointer to a multidimensional array, remember that a multidimensional array is really an array of arrays.</p></blockquote><div class="calibre22">&#160;</div>
<hr class="calibre34"/></blockquote></div><div class="calibre3">&#160;</div>
<p class="calibre25">Because a multidimensional array is really an array of arrays, the pointer type to which the array converts is a pointer to the first inner array:</p><div class="calibre22">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">int ia[3][4];&#160;&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">array of size 3; each element is an array of</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">int</span></span></tt></span><span><span class="calibre45"><span class="calibre16">s</span></span></span>
<span><span class="calibre45"><span class="calibre16">of size 4</span></span></span><br class="calibre6"/>int (*p)[4] = ia; // <span><tt class="calibre23"><span class="calibre46"><span class="calibre16">p</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">points to an array of four</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">int</span></span></tt></span><span><span class="calibre45"><span class="calibre16">s</span></span></span><br class="calibre6"/>p = &amp;ia[2];&#160;&#160;&#160;&#160;&#160;&#160;&#160;// <span><tt class="calibre23"><span class="calibre46"><span class="calibre16">p</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">now points to the last element in</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">ia</span></span></tt></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">Applying the strategy from &#167; <a href="034-3.5._arrays.html#filepos855259">3.5.1</a> (p. <a href="034-3.5._arrays.html#filepos855259">115</a>), we start by noting that <code class="calibre23"><tt class="calibre23"><span class="calibre24">(*p)</span></tt></code> says <code class="calibre23"><tt class="calibre23"><span class="calibre24">p</span></tt></code> is a pointer. Looking right, we see that the object to which <code class="calibre23"><tt class="calibre23"><span class="calibre24">p</span></tt></code> points has a dimension of size <code class="calibre23"><tt class="calibre23"><span class="calibre24">4</span></tt></code>, and looking left that the element type is <code class="calibre23"><tt class="calibre23"><span class="calibre24">int</span></tt></code>. Hence, <code class="calibre23"><tt class="calibre23"><span class="calibre24">p</span></tt></code> is a pointer to an array of four <code class="calibre23"><tt class="calibre23"><span class="calibre24">int</span></tt></code>s.</p><div class="calibre15">&#160;</div>
<div class="calibre33"><blockquote class="calibre26"><hr class="calibre34"/><p class="calibre14"><span class="calibre5"><a/><img alt="Image" src="images/00012.jpg" class="calibre9"/> Note</span></p><div class="calibre15">&#160;</div>
<blockquote class="calibre13"><p class="calibre14">The parentheses in this declaration are essential:</p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">int *ip[4];&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">array of pointers to</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">int</span></span></tt></span><br class="calibre6"/>int (*ip)[4];&#160;&#160;// <span><span class="calibre45"><span class="calibre16">pointer to an array of four</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">int</span></span></tt></span><span><span class="calibre45"><span class="calibre16">s</span></span></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<hr class="calibre34"/></blockquote></div><div class="calibre3">&#160;</div>
<p class="calibre25">With the advent of the new standard, we can often avoid having to write the type of a pointer into an array by using <code class="calibre23"><tt class="calibre23"><span class="calibre24">auto</span></tt></code> or <code class="calibre23"><tt class="calibre23"><span class="calibre24">decltype</span></tt></code> (&#167; <a href="025-2.5._dealing_with_types.html#filepos544751">2.5.2</a>, p. <a href="025-2.5._dealing_with_types.html#filepos544751">68</a>):</p><div class="calibre22">&#160;</div>
<div class="calibre28"><a id="filepos966902"/><img alt="Image" src="images/00008.jpg" class="calibre9"/></div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">// <span><span class="calibre45"><span class="calibre16">print the value of each element in</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">ia,</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">with each inner array on its own line</span></span></span><br class="calibre6"/>//&#160;<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">p</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">points to an array of four</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">int</span></span></tt></span><span><span class="calibre45"><span class="calibre16">s</span></span></span><br class="calibre6"/>for (auto p = ia; p != ia + 3; ++p) {<br class="calibre6"/>&#160;&#160;&#160;&#160;// <span><tt class="calibre23"><span class="calibre46"><span class="calibre16">q</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">points to the first element of an array of four</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">int</span></span></tt></span><span><span class="calibre45"><span class="calibre16">s; that is,</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">q</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">points to an</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">int</span></span></tt></span><br class="calibre6"/>&#160;&#160;&#160;&#160;for (auto q = *p; q != *p + 4; ++q)<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;cout &lt;&lt; *q &lt;&lt; ' ';<br class="calibre6"/>&#160;&#160;&#160;&#160;cout &lt;&lt; endl;<br class="calibre6"/>}</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">The outer <code class="calibre23"><tt class="calibre23"><span class="calibre24">for</span></tt></code> loop starts by initializing <code class="calibre23"><tt class="calibre23"><span class="calibre24">p</span></tt></code> to point to the first array in <code class="calibre23"><tt class="calibre23"><span class="calibre24">ia</span></tt></code>. That loop continues until we&#8217;ve processed all three rows in <code class="calibre23"><tt class="calibre23"><span class="calibre24">ia</span></tt></code>. The increment, <code class="calibre23"><tt class="calibre23"><span class="calibre24">++p</span></tt></code>, has the effect of moving <code class="calibre23"><tt class="calibre23"><span class="calibre24">p</span></tt></code> to point to the next row (i.e., the next element) in <code class="calibre23"><tt class="calibre23"><span class="calibre24">ia</span></tt></code>.</p><div class="calibre15">&#160;</div>
<p class="calibre25">The inner <code class="calibre23"><tt class="calibre23"><span class="calibre24">for</span></tt></code> loop prints the values of the inner arrays. It starts by making <code class="calibre23"><tt class="calibre23"><span class="calibre24">q</span></tt></code> point to the first element in the array to which <code class="calibre23"><tt class="calibre23"><span class="calibre24">p</span></tt></code> points. The result of <code class="calibre23"><tt class="calibre23"><span class="calibre24">*p</span></tt></code> is an array of four <code class="calibre23"><tt class="calibre23"><span class="calibre24">int</span></tt></code>s. As usual, when we use an array, it is converted automatically to a pointer to its first element. The inner <code class="calibre23"><tt class="calibre23"><span class="calibre24">for</span></tt></code> loop runs until we&#8217;ve processed every element in the inner array. To obtain a pointer just off the end of the inner array, we again dereference <code class="calibre23"><tt class="calibre23"><span class="calibre24">p</span></tt></code> to get a pointer to the first element in that array. We then add 4 to that pointer to process the four elements in each inner array.</p><div class="calibre22">&#160;</div>
<p class="calibre25">Of course, we can even more easily write this loop using the library <code class="calibre23"><tt class="calibre23"><span class="calibre24">begin</span></tt></code> and <code class="calibre23"><tt class="calibre23"><span class="calibre24">end</span></tt></code> functions (&#167; <a href="034-3.5._arrays.html#filepos881970">3.5.3</a>, p. <a href="034-3.5._arrays.html#filepos881970">118</a>):</p><div class="calibre22">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24"> &#160;&#160;&#160;// <span><tt class="calibre23"><span class="calibre46"><span class="calibre16">p</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">points to the first array in</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">ia</span></span></tt></span><br class="calibre6"/>&#160;&#160;&#160;for (auto p = begin(ia); p != end(ia); ++p) {<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;// <span><tt class="calibre23"><span class="calibre46"><span class="calibre16">q</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">points to the first element in an inner array</span></span></span><br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;for (auto q = begin(*p); q != end(*p); ++q)<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;cout &lt;&lt; *q &lt;&lt; ' ';&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">prints the</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">int</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">value to which</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">q</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">points</span></span></span><br class="calibre6"/>&#160;&#160;&#160;cout &lt;&lt; endl;<br class="calibre6"/>}</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14"><a id="filepos972347"/>Here we let the library determine the end pointer, and we use <code class="calibre23"><tt class="calibre23"><span class="calibre24">auto</span></tt></code> to avoid having to write the type returned from <code class="calibre23"><tt class="calibre23"><span class="calibre24">begin</span></tt></code>. In the outer loop, that type is a pointer to an array of four <code class="calibre23"><tt class="calibre23"><span class="calibre24">int</span></tt></code>s. In the inner loop, that type is a pointer to <code class="calibre23"><tt class="calibre23"><span class="calibre24">int</span></tt></code>.</p><div class="calibre15">&#160;</div>
<h4 class="calibre37"><span class="calibre5">Type Aliases Simplify Pointers to Multidimensional Arrays</span></h4><div class="calibre38">&#160;</div>
<p class="calibre14">A type alias (&#167; <a href="025-2.5._dealing_with_types.html#filepos536134">2.5.1</a>, p. <a href="025-2.5._dealing_with_types.html#filepos536134">67</a>) can make it easier to read, write, and understand pointers to multidimensional arrays. For example:</p><div class="calibre15">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">using int_array = int[4]; // <span><span class="calibre45"><span class="calibre16">new style type alias declaration; see &#167; 2.5.1 (p. 68)</span></span></span><br class="calibre6"/>typedef int int_array[4]; // <span><span class="calibre45"><span class="calibre16">equivalent</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">typedef</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">declaration; &#167; 2.5.1 (p. 67)</span></span></span><br class="calibre6"/>// <span><span class="calibre45"><span class="calibre16">print the value of each element in</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">ia</span></span></tt></span><span><span class="calibre45"><span class="calibre16">, with each inner array on its own line</span></span></span><br class="calibre6"/>for (int_array *p = ia; p != ia + 3; ++p) {<br class="calibre6"/>&#160;&#160;&#160;&#160;for (int *q = *p; q != *p + 4; ++q)<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;cout &lt;&lt; *q &lt;&lt; ' ';<br class="calibre6"/>&#160;&#160;&#160;&#160;cout &lt;&lt; endl;<br class="calibre6"/>}</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">Here we start by defining <code class="calibre23"><tt class="calibre23"><span class="calibre24">int_array</span></tt></code> as a name for the type &#8220;array of four <code class="calibre23"><tt class="calibre23"><span class="calibre24">int</span></tt></code>s.&#8221; We use that type name to define our loop control variable in the outer <code class="calibre23"><tt class="calibre23"><span class="calibre24">for</span></tt></code> loop.</p><div class="calibre15">&#160;</div>
<div class="calibre42"><blockquote class="calibre26"><hr class="calibre34"/><blockquote class="calibre13"><p class="calibre43"><span class="calibre5">Exercises Section 3.6</span></p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 3.43:</strong> Write three different versions of a program to print the elements of <code class="calibre23"><tt class="calibre23"><span class="calibre24">ia</span></tt></code>. One version should use a range <code class="calibre23"><tt class="calibre23"><span class="calibre24">for</span></tt></code> to manage the iteration, the other two should use an ordinary <code class="calibre23"><tt class="calibre23"><span class="calibre24">for</span></tt></code> loop in one case using subscripts and in the other using pointers. In all three programs write all the types directly. That is, do not use a type alias, <code class="calibre23"><tt class="calibre23"><span class="calibre24">auto</span></tt></code>, or <code class="calibre23"><tt class="calibre23"><span class="calibre24">decltype</span></tt></code> to simplify the code.</p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 3.44:</strong> Rewrite the programs from the previous exercises using a type alias for the type of the loop control variables.</p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 3.45:</strong> Rewrite the programs again, this time using <code class="calibre23"><tt class="calibre23"><span class="calibre24">auto</span></tt></code>.</p></blockquote><div class="calibre10">&#160;</div>
<hr class="calibre34"/></blockquote></div><div class="calibre3">&#160;</div>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;"><a href="001-contents.html"><img src="images/teamlib.gif" width="62" height="15" border="0" align="absmiddle"  alt="Team LiB"></a></div></td><td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href="034-3.5._arrays.html"><img src="images/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
<a href="036-chapter_summary.html"><img src="images/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a></div></td></tr></table></body></html>
