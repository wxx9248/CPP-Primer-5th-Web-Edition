<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>9.6. Container Adaptors</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" type="text/css" rel="stylesheet"/>
<link href="page_styles.css" type="text/css" rel="stylesheet"/>
</head>
  <body class="calibre">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;"><a href="001-contents.html"><img src="images/teamlib.gif" width="62" height="15" border="0" align="absmiddle"  alt="Team LiB"></a></div></td><td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href="093-9.5._additional_string_operations.html"><img src="images/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
<a href="095-chapter_summary.html"><img src="images/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a></div></td></tr></table><h3 id="filepos2426063" class="calibre29"><span class="bold">9.6. Container Adaptors</span></h3><div class="calibre12">&#160;</div>
<div class="calibre28"><img alt="Image" src="images/00010.jpg" class="calibre9"/></div>
<p class="calibre14">In addition to the sequential containers, the library defines three sequential container adaptors: <code class="calibre23"><tt class="calibre23"><span class="calibre24">stack</span></tt></code>, <code class="calibre23"><tt class="calibre23"><span class="calibre24">queue</span></tt></code>, and <code class="calibre23"><tt class="calibre23"><span class="calibre24">priority_queue</span></tt></code>. An <strong class="calibre5"><a id="filepos2426582" href="096-defined_terms.html#filepos2444892">adaptor</a></strong> is a general <a id="filepos2426656"/>concept in the library. There are container, iterator, and function adaptors. Essentially, an adaptor is a mechanism for making one thing act like another. A container adaptor takes an existing container type and makes it act like a different type. For example, the <code class="calibre23"><tt class="calibre23"><span class="calibre24">stack</span></tt></code> adaptor takes a sequential container (other than <code class="calibre23"><tt class="calibre23"><span class="calibre24">array</span></tt></code> or <code class="calibre23"><tt class="calibre23"><span class="calibre24">forward_list)</span></tt></code> and makes it operate as if it were a <code class="calibre23"><tt class="calibre23"><span class="calibre24">stack</span></tt></code>. <a href="094-9.6._container_adaptors.html#filepos2427490">Table 9.17</a> lists the operations and types that are common to all the container adaptors.</p><div class="calibre15">&#160;</div>
<p class="calibre51"><span class="calibre5"><a id="filepos2427490"/>Table 9.17. Operations and Types Common to the Container Adaptors</span></p><div class="calibre12">&#160;</div>
<div class="calibre52"><img alt="Image" src="images/00065.jpg" class="calibre9"/></div><div class="calibre22">&#160;</div>
<div class="calibre42"><blockquote class="calibre26"><hr class="calibre34"/><blockquote class="calibre13"><p class="calibre43"><span class="calibre5">Exercises Section 9.5.5</span></p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 9.50:</strong> Write a program to process a <code class="calibre23"><tt class="calibre23"><span class="calibre24">vector&lt;string&gt;</span></tt></code>s whose elements represent integral values. Produce the sum of all the elements in that <code class="calibre23"><tt class="calibre23"><span class="calibre24">vector</span></tt></code>. Change the program so that it sums of <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>s that represent floating-point values.</p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 9.51:</strong> Write a class that has three <code class="calibre23"><tt class="calibre23"><span class="calibre24">unsigned</span></tt></code> members representing year, month, and day. Write a constructor that takes a <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> representing a date. Your constructor should handle a variety of date formats, such as January 1, 1900, 1/1/1900, Jan 1, 1900, and so on.</p></blockquote><div class="calibre10">&#160;</div>
<hr class="calibre34"/></blockquote></div><div class="calibre3">&#160;</div>
<h4 class="calibre37"><span class="calibre5">Defining an Adaptor</span></h4><div class="calibre38">&#160;</div>
<p class="calibre14">Each adaptor defines two constructors: the default constructor that creates an empty object, and a constructor that takes a container and initializes the adaptor by copying the given container. For example, assuming that <code class="calibre23"><tt class="calibre23"><span class="calibre24">deq</span></tt></code> is a <code class="calibre23"><tt class="calibre23"><span class="calibre24">deque&lt;int&gt;</span></tt></code>, we can use <code class="calibre23"><tt class="calibre23"><span class="calibre24">deq</span></tt></code> to initialize a new <code class="calibre23"><tt class="calibre23"><span class="calibre24">stack</span></tt></code> as follows:</p><div class="calibre15">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">stack&lt;int&gt; stk(deq);&#160;&#160;// <span><span class="calibre45"><span class="calibre16">copies elements from</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">deq</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">into</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">stk</span></span></tt></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre25">By default both <code class="calibre23"><tt class="calibre23"><span class="calibre24">stack</span></tt></code> and <code class="calibre23"><tt class="calibre23"><span class="calibre24">queue</span></tt></code> are implemented in terms of <code class="calibre23"><tt class="calibre23"><span class="calibre24">deque</span></tt></code>, and a <code class="calibre23"><tt class="calibre23"><span class="calibre24">priority_queue</span></tt></code> is implemented on a <code class="calibre23"><tt class="calibre23"><span class="calibre24">vector</span></tt></code>. We can override the default container type by naming a sequential container as a second type argument when we create the adaptor:</p><div class="calibre22">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"><a id="filepos2430935"/></span></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">// <span><span class="calibre45"><span class="calibre16">empty</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">stack</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">implemented on top of</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">vector</span></span></tt></span><br class="calibre6"/>stack&lt;string, vector&lt;string&gt;&gt; str_stk;<br class="calibre6"/>// <span><tt class="calibre23"><span class="calibre46"><span class="calibre16">str_stk2</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">is implemented on top of</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">vector</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">and initially holds a copy of</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">svec</span></span></tt></span><br class="calibre6"/>stack&lt;string, vector&lt;string&gt;&gt; str_stk2(svec);</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">There are constraints on which containers can be used for a given adaptor. All of the adaptors require the ability to add and remove elements. As a result, they cannot be built on an <code class="calibre23"><tt class="calibre23"><span class="calibre24">array</span></tt></code>. Similarly, we cannot use <code class="calibre23"><tt class="calibre23"><span class="calibre24">forward_list</span></tt></code>, because all of the adaptors require operations that add, remove, or access the last element in the container. A <code class="calibre23"><tt class="calibre23"><span class="calibre24">stack</span></tt></code> requires only <code class="calibre23"><tt class="calibre23"><span class="calibre24">push_back, pop_back</span></tt></code>, and <code class="calibre23"><tt class="calibre23"><span class="calibre24">back</span></tt></code> operations, so we can use any of the remaining container types for a <code class="calibre23"><tt class="calibre23"><span class="calibre24">stack</span></tt></code>. The <code class="calibre23"><tt class="calibre23"><span class="calibre24">queue</span></tt></code> adaptor requires <code class="calibre23"><tt class="calibre23"><span class="calibre24">back, push_back, front</span></tt></code>, and <code class="calibre23"><tt class="calibre23"><span class="calibre24">push_front</span></tt></code>, so it can be built on a <code class="calibre23"><tt class="calibre23"><span class="calibre24">list</span></tt></code> or <code class="calibre23"><tt class="calibre23"><span class="calibre24">deque</span></tt></code> but not on a <code class="calibre23"><tt class="calibre23"><span class="calibre24">vector</span></tt></code>. A <code class="calibre23"><tt class="calibre23"><span class="calibre24">priority_queue</span></tt></code> requires random access in addition to the <code class="calibre23"><tt class="calibre23"><span class="calibre24">front, push_back</span></tt></code>, and <code class="calibre23"><tt class="calibre23"><span class="calibre24">pop_back</span></tt></code> operations; it can be built on a <code class="calibre23"><tt class="calibre23"><span class="calibre24">vector</span></tt></code> or a <code class="calibre23"><tt class="calibre23"><span class="calibre24">deque</span></tt></code> but not on a <code class="calibre23"><tt class="calibre23"><span class="calibre24">list</span></tt></code>.</p><div class="calibre15">&#160;</div>
<h4 class="calibre37"><span class="calibre5">Stack Adaptor</span></h4><div class="calibre38">&#160;</div>
<p class="calibre14">The <code class="calibre23"><tt class="calibre23"><span class="calibre24">stack</span></tt></code> type is defined in the <code class="calibre23"><tt class="calibre23"><span class="calibre24">stack</span></tt></code> header. The operations provided by a <code class="calibre23"><tt class="calibre23"><span class="calibre24">stack</span></tt></code> are listed in <a href="094-9.6._container_adaptors.html#filepos2435976">Table 9.18</a>. The following program illustrates the use of <code class="calibre23"><tt class="calibre23"><span class="calibre24">stack</span></tt></code>:</p><div class="calibre15">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">stack&lt;int&gt; intStack;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">empty stack</span></span></span><br class="calibre6"/>// <span><span class="calibre45"><span class="calibre16">fill up the stack</span></span></span><br class="calibre6"/>for (size_t ix = 0; ix != 10; ++ix)<br class="calibre6"/>&#160;&#160;&#160;&#160;intStack.push(ix);&#160;&#160;&#160;// <span><tt class="calibre23"><span class="calibre46"><span class="calibre16">intStackholds</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">0 ... 9 inclusive</span></span></span><br class="calibre6"/>while (!intStack.empty()) {&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">while there are still values in</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">intStack</span></span></tt></span><br class="calibre6"/>&#160;&#160;&#160;&#160;int value = intStack.top();<br class="calibre6"/>&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">code that uses</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">value</span></span></tt></span><br class="calibre6"/>&#160;&#160;&#160;&#160;intStack.pop(); // <span><span class="calibre45"><span class="calibre16">pop the top element, and repeat</span></span></span><br class="calibre6"/>}</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre51"><span class="calibre5"><a id="filepos2435976"/>Table 9.18. Stack Operations in Addition to Those in <a href="094-9.6._container_adaptors.html#filepos2427490">Table 9.17</a></span></p><div class="calibre12">&#160;</div>
<div class="calibre52"><img alt="Image" src="images/00066.jpg" class="calibre9"/></div><div class="calibre22">&#160;</div>
<p class="calibre14">The declaration</p><div class="calibre15">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">stack&lt;int&gt; intStack;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">empty stack</span></span></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">defines <code class="calibre23"><tt class="calibre23"><span class="calibre24">intStack</span></tt></code> to be an empty <code class="calibre23"><tt class="calibre23"><span class="calibre24">stack</span></tt></code> that holds integer elements. The <code class="calibre23"><tt class="calibre23"><span class="calibre24">for</span></tt></code> loop adds ten elements, initializing each to the next integer in sequence starting from zero. The <code class="calibre23"><tt class="calibre23"><span class="calibre24">while</span></tt></code> loop iterates through the entire <code class="calibre23"><tt class="calibre23"><span class="calibre24">stack</span></tt></code>, examining the <code class="calibre23"><tt class="calibre23"><span class="calibre24">top</span></tt></code> value and <code class="calibre23"><tt class="calibre23"><span class="calibre24">pop</span></tt></code>ping it from the <code class="calibre23"><tt class="calibre23"><span class="calibre24">stack</span></tt></code> until the <code class="calibre23"><tt class="calibre23"><span class="calibre24">stack</span></tt></code> is empty.</p><div class="calibre15">&#160;</div>
<p class="calibre25"><a id="filepos2437640"/>Each container adaptor defines its own operations in terms of operations provided by the underlying container type. We can use only the adaptor operations and cannot use the operations of the underlying container type. For example,</p><div class="calibre22">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">intStack.push(ix);&#160;&#160;&#160;// <span><tt class="calibre23"><span class="calibre46"><span class="calibre16">intStackholds</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">0 ... 9 inclusive</span></span></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">calls <code class="calibre23"><tt class="calibre23"><span class="calibre24">push_back</span></tt></code> on the <code class="calibre23"><tt class="calibre23"><span class="calibre24">deque</span></tt></code> object on which <code class="calibre23"><tt class="calibre23"><span class="calibre24">intStack</span></tt></code> is based. Although <code class="calibre23"><tt class="calibre23"><span class="calibre24">stack</span></tt></code> is implemented by using a <code class="calibre23"><tt class="calibre23"><span class="calibre24">deque</span></tt></code>, we have no direct access to the <code class="calibre23"><tt class="calibre23"><span class="calibre24">deque</span></tt></code> operations. We cannot call <code class="calibre23"><tt class="calibre23"><span class="calibre24">push_back</span></tt></code> on a <code class="calibre23"><tt class="calibre23"><span class="calibre24">stack;</span></tt></code> instead, we must use the <code class="calibre23"><tt class="calibre23"><span class="calibre24">stack</span></tt></code> operation named <code class="calibre23"><tt class="calibre23"><span class="calibre24">push</span></tt></code>.</p><div class="calibre15">&#160;</div>
<h4 class="calibre37"><span class="calibre5">The Queue Adaptors</span></h4><div class="calibre38">&#160;</div>
<p class="calibre14">The <code class="calibre23"><tt class="calibre23"><span class="calibre24">queue</span></tt></code> and <code class="calibre23"><tt class="calibre23"><span class="calibre24">priority_queue</span></tt></code> adaptors are defined in the <code class="calibre23"><tt class="calibre23"><span class="calibre24">queue</span></tt></code> header. <a href="094-9.6._container_adaptors.html#filepos2439875">Table 9.19</a> lists the operations supported by these types.</p><div class="calibre15">&#160;</div>
<p class="calibre51"><span class="calibre5"><a id="filepos2439875"/>Table 9.19. <code class="calibre23"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">queue, priority_queue</span></span></tt></span></span></tt></code> Operations in Addition to <a href="094-9.6._container_adaptors.html#filepos2427490">Table 9.17</a></span></p><div class="calibre12">&#160;</div>
<div class="calibre52"><img alt="Image" src="images/00067.jpg" class="calibre9"/></div><div class="calibre22">&#160;</div>
<p class="calibre25">The library <code class="calibre23"><tt class="calibre23"><span class="calibre24">queue</span></tt></code> uses a first-in, first-out (FIFO) storage and retrieval policy. Objects entering the queue are placed in the back and objects leaving the queue are removed from the front. A restaurant that seats people in the order in which they arrive is an example of a FIFO queue.</p><div class="calibre22">&#160;</div>
<p class="calibre25">A <code class="calibre23"><tt class="calibre23"><span class="calibre24">priority_queue</span></tt></code> lets us establish a priority among the elements held in the queue. Newly added elements are placed ahead of all the elements with a lower priority. A restaurant that seats people according to their reservation time, regardless of when they arrive, is an example of a priority queue. By default, the library uses the <code class="calibre23"><tt class="calibre23"><span class="calibre24">&lt;</span></tt></code> operator on the element type to determine relative priorities. We&#8217;ll learn how to override this default in &#167; <a href="108-11.2._overview_of_the_associative_containers.html#filepos2751456">11.2.2</a> (p. <a href="108-11.2._overview_of_the_associative_containers.html#filepos2751456">425</a>).</p><div class="calibre22">&#160;</div>
<div class="calibre42"><blockquote class="calibre26"><hr class="calibre34"/><blockquote class="calibre13"><p class="calibre43"><span class="calibre5">Exercises Section 9.6</span></p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 9.52:</strong> Use a <code class="calibre23"><tt class="calibre23"><span class="calibre24">stack</span></tt></code> to process parenthesized expressions. When you see an open parenthesis, note that it was seen. When you see a close parenthesis after an open parenthesis, <code class="calibre23"><tt class="calibre23"><span class="calibre24">pop</span></tt></code> elements down to and including the open parenthesis off the <code class="calibre23"><tt class="calibre23"><span class="calibre24">stack</span></tt></code>. <code class="calibre23"><tt class="calibre23"><span class="calibre24">push</span></tt></code> a value onto the <code class="calibre23"><tt class="calibre23"><span class="calibre24">stack</span></tt></code> to indicate that a parenthesized expression was replaced.</p></blockquote><div class="calibre10">&#160;</div>
<hr class="calibre34"/></blockquote></div><div class="calibre3">&#160;</div>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;"><a href="001-contents.html"><img src="images/teamlib.gif" width="62" height="15" border="0" align="absmiddle"  alt="Team LiB"></a></div></td><td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href="093-9.5._additional_string_operations.html"><img src="images/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
<a href="095-chapter_summary.html"><img src="images/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a></div></td></tr></table></body></html>
