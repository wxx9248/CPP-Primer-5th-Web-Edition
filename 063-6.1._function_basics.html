<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>6.1. Function Basics</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" type="text/css" rel="stylesheet"/>
<link href="page_styles.css" type="text/css" rel="stylesheet"/>
</head>
  <body class="calibre">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;"><a href="001-contents.html"><img src="images/teamlib.gif" width="62" height="15" border="0" align="absmiddle"  alt="Team LiB"></a></div></td><td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href="062-chapter_6._functions.html"><img src="images/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
<a href="064-6.2._argument_passing.html"><img src="images/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a></div></td></tr></table><h3 id="filepos1415571" class="calibre29"><span class="bold">6.1. Function Basics</span></h3><div class="calibre12">&#160;</div>
<div class="calibre28"><img alt="Image" src="images/00009.jpg" class="calibre9"/></div>
<p class="calibre14">A <strong class="calibre5"><em class="calibre16"><a id="filepos1415768" href="071-defined_terms.html#filepos1732827">function</a></em></strong> definition typically consists of a <strong class="calibre5"><em class="calibre16"><a id="filepos1415882" href="071-defined_terms.html#filepos1739784">return type</a></em></strong>, a name, a list of zero or more <strong class="calibre5"><em class="calibre16"><a id="filepos1415996" href="071-defined_terms.html#filepos1737934">parameters</a></em></strong>, and a body. The parameters are specified in a comma-separated list enclosed in parentheses. The actions that the function performs are specified in a statement block (&#167; <a href="054-5.1._simple_statements.html#filepos1233029">5.1</a>, p. <a href="054-5.1._simple_statements.html#filepos1233029">173</a>), referred to as the <strong class="calibre5"><em class="calibre16"><a id="filepos1416341" href="071-defined_terms.html#filepos1733027">function body</a></em></strong>.</p><div class="calibre15">&#160;</div>
<p class="calibre25">We execute a function through the <strong class="calibre5">call operator</strong>, which is a pair of parentheses. The call operator takes an expression that is a function or points to a function. Inside the parentheses is a comma-separated list of <strong class="calibre5"><em class="calibre16"><a id="filepos1416722" href="071-defined_terms.html#filepos1729604">arguments</a></em></strong>. The arguments are used to initialize the function&#8217;s parameters. The type of a call expression is the return type of the function.</p><div class="calibre22">&#160;</div>
<h4 class="calibre37"><span class="calibre5">Writing a Function</span></h4><div class="calibre38">&#160;</div>
<p class="calibre14">As an example, we&#8217;ll write a function to determine the factorial of a given number. The factorial of a number <code class="calibre23"><tt class="calibre23"><span class="calibre24">n</span></tt></code> is the product of the numbers from 1 through <code class="calibre23"><tt class="calibre23"><span class="calibre24">n</span></tt></code>. The factorial of 5, for example, is 120.</p><div class="calibre15">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">1 * 2 * 3 * 4 * 5 = 120</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">We might define this function as follows:</p><div class="calibre15">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">// <span><span class="calibre45"><span class="calibre16">factorial of</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">val</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">is</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">val * (val - 1) * (val - 2) <span><span class="calibre45"><span class="calibre16">. . .</span></span></span> * ((val - (val - 1)) * 1)</span></span></tt></span><br class="calibre6"/>int fact(int val)<br class="calibre6"/>{<br class="calibre6"/>&#160;&#160;&#160;&#160;int ret = 1; // <span><span class="calibre45"><span class="calibre16">local variable to hold the result as we calculate it</span></span></span><br class="calibre6"/>&#160;&#160;&#160;&#160;while (val &gt; 1)<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ret *= val--;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">assign</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">ret * val</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">to</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">ret</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">and decrement</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">val</span></span></tt></span><br class="calibre6"/>&#160;&#160;&#160;&#160;return ret;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// <span><tt class="calibre23"><span class="calibre46"><span class="calibre16">return the result</span></span></tt></span><br class="calibre6"/>}</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">Our function is named <code class="calibre23"><tt class="calibre23"><span class="calibre24">fact</span></tt></code>. It takes one <code class="calibre23"><tt class="calibre23"><span class="calibre24">int</span></tt></code> parameter and returns an <code class="calibre23"><tt class="calibre23"><span class="calibre24">int</span></tt></code> value. Inside the <code class="calibre23"><tt class="calibre23"><span class="calibre24">while</span></tt></code> loop, we compute the factorial using the postfix decrement operator (&#167; <a href="043-4.5._increment_and_decrement_operators.html#filepos1087530">4.5</a>, p. <a href="043-4.5._increment_and_decrement_operators.html#filepos1087530">147</a>) to reduce the value of <code class="calibre23"><tt class="calibre23"><span class="calibre24">val</span></tt></code> by 1 on each iteration. The <code class="calibre23"><tt class="calibre23"><span class="calibre24">return</span></tt></code> statement ends execution of <code class="calibre23"><tt class="calibre23"><span class="calibre24">fact</span></tt></code> and returns the value of <code class="calibre23"><tt class="calibre23"><span class="calibre24">ret</span></tt></code>.</p><div class="calibre15">&#160;</div>
<h4 class="calibre37"><span class="calibre5">Calling a Function</span></h4><div class="calibre38">&#160;</div>
<p class="calibre14">To call <code class="calibre23"><tt class="calibre23"><span class="calibre24">fact</span></tt></code>, we must supply an <code class="calibre23"><tt class="calibre23"><span class="calibre24">int</span></tt></code> value. The result of the call is also an <code class="calibre23"><tt class="calibre23"><span class="calibre24">int</span></tt></code>:</p><div class="calibre15">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">int main()<br class="calibre6"/>{<br class="calibre6"/>&#160;&#160;&#160;&#160;int j = fact(5);&#160;&#160;// <span><tt class="calibre23"><span class="calibre46"><span class="calibre16">j</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">equals 120, i.e., the result of</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">fact(5)</span></span></tt></span><br class="calibre6"/>&#160;&#160;&#160;&#160;cout &lt;&lt; "5! is " &lt;&lt; j &lt;&lt; endl;<br class="calibre6"/>&#160;&#160;&#160;&#160;return 0;<br class="calibre6"/>}</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14"><a id="filepos1421437"/>A function call does two things: It initializes the function&#8217;s parameters from the corresponding arguments, and it transfers control to that function. Execution of the <em class="calibre16">calling</em> function is suspended and execution of the <em class="calibre16">called</em> function begins.</p><div class="calibre15">&#160;</div>
<p class="calibre25">Execution of a function begins with the (implicit) definition and initialization of its parameters. Thus, when we call <code class="calibre23"><tt class="calibre23"><span class="calibre24">fact</span></tt></code>, the first thing that happens is that an <code class="calibre23"><tt class="calibre23"><span class="calibre24">int</span></tt></code> variable named <code class="calibre23"><tt class="calibre23"><span class="calibre24">val</span></tt></code> is created. This variable is initialized by the argument in the call to <code class="calibre23"><tt class="calibre23"><span class="calibre24">fact</span></tt></code>, which in this case is <code class="calibre23"><tt class="calibre23"><span class="calibre24">5</span></tt></code>.</p><div class="calibre22">&#160;</div>
<p class="calibre25">Execution of a function ends when a <code class="calibre23"><tt class="calibre23"><span class="calibre24">return</span></tt></code> statement is encountered. Like a function call, the <code class="calibre23"><tt class="calibre23"><span class="calibre24">return</span></tt></code> statement does two things: It returns the value (if any) in the <code class="calibre23"><tt class="calibre23"><span class="calibre24">return</span></tt></code>, and it transfers control out of the <em class="calibre16">called</em> function back to the <em class="calibre16">calling</em> function. The value returned by the function is used to initialize the result of the call expression. Execution continues with whatever remains of the expression in which the call appeared. Thus, our call to <code class="calibre23"><tt class="calibre23"><span class="calibre24">fact</span></tt></code> is equivalent to the following:</p><div class="calibre22">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">int val = 5;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">initialize</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">val</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">from the literal</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">5</span></span></tt></span><br class="calibre6"/>int ret = 1;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">code from the body of</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">fact</span></span></tt></span><br class="calibre6"/>while (val &gt; 1)<br class="calibre6"/>&#160;&#160;&#160;&#160;ret *= val--;<br class="calibre6"/>int j = ret;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">initialize</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">j</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">as a copy of</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">ret</span></span></tt></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<h4 class="calibre37"><span class="calibre5">Parameters and Arguments</span></h4><div class="calibre38">&#160;</div>
<p class="calibre14">Arguments are the initializers for a function&#8217;s parameters. The first argument initializes the first parameter, the second argument initializes the second parameter, and so on. Although we know which argument initializes which parameter, we have no guarantees about the order in which arguments are evaluated (&#167; <a href="039-4.1._fundamentals.html#filepos1019764">4.1.3</a>, p. <a href="039-4.1._fundamentals.html#filepos1019764">137</a>). The compiler is free to evaluate the arguments in whatever order it prefers.</p><div class="calibre15">&#160;</div>
<p class="calibre25">The type of each argument must match the corresponding parameter in the same way that the type of any initializer must match the type of the object it initializes. We must pass exactly the same number of arguments as the function has parameters. Because every call is guaranteed to pass as many arguments as the function has parameters, parameters are always initialized.</p><div class="calibre22">&#160;</div>
<p class="calibre25">Because <code class="calibre23"><tt class="calibre23"><span class="calibre24">fact</span></tt></code> has a single parameter of type <code class="calibre23"><tt class="calibre23"><span class="calibre24">int</span></tt></code>, every time we call it we must supply a single argument that can be converted (&#167; <a href="049-4.11._type_conversions.html#filepos1157818">4.11</a>, p. <a href="049-4.11._type_conversions.html#filepos1157818">159</a>) to <code class="calibre23"><tt class="calibre23"><span class="calibre24">int</span></tt></code>:</p><div class="calibre22">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">fact("hello");&#160;&#160;&#160;&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">error: wrong argument type</span></span></span><br class="calibre6"/>fact();&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">error: too few arguments</span></span></span><br class="calibre6"/>fact(42, 10, 0);&#160;&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">error: too many arguments</span></span></span><br class="calibre6"/>fact(3.14);&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">ok: argument is converted to</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">int</span></span></tt></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">The first call fails because there is no conversion from <code class="calibre23"><tt class="calibre23"><span class="calibre24">const char*</span></tt></code> to <code class="calibre23"><tt class="calibre23"><span class="calibre24">int</span></tt></code>. The second and third calls pass the wrong number of arguments. The <code class="calibre23"><tt class="calibre23"><span class="calibre24">fact</span></tt></code> function must be called with one argument; it is an error to call it with any other number. The last call is legal because there is a conversion from <code class="calibre23"><tt class="calibre23"><span class="calibre24">double</span></tt></code> to <code class="calibre23"><tt class="calibre23"><span class="calibre24">int</span></tt></code>. In this call, the argument is implicitly converted to <code class="calibre23"><tt class="calibre23"><span class="calibre24">int</span></tt></code> (through truncation). After the conversion, this call is equivalent to</p><div class="calibre15">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">fact(3);</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<h4 class="calibre37"><span class="calibre5"><a id="filepos1428102"/>Function Parameter List</span></h4><div class="calibre38">&#160;</div>
<p class="calibre14">A function&#8217;s parameter list can be empty but cannot be omitted. Typically we define a function with no parameters by writing an empty parameter list. For compatibility with C, we also can use the keyword <code class="calibre23"><tt class="calibre23"><span class="calibre24">void</span></tt></code> to indicate that there are no parameters:</p><div class="calibre15">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">void f1(){ /* ... */ }&#160;&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">implicit</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">void</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">parameter list</span></span></span><br class="calibre6"/>void f2(void){ /* ... */ } // <span><span class="calibre45"><span class="calibre16">explicit</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">void</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">parameter list</span></span></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre25">A parameter list typically consists of a comma-separated list of parameters, each of which looks like a declaration with a single declarator. Even when the types of two parameters are the same, the type must be repeated:</p><div class="calibre22">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">int f3(int v1, v2) { /* ... */ }&#160;&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">error</span></span></span><br class="calibre6"/>int f4(int v1, int v2) { /* ... */ } // <span><span class="calibre45"><span class="calibre16">ok</span></span></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">No two parameters can have the same name. Moreover, local variables at the outermost scope of the function may not use the same name as any parameter.</p><div class="calibre15">&#160;</div>
<p class="calibre25">Parameter names are optional. However, there is no way to use an unnamed parameter. Therefore, parameters ordinarily have names. Occasionally a function has a parameter that is not used. Such parameters are often left unnamed, to indicate that they aren&#8217;t used. Leaving a parameter unnamed doesn&#8217;t change the number of arguments that a call must supply. A call must supply an argument for every parameter, even if that parameter isn&#8217;t used.</p><div class="calibre22">&#160;</div>
<h4 class="calibre37"><span class="calibre5">Function Return Type</span></h4><div class="calibre38">&#160;</div>
<p class="calibre14">Most types can be used as the return type of a function. In particular, the return type can be <code class="calibre23"><tt class="calibre23"><span class="calibre24">void</span></tt></code>, which means that the function does not return a value. However, the return type may not be an array type (&#167; <a href="034-3.5._arrays.html#filepos853883">3.5</a>, p. <a href="034-3.5._arrays.html#filepos853883">113</a>) or a function type. However, a function may return a pointer to an array or a function. We&#8217;ll see how to define functions that return pointers (or references) to arrays in &#167; <a href="065-6.3._return_types_and_the_return_statement.html#filepos1583824">6.3.3</a> (p. <a href="065-6.3._return_types_and_the_return_statement.html#filepos1583824">228</a>) and how to return pointers to functions in &#167; <a href="069-6.7._pointers_to_functions.html#filepos1702852">6.7</a> (p. <a href="069-6.7._pointers_to_functions.html#filepos1702852">247</a>).</p><div class="calibre15">&#160;</div>
<h4 id="filepos1431793" class="calibre37"><span class="calibre5">6.1.1. Local Objects</span></h4><div class="calibre38">&#160;</div>
<div class="calibre28"><img alt="Image" src="images/00009.jpg" class="calibre9"/></div>
<p class="calibre14">In C++, names have scope (&#167; <a href="022-2.2._variables.html#filepos382972">2.2.4</a>, p. <a href="022-2.2._variables.html#filepos382972">48</a>), and objects have <strong class="calibre5">lifetimes</strong>. It is important to understand both of these concepts.</p><div class="calibre15">&#160;</div>
<blockquote class="calibre26"><p class="calibre27">&#8226; The scope of a name is <em class="calibre16">the part of the program&#8217;s text</em> in which that name is visible.</p></blockquote><div class="calibre15">&#160;</div>
<blockquote class="calibre26"><p class="calibre27">&#8226; The lifetime of an object is <em class="calibre16">the time during the program&#8217;s execution</em> that the object exists.</p></blockquote><div class="calibre15">&#160;</div>
<p class="calibre25">As we&#8217;ve seen, the body of a function is a statement block. As usual, the block forms a new scope in which we can define variables. Parameters and variables defined inside a function body are referred to as <strong class="calibre5"><a id="filepos1432867" href="071-defined_terms.html#filepos1735513">local variables</a></strong>. They are &#8220;local&#8221; to that function and <strong class="calibre5">hide</strong> declarations of the same name made in an outer scope.</p><div class="calibre22">&#160;</div>
<div class="calibre42"><blockquote class="calibre26"><a id="filepos1433118"/><hr class="calibre34"/><blockquote class="calibre13"><p class="calibre43"><span class="calibre5">Exercises Section 6.1</span></p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 6.1:</strong> What is the difference between a parameter and an argument?</p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 6.2:</strong> Indicate which of the following functions are in error and why. Suggest how you might correct the problems.</p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre26"><p class="calibre53"><strong class="calibre5">(a)</strong>
<code class="calibre23"><tt class="calibre23"><span class="calibre24">int f() {<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;string s;<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;// ...<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;return s;<br class="calibre6"/>&#160;}</span></tt></code></p></blockquote><div class="calibre15">&#160;</div>
<blockquote class="calibre26"><p class="calibre53"><strong class="calibre5">(b)</strong>
<code class="calibre23"><tt class="calibre23"><span class="calibre24">f2(int i) { /* ... */ }</span></tt></code></p></blockquote><div class="calibre15">&#160;</div>
<blockquote class="calibre26"><p class="calibre53"><strong class="calibre5">(c)</strong>
<code class="calibre23"><tt class="calibre23"><span class="calibre24">int calc(int v1, int v1) /* ... */ }</span></tt></code></p></blockquote><div class="calibre15">&#160;</div>
<blockquote class="calibre26"><p class="calibre53"><strong class="calibre5">(d)</strong>
<code class="calibre23"><tt class="calibre23"><span class="calibre24">double square(double x) return x * x;</span></tt></code></p></blockquote><div class="calibre15">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 6.3:</strong> Write and test your own version of <code class="calibre23"><tt class="calibre23"><span class="calibre24">fact</span></tt></code>.</p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 6.4:</strong> Write a function that interacts with the user, asking for a number and generating the factorial of that number. Call this function from <code class="calibre23"><tt class="calibre23"><span class="calibre24">main</span></tt></code>.</p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 6.5:</strong> Write a function to return the absolute value of its argument.</p></blockquote><div class="calibre10">&#160;</div>
<hr class="calibre34"/></blockquote></div><div class="calibre3">&#160;</div>
<p class="calibre25">Objects defined outside any function exist throughout the program&#8217;s execution. Such objects are created when the program starts and are not destroyed until the program ends. The lifetime of a local variable depends on how it is defined.</p><div class="calibre22">&#160;</div>
<h5 class="calibre39"><span class="calibre5">Automatic Objects</span></h5><div class="calibre38">&#160;</div>
<p class="calibre14">The objects that correspond to ordinary local variables are created when the function&#8217;s control path passes through the variable&#8217;s definition. They are destroyed when control passes through the end of the block in which the variable is defined. Objects that exist only while a block is executing are known as <strong class="calibre5"><a id="filepos1436168" href="071-defined_terms.html#filepos1730408">automatic objects</a></strong>. After execution exits a block, the values of the automatic objects created in that block are undefined.</p><div class="calibre15">&#160;</div>
<p class="calibre25">Parameters are automatic objects. Storage for the parameters is allocated when the function begins. Parameters are defined in the scope of the function body. Hence they are destroyed when the function terminates.</p><div class="calibre22">&#160;</div>
<p class="calibre25">Automatic objects corresponding to the function&#8217;s parameters are initialized by the arguments passed to the function. Automatic objects corresponding to local variables are initialized if their definition contains an initializer. Otherwise, they are default initialized (&#167; <a href="022-2.2._variables.html#filepos350704">2.2.1</a>, p. <a href="022-2.2._variables.html#filepos350704">43</a>), which means that uninitialized local variables of built-in type have undefined values.</p><div class="calibre22">&#160;</div>
<h5 class="calibre39"><span class="calibre5">Local <code class="calibre23"><tt class="calibre23"><span class="calibre49"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">static</span></span></tt></span></span></tt></code> Objects</span></h5><div class="calibre38">&#160;</div>
<p class="calibre14">It can be useful to have a local variable whose lifetime continues across calls to the function. We obtain such objects by defining a local variable as <code class="calibre23"><tt class="calibre23"><span class="calibre24">static</span></tt></code>. Each <strong class="calibre5"><a id="filepos1437640" href="071-defined_terms.html#filepos1735075">local <code class="calibre23"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">static</span></span></tt></span></span></tt></code> object</a></strong> is initialized before the <em class="calibre16">first</em> time execution passes through the <a id="filepos1437917"/>object&#8217;s definition. Local <code class="calibre23"><tt class="calibre23"><span class="calibre24">static</span></tt></code>s are not destroyed when a function ends; they are destroyed when the program terminates.</p><div class="calibre15">&#160;</div>
<p class="calibre25">As a trivial example, here is a function that counts how many times it is called:</p><div class="calibre22">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">size_t count_calls()<br class="calibre6"/>{<br class="calibre6"/>&#160;&#160;&#160;&#160;static size_t ctr = 0;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">value will persist across calls</span></span></span><br class="calibre6"/>&#160;&#160;&#160;&#160;return ++ctr;<br class="calibre6"/>}<br class="calibre6"/>int main()<br class="calibre6"/>{<br class="calibre6"/>&#160;&#160;&#160;&#160;for (size_t i = 0; i != 10; ++i)<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;cout &lt;&lt; count_calls() &lt;&lt; endl;<br class="calibre6"/>&#160;&#160;&#160;&#160;return 0;<br class="calibre6"/>}</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">This program will print the numbers from 1 through 10 inclusive.</p><div class="calibre15">&#160;</div>
<p class="calibre25">Before control flows through the definition of <code class="calibre23"><tt class="calibre23"><span class="calibre24">ctr</span></tt></code> for the first time, <code class="calibre23"><tt class="calibre23"><span class="calibre24">ctr</span></tt></code> is created and given an initial value of <code class="calibre23"><tt class="calibre23"><span class="calibre24">0</span></tt></code>. Each call increments <code class="calibre23"><tt class="calibre23"><span class="calibre24">ctr</span></tt></code> and returns its new value. Whenever <code class="calibre23"><tt class="calibre23"><span class="calibre24">count_calls</span></tt></code> is executed, the variable <code class="calibre23"><tt class="calibre23"><span class="calibre24">ctr</span></tt></code> already exists and has whatever value was in that variable the last time the function exited. Thus, on the second invocation, the value of <code class="calibre23"><tt class="calibre23"><span class="calibre24">ctr</span></tt></code> is <code class="calibre23"><tt class="calibre23"><span class="calibre24">1</span></tt></code>, on the third it is <code class="calibre23"><tt class="calibre23"><span class="calibre24">2</span></tt></code>, and so on.</p><div class="calibre22">&#160;</div>
<p class="calibre25">If a local <code class="calibre23"><tt class="calibre23"><span class="calibre24">static</span></tt></code> has no explicit initializer, it is value initialized (&#167; <a href="032-3.3._library_vector_type.html#filepos744172">3.3.1</a>, p. <a href="032-3.3._library_vector_type.html#filepos744172">98</a>), meaning that local <code class="calibre23"><tt class="calibre23"><span class="calibre24">static</span></tt></code>s of built-in type are initialized to zero.</p><div class="calibre22">&#160;</div>
<div class="calibre42"><blockquote class="calibre26"><hr class="calibre34"/><blockquote class="calibre13"><p class="calibre43"><span class="calibre5">Exercises Section 6.1.1</span></p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 6.6:</strong> Explain the differences between a parameter, a local variable, and a local <code class="calibre23"><tt class="calibre23"><span class="calibre24">static</span></tt></code> variable. Give an example of a function in which each might be useful.</p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 6.7:</strong> Write a function that returns 0 when it is first called and then generates numbers in sequence each time it is called again.</p></blockquote><div class="calibre10">&#160;</div>
<hr class="calibre34"/></blockquote></div><div class="calibre3">&#160;</div>
<h4 id="filepos1441405" class="calibre37"><span class="calibre5">6.1.2. Function Declarations</span></h4><div class="calibre38">&#160;</div>
<div class="calibre28"><img alt="Image" src="images/00009.jpg" class="calibre9"/></div>
<p class="calibre14">Like any other name, the name of a function must be declared before we can use it. As with variables (&#167; <a href="022-2.2._variables.html#filepos368323">2.2.2</a>, p. <a href="022-2.2._variables.html#filepos368323">45</a>), a function may be defined only once but may be declared multiple times. With one exception that we&#8217;ll cover in &#167; <a href="144-15.3._virtual_functions.html#filepos3853256">15.3</a> (p. <a href="144-15.3._virtual_functions.html#filepos3853256">603</a>), we can declare a function that is not defined so long as we never use that function.</p><div class="calibre15">&#160;</div>
<p class="calibre25">A function declaration is just like a function definition except that a declaration has no function body. In a declaration, a semicolon replaces the function body.</p><div class="calibre22">&#160;</div>
<p class="calibre25">Because a function declaration has no body, there is no need for parameter names. Hence, parameter names are often omitted in a declaration. Although parameter names are not required, they can be used to help users of the function understand what the function does:</p><div class="calibre22">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"><a id="filepos1442681"/></span></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">// <span><span class="calibre45"><span class="calibre16">parameter names chosen to indicate that the iterators denote a range of values to print</span></span></span><br class="calibre6"/>void print(vector&lt;int&gt;::const_iterator beg,<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;vector&lt;int&gt;::const_iterator end);</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">These three elements&#8212;the return type, function name, and parameter types&#8212;describe the function&#8217;s interface. They specify all the information we need to call the function. Function declarations are also known as the <strong class="calibre5"><a id="filepos1443530" href="071-defined_terms.html#filepos1733590">function prototype</a></strong>.</p><div class="calibre15">&#160;</div>
<h5 class="calibre39"><span class="calibre5">Function Declarations Go in Header Files</span></h5><div class="calibre38">&#160;</div>
<p class="calibre14">Recall that variables are declared in header files (&#167; <a href="026-2.6._defining_our_own_data_structures.html#filepos600691">2.6.3</a>, p. <a href="026-2.6._defining_our_own_data_structures.html#filepos600691">76</a>) and defined in source files. For the same reasons, functions should be declared in header files and defined in source files.</p><div class="calibre15">&#160;</div>
<p class="calibre25">It may be tempting&#8212;and would be legal&#8212;to put a function declaration directly in each source file that uses the function. However, doing so is tedious and error-prone. When we use header files for our function declarations, we can ensure that all the declarations for a given function agree. Moreover, if the interface to the function changes, only one declaration has to be changed.</p><div class="calibre22">&#160;</div>
<p class="calibre25">The source file that defines a function should include the header that contains that function&#8217;s declaration. That way the compiler will verify that the definition and declaration are consistent.</p><div class="calibre22">&#160;</div>
<div class="calibre33"><blockquote class="calibre26"><hr class="calibre34"/><p class="calibre14"><span class="calibre5"><a/><img alt="Image" src="images/00017.jpg" class="calibre9"/> Best Practices</span></p><div class="calibre15">&#160;</div>
<blockquote class="calibre13"><p class="calibre14">The header that <em class="calibre16">declares</em> a function should be included in the source file that <em class="calibre16">defines</em> that function.</p></blockquote><div class="calibre22">&#160;</div>
<hr class="calibre34"/></blockquote></div><div class="calibre3">&#160;</div>
<div class="calibre42"><blockquote class="calibre26"><hr class="calibre34"/><blockquote class="calibre13"><p class="calibre43"><span class="calibre5">Exercises Section 6.1.2</span></p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 6.8:</strong> Write a header file named <code class="calibre23"><tt class="calibre23"><span class="calibre24">Chapter6.h</span></tt></code> that contains declarations for the functions you wrote for the exercises in &#167; <a href="063-6.1._function_basics.html#filepos1415571">6.1</a> (p. <a href="063-6.1._function_basics.html#filepos1415571">205</a>).</p></blockquote><div class="calibre10">&#160;</div>
<hr class="calibre34"/></blockquote></div><div class="calibre3">&#160;</div>
<h4 id="filepos1445824" class="calibre37"><span class="calibre5">6.1.3. Separate Compilation</span></h4><div class="calibre38">&#160;</div>
<div class="calibre28"><img alt="Image" src="images/00009.jpg" class="calibre9"/></div>
<p class="calibre14">As our programs get more complicated, we&#8217;ll want to store the various parts of the program in separate files. For example, we might store the functions we wrote for the exercises in &#167; <a href="063-6.1._function_basics.html#filepos1415571">6.1</a> (p. <a href="063-6.1._function_basics.html#filepos1415571">205</a>) in one file and store code that uses these functions in other source files. To allow programs to be written in logical parts, C++ supports what is commonly known as <strong class="calibre5"><em class="calibre16"><a id="filepos1446454" href="071-defined_terms.html#filepos1740052">separate compilation</a></em></strong>. Separate compilation lets us split our programs into several files, each of which can be compiled independently.</p><div class="calibre15">&#160;</div>
<h5 class="calibre39"><span class="calibre5">Compiling and Linking Multiple Source Files</span></h5><div class="calibre38">&#160;</div>
<p class="calibre14">As an example, assume that the definition of our <code class="calibre23"><tt class="calibre23"><span class="calibre24">fact</span></tt></code> function is in a file named <code class="calibre23"><tt class="calibre23"><span class="calibre24">fact.cc</span></tt></code> and its declaration is in a header file named <code class="calibre23"><tt class="calibre23"><span class="calibre24">Chapter6.h</span></tt></code>. Our <code class="calibre23"><tt class="calibre23"><span class="calibre24">fact.cc</span></tt></code> file, like any file that uses these functions, will include the <code class="calibre23"><tt class="calibre23"><span class="calibre24">Chapter6.h</span></tt></code> header. We&#8217;ll store a <code class="calibre23"><tt class="calibre23"><span class="calibre24">main</span></tt></code> function that calls <code class="calibre23"><tt class="calibre23"><span class="calibre24">fact</span></tt></code> in a second file named <code class="calibre23"><tt class="calibre23"><span class="calibre24">factMain.cc</span></tt></code>. <a id="filepos1447651"/>To produce an <strong class="calibre5"><em class="calibre16"><a id="filepos1447685" href="071-defined_terms.html#filepos1732558">executable file</a></em></strong>, we must tell the compiler where to find all of the code we use. We might compile these files as follows:</p><div class="calibre15">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">$ CC factMain.cc fact.cc&#160;&#160;&#160;# generates factMain.exe or a.out<br class="calibre6"/>$ CC factMain.cc fact.cc -o main # generates main or main.exe</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">Here <code class="calibre23"><tt class="calibre23"><span class="calibre24">CC</span></tt></code> is the name of our compiler, <code class="calibre23"><tt class="calibre23"><span class="calibre24">$</span></tt></code> is our system prompt, and <code class="calibre23"><tt class="calibre23"><span class="calibre24">#</span></tt></code> begins a command-line comment. We can now run the executable file, which will run our <code class="calibre23"><tt class="calibre23"><span class="calibre24">main</span></tt></code> function.</p><div class="calibre15">&#160;</div>
<p class="calibre25">If we have changed only one of our source files, we&#8217;d like to recompile only the file that actually changed. Most compilers provide a way to separately compile each file. This process usually yields a file with the <code class="calibre23"><tt class="calibre23"><span class="calibre24">.obj</span></tt></code> (Windows) or <code class="calibre23"><tt class="calibre23"><span class="calibre24">.o</span></tt></code> (UNIX) file extension, indicating that the file contains <strong class="calibre5"><em class="calibre16"><a id="filepos1449278" href="071-defined_terms.html#filepos1736035">object code</a></em></strong>.</p><div class="calibre22">&#160;</div>
<p class="calibre25">The compiler lets us <strong class="calibre5"><em class="calibre16"><a id="filepos1449446" href="071-defined_terms.html#filepos1734813">link</a></em></strong> object files together to form an executable. On the system we use, we would separately compile our program as follows:</p><div class="calibre22">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">$ CC -c factMain.cc&#160;&#160;&#160;&#160;&#160;# generates factMain.o<br class="calibre6"/>$ CC -c fact.cc&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;# generates fact.o<br class="calibre6"/>$ CC factMain.o fact.o&#160;&#160;# generates factMain.exe or a.out<br class="calibre6"/>$ CC factMain.o fact.o -o main # generates main or main.exe</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">You&#8217;ll need to check with your compiler&#8217;s user&#8217;s guide to understand how to compile and execute programs made up of multiple source files.</p><div class="calibre15">&#160;</div>
<div class="calibre42"><blockquote class="calibre26"><hr class="calibre34"/><blockquote class="calibre13"><p class="calibre43"><span class="calibre5">Exercises Section 6.1.3</span></p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 6.9:</strong> Write your own versions of the <code class="calibre23"><tt class="calibre23"><span class="calibre24">fact.cc</span></tt></code> and <code class="calibre23"><tt class="calibre23"><span class="calibre24">factMain.cc</span></tt></code> files. These files should include your <code class="calibre23"><tt class="calibre23"><span class="calibre24">Chapter6.h</span></tt></code> from the exercises in the previous section. Use these files to understand how your compiler supports separate compilation.</p></blockquote><div class="calibre10">&#160;</div>
<hr class="calibre34"/></blockquote></div><div class="calibre3">&#160;</div>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;"><a href="001-contents.html"><img src="images/teamlib.gif" width="62" height="15" border="0" align="absmiddle"  alt="Team LiB"></a></div></td><td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href="062-chapter_6._functions.html"><img src="images/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
<a href="064-6.2._argument_passing.html"><img src="images/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a></div></td></tr></table></body></html>
