<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>9.5. Additional string Operations</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" type="text/css" rel="stylesheet"/>
<link href="page_styles.css" type="text/css" rel="stylesheet"/>
</head>
  <body class="calibre">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;"><a href="001-contents.html"><img src="images/teamlib.gif" width="62" height="15" border="0" align="absmiddle"  alt="Team LiB"></a></div></td><td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href="092-9.4._how_a_vector_grows.html"><img src="images/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
<a href="094-9.6._container_adaptors.html"><img src="images/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a></div></td></tr></table><h3 id="filepos2373261" class="calibre29"><span class="bold"><a id="filepos2373294" class="calibre2"/>9.5. Additional <code class="calibre54"><tt class="calibre54"><span class="calibre55"><span class="calibre2"><tt class="calibre54"><span class="calibre56"><span class="bold">string</span></span></tt></span></span></tt></code> Operations</span></h3><div class="calibre12">&#160;</div>
<p class="calibre14">The <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> type provides a number of additional operations beyond those common to the sequential containers. For the most part, these additional operations either support the close interaction between the <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> class and C-style character arrays, or they add versions that let us use indices in place of iterators.</p><div class="calibre15">&#160;</div>
<p class="calibre25">The <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> library defines a great number of functions. Fortunately, these functions use repeated patterns. Given the number of functions supported, this section can be mind-numbing on first reading; so readers might want to skim it. Once you know what kinds of operations are available, you can return for the details when you need to use a particular operation.</p><div class="calibre22">&#160;</div>
<h4 id="filepos2374493" class="calibre37"><span class="calibre5">9.5.1. Other Ways to Construct <code class="calibre23"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">string</span></span></tt></span></span></tt></code>s</span></h4><div class="calibre38">&#160;</div>
<div class="calibre28"><img alt="Image" src="images/00010.jpg" class="calibre9"/></div>
<p class="calibre14">In addition to the constructors we covered in &#167; <a href="031-3.2._library_string_type.html#filepos651083">3.2.1</a> (p. <a href="031-3.2._library_string_type.html#filepos651083">84</a>) and to the constructors that <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> shares with the other sequential containers (<a href="090-9.2._container_library_overview.html#filepos2189318">Tables 9.3</a> (p. <a href="090-9.2._container_library_overview.html#filepos2189318">335</a>)) the <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> type supports three more constructors that are described in <a href="093-9.5._additional_string_operations.html#filepos2375409">Table 9.11</a>.</p><div class="calibre15">&#160;</div>
<p class="calibre51"><span class="calibre5"><a id="filepos2375409"/>Table 9.11. Additional Ways to Construct <code class="calibre23"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">string</span></span></tt></span></span></tt></code>s</span></p><div class="calibre12">&#160;</div>
<div class="calibre52"><img alt="Image" src="images/00059.jpg" class="calibre9"/></div><div class="calibre22">&#160;</div>
<p class="calibre25">The constructors that take a <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> or a <code class="calibre23"><tt class="calibre23"><span class="calibre24">const char*</span></tt></code> take additional (optional) arguments that let us specify how many characters to copy. When we pass a <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>, we can also specify the index of where to start the copy:</p><div class="calibre22">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">const char *cp = "Hello World!!!"; // <span><span class="calibre45"><span class="calibre16">null-terminated array</span></span></span><br class="calibre6"/>char noNull[] = {'H', 'i'};&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">not null terminated</span></span></span><br class="calibre6"/>string s1(cp);&#160;&#160;// <span><span class="calibre45"><span class="calibre16">copy up to the null in</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">cp; s1 == "Hello World!!!"</span></span></tt></span><br class="calibre6"/>string s2(noNull,2); // <span><span class="calibre45"><span class="calibre16">copy two characters from</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">no_null</span></span></tt></span><span><span class="calibre45"><span class="calibre16">;</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s2 == "Hi"</span></span></tt></span><br class="calibre6"/>string s3(noNull);&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">undefined:</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">noNull</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">not null terminated</span></span></span><br class="calibre6"/>string s4(cp + 6, 5);// <span><span class="calibre45"><span class="calibre16">copy 5 characters starting at</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">cp[6]</span></span></tt></span><span><span class="calibre45"><span class="calibre16">;</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s4 == "World"</span></span></tt></span><br class="calibre6"/>string s5(s1, 6, 5); // <span><span class="calibre45"><span class="calibre16">copy 5 characters starting at</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s1[6]</span></span></tt></span><span><span class="calibre45"><span class="calibre16">;</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s5 == "World"</span></span></tt></span><br class="calibre6"/>string s6(s1, 6);&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">copy from</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s1 [6]</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">to end of</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s1</span></span></tt></span><span><span class="calibre45"><span class="calibre16">;</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s6 == "World!!!"</span></span></tt></span><br class="calibre6"/>string s7(s1,6,20);&#160;&#160;// <span><span class="calibre45"><span class="calibre16">ok, copies only to end of</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s1</span></span></tt></span><span><span class="calibre45"><span class="calibre16">;</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s7 == "World!!!"</span></span></tt></span><br class="calibre6"/>string s8(s1, 16);&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">throws an</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">out_of_range</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">exception</span></span></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre25">Ordinarily when we create a <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> from a <code class="calibre23"><tt class="calibre23"><span class="calibre24">const char*</span></tt></code>, the array to which the pointer points must be null terminated; characters are copied up to the null. If <a id="filepos2379693"/>we also pass a count, the array does not have to be null terminated. If we do not pass a count and there is no null, or if the given count is greater than the size of the array, the operation is undefined.</p><div class="calibre22">&#160;</div>
<p class="calibre25">When we copy from a <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>, we can supply an optional starting position and a count. The starting position must be less than or equal to the size of the given <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>. If the position is greater than the size, then the constructor throws an <code class="calibre23"><tt class="calibre23"><span class="calibre24">out_of_range</span></tt></code> exception (&#167; <a href="059-5.6._try_blocks_and_exception_handling.html#filepos1368051">5.6</a>, p. <a href="059-5.6._try_blocks_and_exception_handling.html#filepos1368051">193</a>). When we pass a count, that many characters are copied, starting from the given position. Regardless of how many characters we ask for, the library copies up to the size of the <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>, but not more.</p><div class="calibre22">&#160;</div>
<h5 class="calibre39"><span class="calibre5">The <code class="calibre23"><tt class="calibre23"><span class="calibre49"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">substr</span></span></tt></span></span></tt></code> Operation</span></h5><div class="calibre38">&#160;</div>
<p class="calibre14">The <code class="calibre23"><tt class="calibre23"><span class="calibre24">substr</span></tt></code> operation (described in <a href="093-9.5._additional_string_operations.html#filepos2382541">Table 9.12</a>) returns a <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> that is a copy of part or all of the original <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>. We can pass <code class="calibre23"><tt class="calibre23"><span class="calibre24">substr</span></tt></code> an optional starting position and count:</p><div class="calibre15">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">string s("hello world");<br class="calibre6"/>string s2 = s.substr(0, 5);&#160;&#160;// <span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s2 = hello</span></span></tt></span><br class="calibre6"/>string s3 = s.substr(6);&#160;&#160;&#160;&#160;&#160;// <span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s3 = world</span></span></tt></span><br class="calibre6"/>string s4 = s.substr(6, 11); // <span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s3 = world</span></span></tt></span><br class="calibre6"/>string s5 = s.substr(12);&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">throws an</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">out_of_range</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">exception</span></span></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre51"><span class="calibre5"><a id="filepos2382541"/>Table 9.12. Substring Operation</span></p><div class="calibre12">&#160;</div>
<div class="calibre52"><img alt="Image" src="images/00060.jpg" class="calibre9"/></div><div class="calibre22">&#160;</div>
<p class="calibre14">The <code class="calibre23"><tt class="calibre23"><span class="calibre24">substr</span></tt></code> function throws an <code class="calibre23"><tt class="calibre23"><span class="calibre24">out_of_range</span></tt></code> exception (&#167; <a href="059-5.6._try_blocks_and_exception_handling.html#filepos1368051">5.6</a>, p. <a href="059-5.6._try_blocks_and_exception_handling.html#filepos1368051">193</a>) if the position exceeds the size of the <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>. If the position plus the count is greater than the size, the count is adjusted to copy only up to the end of the <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>.</p><div class="calibre15">&#160;</div>
<div class="calibre42"><blockquote class="calibre26"><hr class="calibre34"/><blockquote class="calibre13"><p class="calibre43"><span class="calibre5">Exercises Section 9.5.1</span></p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 9.41:</strong> Write a program that initializes a <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> from a <code class="calibre23"><tt class="calibre23"><span class="calibre24">vector&lt;char&gt;</span></tt></code>.</p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 9.42:</strong> Given that you want to read a character at a time into a <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>, and you know that you need to read at least 100 characters, how might you improve the performance of your program?</p></blockquote><div class="calibre10">&#160;</div>
<hr class="calibre34"/></blockquote></div><div class="calibre3">&#160;</div>
<h4 id="filepos2384210" class="calibre37"><span class="calibre5">9.5.2. Other Ways to Change a <code class="calibre23"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">string</span></span></tt></span></span></tt></code></span></h4><div class="calibre38">&#160;</div>
<div class="calibre28"><img alt="Image" src="images/00010.jpg" class="calibre9"/></div>
<p class="calibre14">The <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> type supports the sequential container assignment operators and the <code class="calibre23"><tt class="calibre23"><span class="calibre24">assign</span></tt></code>, <code class="calibre23"><tt class="calibre23"><span class="calibre24">insert</span></tt></code>, and <code class="calibre23"><tt class="calibre23"><span class="calibre24">erase</span></tt></code> operations (&#167; <a href="090-9.2._container_library_overview.html#filepos2239281">9.2.5</a>, p. <a href="090-9.2._container_library_overview.html#filepos2239281">337</a>, &#167; <a href="091-9.3._sequential_container_operations.html#filepos2264356">9.3.1</a>, p. <a href="091-9.3._sequential_container_operations.html#filepos2264356">342</a>, and &#167; <a href="091-9.3._sequential_container_operations.html#filepos2306887">9.3.3</a>, p. <a href="091-9.3._sequential_container_operations.html#filepos2306887">348</a>). It also defines additional versions of <code class="calibre23"><tt class="calibre23"><span class="calibre24">insert</span></tt></code> and <code class="calibre23"><tt class="calibre23"><span class="calibre24">erase</span></tt></code>.</p><div class="calibre15">&#160;</div>
<p class="calibre25"><a id="filepos2385392"/>In addition to the versions of <code class="calibre23"><tt class="calibre23"><span class="calibre24">insert</span></tt></code> and <code class="calibre23"><tt class="calibre23"><span class="calibre24">erase</span></tt></code> that take iterators, <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> provides versions that take an index. The index indicates the starting element to <code class="calibre23"><tt class="calibre23"><span class="calibre24">erase</span></tt></code> or the position before which to <code class="calibre23"><tt class="calibre23"><span class="calibre24">insert</span></tt></code> the given values:</p><div class="calibre22">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">s.insert(s.size(), 5, '!'); // <span><span class="calibre45"><span class="calibre16">insert five exclamation points at the end of</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s</span></span></tt></span><br class="calibre6"/>s.erase(s.size() - 5, 5);&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">erase the last five characters from</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s</span></span></tt></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre25">The <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> library also provides versions of <code class="calibre23"><tt class="calibre23"><span class="calibre24">insert</span></tt></code> and <code class="calibre23"><tt class="calibre23"><span class="calibre24">assign</span></tt></code> that take C-style character arrays. For example, we can use a null-terminated character array as the value to <code class="calibre23"><tt class="calibre23"><span class="calibre24">insert</span></tt></code> or <code class="calibre23"><tt class="calibre23"><span class="calibre24">assign</span></tt></code> into a <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>:</p><div class="calibre22">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">const char *cp = "Stately, plump Buck";<br class="calibre6"/>s.assign(cp, 7);&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;//&#160;&#160;<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s == "Stately"</span></span></tt></span><br class="calibre6"/>s.insert(s.size(), cp + 7); //&#160;&#160;<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s == "Stately, plump Buck"</span></span></tt></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">Here we first replace the contents of <code class="calibre23"><tt class="calibre23"><span class="calibre24">s</span></tt></code> by calling <code class="calibre23"><tt class="calibre23"><span class="calibre24">assign</span></tt></code>. The characters we assign into <code class="calibre23"><tt class="calibre23"><span class="calibre24">s</span></tt></code> are the seven characters starting with the one pointed to by <code class="calibre23"><tt class="calibre23"><span class="calibre24">cp</span></tt></code>. The number of characters we request must be less than or equal to the number of characters (excluding the null terminator) in the array to which <code class="calibre23"><tt class="calibre23"><span class="calibre24">cp</span></tt></code> points.</p><div class="calibre15">&#160;</div>
<p class="calibre25">When we call <code class="calibre23"><tt class="calibre23"><span class="calibre24">insert</span></tt></code> on <code class="calibre23"><tt class="calibre23"><span class="calibre24">s</span></tt></code>, we say that we want to insert the characters before the (nonexistent) element at <code class="calibre23"><tt class="calibre23"><span class="calibre24">s[size()]</span></tt></code>. In this case, we copy characters starting seven characters past <code class="calibre23"><tt class="calibre23"><span class="calibre24">cp</span></tt></code> up to the terminating null.</p><div class="calibre22">&#160;</div>
<p class="calibre25">We can also specify the characters to <code class="calibre23"><tt class="calibre23"><span class="calibre24">insert</span></tt></code> or <code class="calibre23"><tt class="calibre23"><span class="calibre24">assign</span></tt></code> as coming from another <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> or substring thereof:</p><div class="calibre22">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">string s = "some string", s2 = "some other string";<br class="calibre6"/>s.insert(0, s2); // <span><span class="calibre45"><span class="calibre16">insert a copy of</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s2</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">before position 0 in</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s</span></span></tt></span><br class="calibre6"/>// <span><span class="calibre45"><span class="calibre16">insert</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s2.size(</span></span></tt></span>) <span><span class="calibre45"><span class="calibre16">characters from</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s2</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">starting at</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s2[0]</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">before</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s[0]</span></span></tt></span><br class="calibre6"/>s.insert(0, s2, 0, s2.size());</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<h5 class="calibre39"><span class="calibre5">The <code class="calibre23"><tt class="calibre23"><span class="calibre49"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">append</span></span></tt></span></span></tt></code> and <code class="calibre23"><tt class="calibre23"><span class="calibre49"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">replace</span></span></tt></span></span></tt></code> Functions</span></h5><div class="calibre38">&#160;</div>
<p class="calibre14">The <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> class defines two additional members, <code class="calibre23"><tt class="calibre23"><span class="calibre24">append</span></tt></code> and <code class="calibre23"><tt class="calibre23"><span class="calibre24">replace</span></tt></code>, that can change the contents of a <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>. <a href="093-9.5._additional_string_operations.html#filepos2393101">Table 9.13</a> summarizes these functions. The <code class="calibre23"><tt class="calibre23"><span class="calibre24">append</span></tt></code> operation is a shorthand way of inserting at the end:</p><div class="calibre15">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">string s("C++ Primer"), s2 = s; // <span><span class="calibre45"><span class="calibre16">initialize</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">and</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s2</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">to</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">"C++ Primer"</span></span></tt></span><br class="calibre6"/>s.insert(s.size(), " 4th Ed."); // <span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s == "C++ Primer 4th Ed."</span></span></tt></span><br class="calibre6"/>s2.append(" 4th Ed."); // <span><span class="calibre45"><span class="calibre16">equivalent: appends</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">" 4th Ed."</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">to</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s2; s == s2</span></span></tt></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre51"><span class="calibre5"><a id="filepos2393101"/>Table 9.13. Operations to Modify <code class="calibre23"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">string</span></span></tt></span></span></tt></code>s</span></p><div class="calibre12">&#160;</div>
<div class="calibre52"><img alt="Image" src="images/00061.jpg" class="calibre9"/></div><div class="calibre22">&#160;</div>
<p class="calibre14">The <code class="calibre23"><tt class="calibre23"><span class="calibre24">replace</span></tt></code> operations are a shorthand way of calling <code class="calibre23"><tt class="calibre23"><span class="calibre24">erase</span></tt></code> and <code class="calibre23"><tt class="calibre23"><span class="calibre24">insert</span></tt></code>:</p><div class="calibre15">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">// <span><span class="calibre45"><span class="calibre16">equivalent way to replace</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">"4th"</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">by</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">"5th"</span></span></tt></span><br class="calibre6"/>s.erase(11, 3);&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// <span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s == "C++ Primer Ed."</span></span></tt></span><br class="calibre6"/>s.insert(11, "5th");&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// <span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s == "C++ Primer 5th Ed."</span></span></tt></span><br class="calibre6"/>// <span><span class="calibre45"><span class="calibre16">starting at position 11, erase three characters and then insert</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">"5th"</span></span></tt></span><br class="calibre6"/>s2.replace(11, 3, "5th"); // <span><span class="calibre45"><span class="calibre16">equivalent:</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s == s2</span></span></tt></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">In the call to <code class="calibre23"><tt class="calibre23"><span class="calibre24">replace</span></tt></code>, the text we inserted happens to be the same size as the text we removed. We can insert a larger or smaller <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>:</p><div class="calibre15">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">s.replace(11, 3, "Fifth");&#160;&#160;&#160;&#160;&#160;&#160;// <span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s == "C++ Primer Fifth Ed."</span></span></tt></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">In this call we remove three characters but insert five in their place.</p><div class="calibre15">&#160;</div>
<h5 class="calibre39"><span class="calibre5"><a/>The Many Overloaded Ways to Change a <code class="calibre23"><tt class="calibre23"><span class="calibre49"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">string</span></span></tt></span></span></tt></code></span></h5><div class="calibre38">&#160;</div>
<p class="calibre14">The <code class="calibre23"><tt class="calibre23"><span class="calibre24">append</span></tt></code>, <code class="calibre23"><tt class="calibre23"><span class="calibre24">assign</span></tt></code>, <code class="calibre23"><tt class="calibre23"><span class="calibre24">insert</span></tt></code>, and <code class="calibre23"><tt class="calibre23"><span class="calibre24">replace</span></tt></code> functions listed <a href="093-9.5._additional_string_operations.html#filepos2393101">Table 9.13</a> have several overloaded versions. The arguments to these functions vary as to how we specify what characters to add and what part of the <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> to change. Fortunately, these functions share a common interface.</p><div class="calibre15">&#160;</div>
<p class="calibre25">The <code class="calibre23"><tt class="calibre23"><span class="calibre24">assign</span></tt></code> and <code class="calibre23"><tt class="calibre23"><span class="calibre24">append</span></tt></code> functions have no need to specify what part of the <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> is changed: <code class="calibre23"><tt class="calibre23"><span class="calibre24">assign</span></tt></code> always replaces the entire contents of the <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> and <code class="calibre23"><tt class="calibre23"><span class="calibre24">append</span></tt></code> always adds to the end of the <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>.</p><div class="calibre22">&#160;</div>
<p class="calibre25">The <code class="calibre23"><tt class="calibre23"><span class="calibre24">replace</span></tt></code> functions provide two ways to specify the range of characters to remove. We can specify that range by a position and a length, or with an iterator <a id="filepos2397925"/>range. The <code class="calibre23"><tt class="calibre23"><span class="calibre24">insert</span></tt></code> functions give us two ways to specify the insertion point: with either an index or an iterator. In each case, the new element(s) are inserted in front of the given index or iterator.</p><div class="calibre22">&#160;</div>
<p class="calibre25">There are several ways to specify the characters to add to the <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>. The new characters can be taken from another <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>, from a character pointer, from a brace-enclosed list of characters, or as a character and a count. When the characters come from a <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> or a character pointer, we can pass additional arguments to control whether we copy some or all of the characters from the argument.</p><div class="calibre22">&#160;</div>
<p class="calibre25">Not every function supports every version of these arguments. For example, there is no version of <code class="calibre23"><tt class="calibre23"><span class="calibre24">insert</span></tt></code> that takes an index and an initializer list. Similarly, if we want to specify the insertion point using an iterator, then we cannot pass a character pointer as the source for the new characters.</p><div class="calibre22">&#160;</div>
<div class="calibre42"><blockquote class="calibre26"><hr class="calibre34"/><blockquote class="calibre13"><p class="calibre43"><span class="calibre5">Exercises Section 9.5.2</span></p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 9.43:</strong> Write a function that takes three <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>s, <code class="calibre23"><tt class="calibre23"><span class="calibre24">s</span></tt></code>, <code class="calibre23"><tt class="calibre23"><span class="calibre24">oldVal</span></tt></code>, and <code class="calibre23"><tt class="calibre23"><span class="calibre24">newVal</span></tt></code>. Using iterators, and the <code class="calibre23"><tt class="calibre23"><span class="calibre24">insert</span></tt></code> and <code class="calibre23"><tt class="calibre23"><span class="calibre24">erase</span></tt></code> functions replace all instances of <code class="calibre23"><tt class="calibre23"><span class="calibre24">oldVal</span></tt></code> that appear in <code class="calibre23"><tt class="calibre23"><span class="calibre24">s</span></tt></code> by <code class="calibre23"><tt class="calibre23"><span class="calibre24">newVal</span></tt></code>. Test your function by using it to replace common abbreviations, such as &#8220;tho&#8221; by &#8220;though&#8221; and &#8220;thru&#8221; by &#8220;through&#8221;.</p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 9.44:</strong> Rewrite the previous function using an index and <code class="calibre23"><tt class="calibre23"><span class="calibre24">replace</span></tt></code>.</p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 9.45:</strong> Write a funtion that takes a <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> representing a name and two other <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>s representing a prefix, such as &#8220;Mr.&#8221; or &#8220;Ms.&#8221; and a suffix, such as &#8220;Jr.&#8221; or &#8220;III&#8221;. Using iterators and the <code class="calibre23"><tt class="calibre23"><span class="calibre24">insert</span></tt></code> and <code class="calibre23"><tt class="calibre23"><span class="calibre24">append</span></tt></code> functions, generate and return a new <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> with the suffix and prefix added to the given name.</p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 9.46:</strong> Rewrite the previous exercise using a position and length to manage the <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>s. This time use only the <code class="calibre23"><tt class="calibre23"><span class="calibre24">insert</span></tt></code> function.</p></blockquote><div class="calibre10">&#160;</div>
<hr class="calibre34"/></blockquote></div><div class="calibre3">&#160;</div>
<h4 id="filepos2401949" class="calibre37"><span class="calibre5">9.5.3. <code class="calibre23"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">string</span></span></tt></span></span></tt></code> Search Operations</span></h4><div class="calibre38">&#160;</div>
<div class="calibre28"><img alt="Image" src="images/00010.jpg" class="calibre9"/></div>
<p class="calibre14">The <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> class provides six different search functions, each of which has four overloaded versions. <a href="093-9.5._additional_string_operations.html#filepos2403779">Table 9.14</a> describes the search members and their arguments. Each of these search operations returns a <code class="calibre23"><tt class="calibre23"><span class="calibre24">string::size_type</span></tt></code> value that is the index of where the match occurred. If there is no match, the function returns a <code class="calibre23"><tt class="calibre23"><span class="calibre24">static</span></tt></code> member (&#167; <a href="078-7.6._static_class_members.html#filepos2028441">7.6</a>, p. <a href="078-7.6._static_class_members.html#filepos2028441">300</a>) named <code class="calibre23"><tt class="calibre23"><span class="calibre24">string::npos</span></tt></code>. The library defines <code class="calibre23"><tt class="calibre23"><span class="calibre24">npos</span></tt></code> as a <code class="calibre23"><tt class="calibre23"><span class="calibre24">const string::size_type</span></tt></code> initialized with the value <code class="calibre23"><tt class="calibre23"><span class="calibre24">-1</span></tt></code>. Because <code class="calibre23"><tt class="calibre23"><span class="calibre24">npos</span></tt></code> is an <code class="calibre23"><tt class="calibre23"><span class="calibre24">unsigned</span></tt></code> type, this initializer means <code class="calibre23"><tt class="calibre23"><span class="calibre24">npos</span></tt></code> is equal to the largest possible size any <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> could have (&#167; <a href="021-2.1._primitive_builtin_types.html#filepos304094">2.1.2</a>, p. <a href="021-2.1._primitive_builtin_types.html#filepos304094">35</a>).</p><div class="calibre15">&#160;</div>
<p class="calibre51"><span class="calibre5"><a id="filepos2403779"/>Table 9.14. <code class="calibre23"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">string</span></span></tt></span></span></tt></code> Search Operations</span></p><div class="calibre12">&#160;</div>
<div class="calibre52"><img alt="Image" src="images/00062.jpg" class="calibre9"/></div><div class="calibre22">&#160;</div>
<div class="calibre33"><blockquote class="calibre26"><hr class="calibre34"/><p class="calibre14"><span class="calibre5"><a/><img alt="Image" src="images/00013.jpg" class="calibre9"/> Warning</span></p><div class="calibre15">&#160;</div>
<blockquote class="calibre13"><p class="calibre14">The <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> search functions return <code class="calibre23"><tt class="calibre23"><span class="calibre24">string::size_type</span></tt></code>, which is an <code class="calibre23"><tt class="calibre23"><span class="calibre24">unsigned</span></tt></code> type. As a result, it is a bad idea to use an <code class="calibre23"><tt class="calibre23"><span class="calibre24">int</span></tt></code>, or other signed type, to hold the return from these functions (&#167; <a href="021-2.1._primitive_builtin_types.html#filepos304094">2.1.2</a>, p. <a href="021-2.1._primitive_builtin_types.html#filepos304094">36</a>).</p></blockquote><div class="calibre22">&#160;</div>
<hr class="calibre34"/></blockquote></div><div class="calibre3">&#160;</div>
<p class="calibre14">The <code class="calibre23"><tt class="calibre23"><span class="calibre24">find</span></tt></code> function does the simplest search. It looks for its argument and returns the index of the first match that is found, or <code class="calibre23"><tt class="calibre23"><span class="calibre24">npos</span></tt></code> if there is no match:</p><div class="calibre15">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"><a id="filepos2405307"/></span></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">string name("AnnaBelle");<br class="calibre6"/>auto pos1 = name.find("Anna"); // <span><tt class="calibre23"><span class="calibre46"><span class="calibre16">pos1 == 0</span></span></tt></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">returns <code class="calibre23"><tt class="calibre23"><span class="calibre24">0</span></tt></code>, the index at which the substring <code class="calibre23"><tt class="calibre23"><span class="calibre24">"Anna"</span></tt></code> is found in <code class="calibre23"><tt class="calibre23"><span class="calibre24">"AnnaBelle"</span></tt></code>.</p><div class="calibre15">&#160;</div>
<p class="calibre25">Searching (and other <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> operations) are case sensitive. When we look for a value in the <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>, case matters:</p><div class="calibre22">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">string lowercase("annabelle");<br class="calibre6"/>pos1 = lowercase.find("Anna");&#160;&#160;&#160;// <span><tt class="calibre23"><span class="calibre46"><span class="calibre16">pos1 == npos</span></span></tt></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">This code will set <code class="calibre23"><tt class="calibre23"><span class="calibre24">pos1</span></tt></code> to <code class="calibre23"><tt class="calibre23"><span class="calibre24">npos</span></tt></code> because <code class="calibre23"><tt class="calibre23"><span class="calibre24">Anna</span></tt></code> does not match <code class="calibre23"><tt class="calibre23"><span class="calibre24">anna</span></tt></code>.</p><div class="calibre15">&#160;</div>
<p class="calibre25">A slightly more complicated problem requires finding a match to any character in the search string. For example, the following locates the first digit within <code class="calibre23"><tt class="calibre23"><span class="calibre24">name</span></tt></code>:</p><div class="calibre22">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">string numbers("0123456789"), name("r2d2");<br class="calibre6"/>// <span><span class="calibre45"><span class="calibre16">returns 1, i.e., the index of the first digit in</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">name</span></span></tt></span><br class="calibre6"/>auto pos = name.find_first_of(numbers);</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">Instead of looking for a match, we might call <code class="calibre23"><tt class="calibre23"><span class="calibre24">find_first_not_of</span></tt></code> to find the first position that is <em class="calibre16">not</em> in the search argument. For example, to find the first nonnumeric character of a <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>, we can write</p><div class="calibre15">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">string dept("03714p3");<br class="calibre6"/>// <span><span class="calibre45"><span class="calibre16">returns 5, which is the index to the character</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">'p'</span></span></tt></span><br class="calibre6"/>auto pos = dept.find_first_not_of(numbers);</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<h5 class="calibre39"><span class="calibre5">Specifying Where to Start the Search</span></h5><div class="calibre38">&#160;</div>
<p class="calibre14">We can pass an optional starting position to the <code class="calibre23"><tt class="calibre23"><span class="calibre24">find</span></tt></code> operations. This optional argument indicates the position from which to start the search. By default, that position is set to zero. One common programming pattern uses this optional argument to loop through a <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> finding all occurrences:</p><div class="calibre15">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"><a id="filepos2409605"/></span></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">string::size_type pos = 0;<br class="calibre6"/>// <span><span class="calibre45"><span class="calibre16">each iteration finds the next number in</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">name</span></span></tt></span><br class="calibre6"/>while ((pos = name.find_first_of(numbers, pos))<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;!= string::npos) {<br class="calibre6"/>&#160;&#160;&#160;&#160;cout &lt;&lt; "found number at index: " &lt;&lt; pos<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;&lt; " element is " &lt;&lt; name[pos] &lt;&lt; endl;<br class="calibre6"/>&#160;&#160;&#160;&#160;++pos; // <span><span class="calibre45"><span class="calibre16">move to the next character</span></span></span><br class="calibre6"/>}</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">The condition in the <code class="calibre23"><tt class="calibre23"><span class="calibre24">while</span></tt></code> resets <code class="calibre23"><tt class="calibre23"><span class="calibre24">pos</span></tt></code> to the index of the first number encountered, starting from the current value of <code class="calibre23"><tt class="calibre23"><span class="calibre24">pos</span></tt></code>. So long as <code class="calibre23"><tt class="calibre23"><span class="calibre24">find_first_of</span></tt></code> returns a valid index, we print the current result and increment <code class="calibre23"><tt class="calibre23"><span class="calibre24">pos</span></tt></code>.</p><div class="calibre15">&#160;</div>
<p class="calibre25">Had we neglected to increment <code class="calibre23"><tt class="calibre23"><span class="calibre24">pos</span></tt></code>, the loop would never terminate. To see why, consider what would happen if we didn&#8217;t do the increment. On the second trip through the loop we start looking at the character indexed by <code class="calibre23"><tt class="calibre23"><span class="calibre24">pos</span></tt></code>. That character would be a number, so <code class="calibre23"><tt class="calibre23"><span class="calibre24">find_first_of</span></tt></code> would (repeatedly) returns <code class="calibre23"><tt class="calibre23"><span class="calibre24">pos</span></tt></code>!</p><div class="calibre22">&#160;</div>
<h5 class="calibre39"><span class="calibre5">Searching Backward</span></h5><div class="calibre38">&#160;</div>
<p class="calibre14">The <code class="calibre23"><tt class="calibre23"><span class="calibre24">find</span></tt></code> operations we&#8217;ve used so far execute left to right. The library provides analogous operations that search from right to left. The <code class="calibre23"><tt class="calibre23"><span class="calibre24">rfind</span></tt></code> member searches for the last&#8212;that is, right-most&#8212;occurrence of the indicated substring:</p><div class="calibre15">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">string river("Mississippi");<br class="calibre6"/>auto first_pos = river.find("is");&#160;&#160;// <span><span class="calibre45"><span class="calibre16">returns 1</span></span></span><br class="calibre6"/>auto last_pos = river.rfind("is");&#160;&#160;// <span><span class="calibre45"><span class="calibre16">returns 4</span></span></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14"><code class="calibre23"><tt class="calibre23"><span class="calibre24">find</span></tt></code> returns an index of 1, indicating the start of the first <code class="calibre23"><tt class="calibre23"><span class="calibre24">"is"</span></tt></code>, while <code class="calibre23"><tt class="calibre23"><span class="calibre24">rfind</span></tt></code> returns an index of 4, indicating the start of the last occurrence of <code class="calibre23"><tt class="calibre23"><span class="calibre24">"is"</span></tt></code>.</p><div class="calibre15">&#160;</div>
<p class="calibre25">Similarly, the <code class="calibre23"><tt class="calibre23"><span class="calibre24">find_last</span></tt></code> functions behave like the <code class="calibre23"><tt class="calibre23"><span class="calibre24">find_first</span></tt></code> functions, except that they return the <em class="calibre16">last</em> match rather than the first:</p><div class="calibre22">&#160;</div>
<blockquote class="calibre26"><p class="calibre27">&#8226; <code class="calibre23"><tt class="calibre23"><span class="calibre24">find_last_of</span></tt></code> searches for the last character that matches any element of the search <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>.</p></blockquote><div class="calibre15">&#160;</div>
<blockquote class="calibre26"><p class="calibre27">&#8226; <code class="calibre23"><tt class="calibre23"><span class="calibre24">find_last_not_of</span></tt></code> searches for the last character that does not match any element of the search <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>.</p></blockquote><div class="calibre15">&#160;</div>
<p class="calibre14">Each of these operations takes an optional second argument indicating the position within the <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> to begin searching.</p><div class="calibre15">&#160;</div>
<h4 id="filepos2414569" class="calibre37"><span class="calibre5">9.5.4. The <code class="calibre23"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">compare</span></span></tt></span></span></tt></code> Functions</span></h4><div class="calibre38">&#160;</div>
<div class="calibre28"><img alt="Image" src="images/00010.jpg" class="calibre9"/></div>
<p class="calibre14">In addition to the relational operators (&#167; <a href="031-3.2._library_string_type.html#filepos659212">3.2.2</a>, p. <a href="031-3.2._library_string_type.html#filepos659212">88</a>), the <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> library provides a set of <code class="calibre23"><tt class="calibre23"><span class="calibre24">compare</span></tt></code> functions that are similar to the C library <code class="calibre23"><tt class="calibre23"><span class="calibre24">strcmp</span></tt></code> function (&#167; <a href="034-3.5._arrays.html#filepos918393">3.5.4</a>, p. <a href="034-3.5._arrays.html#filepos918393">122</a>). Like <code class="calibre23"><tt class="calibre23"><span class="calibre24">strcmp</span></tt></code>, <code class="calibre23"><tt class="calibre23"><span class="calibre24">s.compare</span></tt></code> returns zero or a positive or negative value depending on whether <code class="calibre23"><tt class="calibre23"><span class="calibre24">s</span></tt></code> is equal to, greater than, or less than the string formed from the given arguments.</p><div class="calibre15">&#160;</div>
<div class="calibre42"><blockquote class="calibre26"><a id="filepos2415800"/><hr class="calibre34"/><blockquote class="calibre13"><p class="calibre43"><span class="calibre5">Exercises Section 9.5.3</span></p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 9.47:</strong> Write a program that finds each numeric character and then each alphabetic character in the <code class="calibre23"><tt class="calibre23"><span class="calibre24">string "ab2c3d7R4E6"</span></tt></code>. Write two versions of the program. The first should use <code class="calibre23"><tt class="calibre23"><span class="calibre24">find_first_of</span></tt></code>, and the second <code class="calibre23"><tt class="calibre23"><span class="calibre24">find_first_not_of</span></tt></code>.</p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 9.48:</strong> Given the definitions of <code class="calibre23"><tt class="calibre23"><span class="calibre24">name</span></tt></code> and <code class="calibre23"><tt class="calibre23"><span class="calibre24">numbers</span></tt></code> on page <a href="093-9.5._additional_string_operations.html#filepos2405307">365</a>, what does <code class="calibre23"><tt class="calibre23"><span class="calibre24">numbers.find(name)</span></tt></code> return?</p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 9.49:</strong> A letter has an ascender if, as with <code class="calibre23"><tt class="calibre23"><span class="calibre24">d</span></tt></code> or <code class="calibre23"><tt class="calibre23"><span class="calibre24">f</span></tt></code>, part of the letter extends above the middle of the line. A letter has a descender if, as with <code class="calibre23"><tt class="calibre23"><span class="calibre24">p</span></tt></code> or <code class="calibre23"><tt class="calibre23"><span class="calibre24">g</span></tt></code>, part of the letter extends below the line. Write a program that reads a file containing words and reports the longest word that contains neither ascenders nor descenders.</p></blockquote><div class="calibre10">&#160;</div>
<hr class="calibre34"/></blockquote></div><div class="calibre3">&#160;</div>
<p class="calibre25">As shown in <a href="093-9.5._additional_string_operations.html#filepos2418208">Table 9.15</a>, there are six versions of <code class="calibre23"><tt class="calibre23"><span class="calibre24">compare</span></tt></code>. The arguments vary based on whether we are comparing two <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>s or a <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> and a character array. In both cases, we might compare the entire string or a portion thereof.</p><div class="calibre22">&#160;</div>
<p class="calibre51"><span class="calibre5"><a id="filepos2418208"/>Table 9.15. Possible Arguments to <code class="calibre23"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">s.compare</span></span></tt></span></span></tt></code></span></p><div class="calibre12">&#160;</div>
<div class="calibre52"><img alt="Image" src="images/00063.jpg" class="calibre9"/></div><div class="calibre22">&#160;</div>
<h4 id="filepos2418504" class="calibre37"><span class="calibre5">9.5.5. Numeric Conversions</span></h4><div class="calibre38">&#160;</div>
<div class="calibre28"><img alt="Image" src="images/00009.jpg" class="calibre9"/></div>
<p class="calibre14">Strings often contain characters that represent numbers. For example, we represent the numeric value 15 as a <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> with two characters, the character <code class="calibre23"><tt class="calibre23"><span class="calibre24">'1'</span></tt></code> followed by the character <code class="calibre23"><tt class="calibre23"><span class="calibre24">'5'</span></tt></code>. In general, the character representation of a number differs from its numeric value. The numeric value 15 stored in a 16-bit <code class="calibre23"><tt class="calibre23"><span class="calibre24">short</span></tt></code> has the bit pattern <code class="calibre23"><tt class="calibre23"><span class="calibre24">0000000000001111</span></tt></code>, whereas the character string <code class="calibre23"><tt class="calibre23"><span class="calibre24">"15"</span></tt></code> represented as two Latin-1 <code class="calibre23"><tt class="calibre23"><span class="calibre24">char</span></tt></code>s has the bit pattern <code class="calibre23"><tt class="calibre23"><span class="calibre24">0011000100110101</span></tt></code>. The first byte represents the character <code class="calibre23"><tt class="calibre23"><span class="calibre24">'1'</span></tt></code> which has the octal value 061, and the second byte represents <code class="calibre23"><tt class="calibre23"><span class="calibre24">'5'</span></tt></code>, which in Latin-1 is octal 065.</p><div class="calibre15">&#160;</div>
<div class="calibre28"><a id="filepos2419968"/><img alt="Image" src="images/00008.jpg" class="calibre9"/></div>
<p class="calibre14">The new standard introduced several functions that convert between numeric data and library <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>s:</p><div class="calibre15">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">int i = 42;<br class="calibre6"/>string s = to_string(i);&#160;&#160;// <span><span class="calibre45"><span class="calibre16">converts the</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">int i</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">to its character representation</span></span></span><br class="calibre6"/>double d = stod(s);&#160;&#160;&#160;&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">converts the</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">string s</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">to floating-point</span></span></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre51"><span class="calibre5"><a id="filepos2421177"/><a/>Table 9.16. Conversions between <code class="calibre23"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">string</span></span></tt></span></span></tt></code>s and Numbers</span></p><div class="calibre12">&#160;</div>
<div class="calibre52"><img alt="Image" src="images/00064.jpg" class="calibre9"/></div><div class="calibre22">&#160;</div>
<p class="calibre14">Here we call <code class="calibre23"><tt class="calibre23"><span class="calibre24">to_string</span></tt></code> to convert <code class="calibre23"><tt class="calibre23"><span class="calibre24">42</span></tt></code> to its corresponding <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> representation and then call <code class="calibre23"><tt class="calibre23"><span class="calibre24">stod</span></tt></code> to convert that <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> to floating-point.</p><div class="calibre15">&#160;</div>
<p class="calibre25">The first non-whitespace character in the <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> we convert to numeric value must be a character that can appear in a number:</p><div class="calibre22">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">string s2 = "pi = 3.14";<br class="calibre6"/>// <span><span class="calibre45"><span class="calibre16">convert the first substring in</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">s</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">that starts with a digit,</span></span></span>&#160;&#160;<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">d</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">= 3.14</span></span></span><br class="calibre6"/>d = stod(s2.substr(s2.find_first_of("+-.0123456789")));</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">In this call to <code class="calibre23"><tt class="calibre23"><span class="calibre24">stod</span></tt></code>, we call <code class="calibre23"><tt class="calibre23"><span class="calibre24">find_first_of</span></tt></code> (&#167; <a href="093-9.5._additional_string_operations.html#filepos2401949">9.5.3</a>, p. <a href="093-9.5._additional_string_operations.html#filepos2401949">364</a>) to get the position of the first character in <code class="calibre23"><tt class="calibre23"><span class="calibre24">s</span></tt></code> that could be part of a number. We pass the substring of <code class="calibre23"><tt class="calibre23"><span class="calibre24">s</span></tt></code> starting at that position to <code class="calibre23"><tt class="calibre23"><span class="calibre24">stod</span></tt></code>. The <code class="calibre23"><tt class="calibre23"><span class="calibre24">stod</span></tt></code> function reads the <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> it is given until it finds a character that cannot be part of a number. It then converts the character representation of the number it found into the corresponding double-precision floating-point value.</p><div class="calibre15">&#160;</div>
<p class="calibre25">The first non-whitespace character in the <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> must be a sign (<code class="calibre23"><tt class="calibre23"><span class="calibre24">+</span></tt></code> or <code class="calibre23"><tt class="calibre23"><span class="calibre24">-</span></tt></code>) or a digit. The <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> can begin with <code class="calibre23"><tt class="calibre23"><span class="calibre24">0x</span></tt></code> or <code class="calibre23"><tt class="calibre23"><span class="calibre24">0X</span></tt></code> to indicate hexadecimal. For the functions that convert to floating-point the <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> may also start with a decimal point (<code class="calibre23"><tt class="calibre23"><span class="calibre24">.</span></tt></code>) and may contain an <code class="calibre23"><tt class="calibre23"><span class="calibre24">e</span></tt></code> or <code class="calibre23"><tt class="calibre23"><span class="calibre24">E</span></tt></code> to designate the exponent. For the functions that convert to integral type, depending on the base, the <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> can contain alphabetic characters corresponding to numbers beyond the digit 9.</p><div class="calibre22">&#160;</div>
<div class="calibre33"><blockquote class="calibre26"><hr class="calibre34"/><p class="calibre14"><span class="calibre5"><a/><img alt="Image" src="images/00012.jpg" class="calibre9"/> Note</span></p><div class="calibre15">&#160;</div>
<blockquote class="calibre13"><p class="calibre14">If the <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code> can&#8217;t be converted to a number, These functions throw an <code class="calibre23"><tt class="calibre23"><span class="calibre24">invalid_argument</span></tt></code> exception (&#167; <a href="059-5.6._try_blocks_and_exception_handling.html#filepos1368051">5.6</a>, p. <a href="059-5.6._try_blocks_and_exception_handling.html#filepos1368051">193</a>). If the conversion generates a value that can&#8217;t be represented, they throw <code class="calibre23"><tt class="calibre23"><span class="calibre24">out_of_range</span></tt></code>.</p></blockquote><div class="calibre22">&#160;</div>
<hr class="calibre34"/></blockquote></div><div class="calibre3">&#160;</div>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;"><a href="001-contents.html"><img src="images/teamlib.gif" width="62" height="15" border="0" align="absmiddle"  alt="Team LiB"></a></div></td><td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href="092-9.4._how_a_vector_grows.html"><img src="images/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
<a href="094-9.6._container_adaptors.html"><img src="images/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a></div></td></tr></table></body></html>
