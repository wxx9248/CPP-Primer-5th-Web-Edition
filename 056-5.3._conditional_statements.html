<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>5.3. Conditional Statements</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" type="text/css" rel="stylesheet"/>
<link href="page_styles.css" type="text/css" rel="stylesheet"/>
</head>
  <body class="calibre">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;"><a href="001-contents.html"><img src="images/teamlib.gif" width="62" height="15" border="0" align="absmiddle"  alt="Team LiB"></a></div></td><td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href="055-5.2._statement_scope.html"><img src="images/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
<a href="057-5.4._iterative_statements.html"><img src="images/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a></div></td></tr></table><h3 id="filepos1249036" class="calibre29"><span class="bold">5.3. Conditional Statements</span></h3><div class="calibre12">&#160;</div>
<p class="calibre14">C++ provides two statements that allow for conditional execution. The <code class="calibre23"><tt class="calibre23"><span class="calibre24">if</span></tt></code> statement determines the flow of control based on a condition. The <code class="calibre23"><tt class="calibre23"><span class="calibre24">switch</span></tt></code> statement evaluates an integral expression and chooses one of several execution paths based on the expression&#8217;s value.</p><div class="calibre15">&#160;</div>
<h4 id="filepos1249590" class="calibre37"><span class="calibre5"><a id="filepos1249623"/>5.3.1. The <code class="calibre23"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">if</span></span></tt></span></span></tt></code> Statement</span></h4><div class="calibre38">&#160;</div>
<div class="calibre28"><img alt="Image" src="images/00009.jpg" class="calibre9"/></div>
<p class="calibre14">An <a id="filepos1249915" href="061-defined_terms.html#filepos1408229"><code class="calibre23"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">if</span></span></tt></span></span></tt></code>
<strong class="calibre5">statement</strong></a> conditionally executes another statement based on whether a specified condition is true. There are two forms of the <code class="calibre23"><tt class="calibre23"><span class="calibre24">if</span></tt></code>: one with an <code class="calibre23"><tt class="calibre23"><span class="calibre24">else</span></tt></code> branch and one without. The syntactic form of the simple <code class="calibre23"><tt class="calibre23"><span class="calibre24">if</span></tt></code> is</p><div class="calibre15">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">if (<span><span class="calibre45"><span class="calibre16">condition)</span></span></span><br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;<span><span class="calibre45"><span class="calibre16">statement</span></span></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">An <a id="filepos1250893" href="061-defined_terms.html#filepos1407817"><code class="calibre23"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">if else</span></span></tt></span></span></tt></code>
<strong class="calibre5">statement</strong></a> has the form</p><div class="calibre15">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">if (<span><span class="calibre45"><span class="calibre16">condition)</span></span></span><br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;<span><span class="calibre45"><span class="calibre16">statement</span></span></span><br class="calibre6"/>else<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;<span><span class="calibre45"><span class="calibre16">statement2</span></span></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">In both versions, <em class="calibre16">condition</em> must be enclosed in parentheses. <em class="calibre16">condition</em> can be an expression or an initialized variable declaration (&#167; <a href="055-5.2._statement_scope.html#filepos1244991">5.2</a>, p. <a href="055-5.2._statement_scope.html#filepos1244991">174</a>). The expression or variable must have a type that is convertible (&#167; <a href="049-4.11._type_conversions.html#filepos1157818">4.11</a>, p. <a href="049-4.11._type_conversions.html#filepos1157818">159</a>) to <code class="calibre23"><tt class="calibre23"><span class="calibre24">bool</span></tt></code>. As usual, either or both <em class="calibre16">statement</em> and <em class="calibre16">statement2</em> can be a block.</p><div class="calibre15">&#160;</div>
<p class="calibre25">If <em class="calibre16">condition</em> is <code class="calibre23"><tt class="calibre23"><span class="calibre24">true</span></tt></code>, then <em class="calibre16">statement</em> is executed. After <em class="calibre16">statement</em> completes, execution continues with the statement following the <code class="calibre23"><tt class="calibre23"><span class="calibre24">if</span></tt></code>.</p><div class="calibre22">&#160;</div>
<p class="calibre25">If <em class="calibre16">condition</em> is <code class="calibre23"><tt class="calibre23"><span class="calibre24">false</span></tt></code>, <em class="calibre16">statement</em> is skipped. In a simple <code class="calibre23"><tt class="calibre23"><span class="calibre24">if</span></tt></code>, execution continues with the statement following the <code class="calibre23"><tt class="calibre23"><span class="calibre24">if</span></tt></code>. In an <code class="calibre23"><tt class="calibre23"><span class="calibre24">if else</span></tt></code>, <em class="calibre16">statement2</em> is executed.</p><div class="calibre22">&#160;</div>
<h5 class="calibre39"><span class="calibre5">Using an <code class="calibre23"><tt class="calibre23"><span class="calibre49"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">if else</span></span></tt></span></span></tt></code> Statement</span></h5><div class="calibre38">&#160;</div>
<p class="calibre14">To illustrate an <code class="calibre23"><tt class="calibre23"><span class="calibre24">if</span></tt></code> statement, we&#8217;ll calculate a letter grade from a numeric grade. We&#8217;ll assume that the numeric grades range from zero to 100 inclusive. A grade of 100 gets an &#8220;A++,&#8221; grades below 60 get an &#8220;F,&#8221; and the others range in clumps of ten: grades from 60 to 69 inclusive get a &#8220;D,&#8221; 70 to 79 a &#8220;C,&#8221; and so on. We&#8217;ll use a <code class="calibre23"><tt class="calibre23"><span class="calibre24">vector</span></tt></code> to hold the possible letter grades:</p><div class="calibre15">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">vector&lt;string&gt; scores = {"F", "D", "C", "B", "A", "A++"};</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre25">To solve this problem, we can use an <code class="calibre23"><tt class="calibre23"><span class="calibre24">if else</span></tt></code> statement to execute different actions for failing and passing grades:</p><div class="calibre22">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">// <span><span class="calibre45"><span class="calibre16">if</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">grade</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">is less than</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">60</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">it's an</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">F</span></span></tt></span>, <span><span class="calibre45"><span class="calibre16">otherwise compute a subscript</span></span></span><br class="calibre6"/>string lettergrade;<br class="calibre6"/>if (grade &lt; 60)<br class="calibre6"/>&#160;&#160;&#160;&#160;lettergrade = scores[0];<br class="calibre6"/>else<br class="calibre6"/>&#160;&#160;&#160;&#160;lettergrade = scores[(grade - 50)/10];</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">Depending on the value of <code class="calibre23"><tt class="calibre23"><span class="calibre24">grade</span></tt></code>, we execute the statement after the <code class="calibre23"><tt class="calibre23"><span class="calibre24">if</span></tt></code> or the one after the <code class="calibre23"><tt class="calibre23"><span class="calibre24">else</span></tt></code>. In the <code class="calibre23"><tt class="calibre23"><span class="calibre24">else</span></tt></code>, we compute a subscript from a grade by reducing the grade to account for the larger range of failing grades. Then we use integer division (&#167; <a href="040-4.2._arithmetic_operators.html#filepos1028232">4.2</a>, p. <a href="040-4.2._arithmetic_operators.html#filepos1028232">141</a>), which truncates the remainder, to calculate the appropriate <code class="calibre23"><tt class="calibre23"><span class="calibre24">scores</span></tt></code> index.</p><div class="calibre15">&#160;</div>
<h5 class="calibre39"><span class="calibre5"><a id="filepos1256261"/>Nested <code class="calibre23"><tt class="calibre23"><span class="calibre49"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">if</span></span></tt></span></span></tt></code> Statements</span></h5><div class="calibre38">&#160;</div>
<p class="calibre14">To make our program more interesting, we&#8217;ll add a plus or minus to passing grades. We&#8217;ll give a plus to grades ending in 8 or 9, and a minus to those ending in 0, 1, or 2:</p><div class="calibre15">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">if (grade % 10 &gt; 7)<br class="calibre6"/>&#160;&#160;&#160;&#160;lettergrade += '+';&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">grades ending in</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">8</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">or</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">9</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">get a</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">+</span></span></tt></span><br class="calibre6"/>else if (grade % 10 &lt; 3)<br class="calibre6"/>&#160;&#160;&#160;&#160;lettergrade += '-';&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">those ending in</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">0, 1</span></span></tt></span>, <span><span class="calibre45"><span class="calibre16">or</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">2</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">get a</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">-</span></span></tt></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">Here we use the modulus operator (&#167; <a href="040-4.2._arithmetic_operators.html#filepos1028232">4.2</a>, p. <a href="040-4.2._arithmetic_operators.html#filepos1028232">141</a>) to get the remainder and decide based on the remainder whether to add plus or minus.</p><div class="calibre15">&#160;</div>
<p class="calibre25">We next will incorporate the code that adds a plus or minus to the code that fetches the letter grade from scores:</p><div class="calibre22">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">// <span><span class="calibre45"><span class="calibre16">if failing grade, no need to check for a plus or minus</span></span></span><br class="calibre6"/>if (grade &lt; 60)<br class="calibre6"/>&#160;&#160;&#160;&#160;lettergrade = scores[0];<br class="calibre6"/>else {<br class="calibre6"/>&#160;&#160;&#160;&#160;lettergrade = scores[(grade - 50)/10]; // <span><span class="calibre45"><span class="calibre16">fetch the letter grade</span></span></span><br class="calibre6"/>&#160;&#160;&#160;&#160;if (grade != 100)&#160;&#160;// <span><span class="calibre45"><span class="calibre16">add plus or minus only if not already an</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">A++</span></span></tt></span><br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if (grade % 10 &gt; 7)<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;lettergrade += '+';&#160;&#160;// <span><span class="calibre45"><span class="calibre16">grades ending in</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">8</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">or</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">9</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">get a</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">+</span></span></tt></span><br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else if (grade % 10 &lt; 3)<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;lettergrade += '-';&#160;&#160;// <span><span class="calibre45"><span class="calibre16">grades ending in</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">0, 1</span></span></tt></span>, <span><span class="calibre45"><span class="calibre16">or</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">2</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">get a</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">-</span></span></tt></span><br class="calibre6"/>}</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">Note that we use a block to enclose the two statements that follow the first <code class="calibre23"><tt class="calibre23"><span class="calibre24">else</span></tt></code>. If the <code class="calibre23"><tt class="calibre23"><span class="calibre24">grade</span></tt></code> is <code class="calibre23"><tt class="calibre23"><span class="calibre24">60</span></tt></code> or more, we have two actions that we need to do: Fetch the letter grade from <code class="calibre23"><tt class="calibre23"><span class="calibre24">scores</span></tt></code>, and conditionally set the plus or minus.</p><div class="calibre15">&#160;</div>
<h5 class="calibre39"><span class="calibre5">Watch Your Braces</span></h5><div class="calibre38">&#160;</div>
<p class="calibre14">It is a common mistake to forget the curly braces when multiple statements must be executed as a block. In the following example, contrary to the indentation, the code to add a plus or minus happens unconditionally:</p><div class="calibre15">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">if (grade &lt; 60)<br class="calibre6"/>&#160;&#160;&#160;&#160;lettergrade = scores[0];<br class="calibre6"/>else&#160;&#160;// <span><span class="calibre45"><span class="calibre16">WRONG: missing curly</span></span></span><br class="calibre6"/>&#160;&#160;&#160;&#160;lettergrade = scores[(grade - 50)/10];<br class="calibre6"/>&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">despite appearances, without the curly brace, this code is always executed</span></span></span><br class="calibre6"/>&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">failing grades will incorrectly get a</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">-</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">or a</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">+</span></span></tt></span><br class="calibre6"/>&#160;&#160;&#160;&#160;if (grade != 100)<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if (grade % 10 &gt; 7)<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;lettergrade += '+';&#160;&#160;// <span><span class="calibre45"><span class="calibre16">grades ending in</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">8</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">or</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">9</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">get a</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">+</span></span></tt></span><br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else if (grade % 10 &lt; 3)<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;lettergrade += '-';&#160;&#160;// <span><span class="calibre45"><span class="calibre16">grades ending in</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">0, 1</span></span></tt></span>, <span><span class="calibre45"><span class="calibre16">or</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">2</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">get a</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">-</span></span></tt></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">Uncovering this error may be very difficult because the program looks correct.</p><div class="calibre15">&#160;</div>
<p class="calibre25">To avoid such problems, some coding styles recommend always using braces after an <code class="calibre23"><tt class="calibre23"><span class="calibre24">if</span></tt></code> or an <code class="calibre23"><tt class="calibre23"><span class="calibre24">else</span></tt></code> (and also around the bodies of <code class="calibre23"><tt class="calibre23"><span class="calibre24">while</span></tt></code> and <code class="calibre23"><tt class="calibre23"><span class="calibre24">for</span></tt></code> statements).</p><div class="calibre22">&#160;</div>
<p class="calibre14"><a id="filepos1264529"/>Doing so avoids any possible confusion. It also means that the braces are already in place if later modifications of the code require adding statements.</p><div class="calibre15">&#160;</div>
<div class="calibre33"><blockquote class="calibre26"><hr class="calibre34"/><p class="calibre14"><span class="calibre5"><a/><img alt="Image" src="images/00017.jpg" class="calibre9"/> Best Practices</span></p><div class="calibre15">&#160;</div>
<blockquote class="calibre13"><p class="calibre14">Many editors and development environments have tools to automatically indent source code to match its structure. It is a good idea to use such tools if they are available.</p></blockquote><div class="calibre22">&#160;</div>
<hr class="calibre34"/></blockquote></div><div class="calibre3">&#160;</div>
<h5 class="calibre39"><span class="calibre5">Dangling <code class="calibre23"><tt class="calibre23"><span class="calibre49"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">else</span></span></tt></span></span></tt></code></span></h5><div class="calibre38">&#160;</div>
<p class="calibre14">When we nest an <code class="calibre23"><tt class="calibre23"><span class="calibre24">if</span></tt></code> inside another <code class="calibre23"><tt class="calibre23"><span class="calibre24">if</span></tt></code>, it is possible that there will be more <code class="calibre23"><tt class="calibre23"><span class="calibre24">if</span></tt></code> branches than <code class="calibre23"><tt class="calibre23"><span class="calibre24">else</span></tt></code> branches. Indeed, our grading program has four <code class="calibre23"><tt class="calibre23"><span class="calibre24">if</span></tt></code>s and two <code class="calibre23"><tt class="calibre23"><span class="calibre24">else</span></tt></code>s. The question arises: How do we know to which <code class="calibre23"><tt class="calibre23"><span class="calibre24">if</span></tt></code> a given <code class="calibre23"><tt class="calibre23"><span class="calibre24">else</span></tt></code> belongs?</p><div class="calibre15">&#160;</div>
<p class="calibre25">This problem, usually referred to as a <strong class="calibre5"><a id="filepos1266322" href="061-defined_terms.html#filepos1403298">dangling <code class="calibre23"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">else</span></span></tt></span></span></tt></code></a></strong>, is common to many programming languages that have both <code class="calibre23"><tt class="calibre23"><span class="calibre24">if</span></tt></code> and <code class="calibre23"><tt class="calibre23"><span class="calibre24">if else</span></tt></code> statements. Different languages solve this problem in different ways. In C++ the ambiguity is resolved by specifying that each <code class="calibre23"><tt class="calibre23"><span class="calibre24">else</span></tt></code> is matched with the closest preceding unmatched <code class="calibre23"><tt class="calibre23"><span class="calibre24">if</span></tt></code>.</p><div class="calibre22">&#160;</div>
<p class="calibre25">Programmers sometimes get into trouble when they write code that contains more <code class="calibre23"><tt class="calibre23"><span class="calibre24">if</span></tt></code> than <code class="calibre23"><tt class="calibre23"><span class="calibre24">else</span></tt></code> branches. To illustrate the problem, we&#8217;ll rewrite the innermost <code class="calibre23"><tt class="calibre23"><span class="calibre24">if else</span></tt></code> that adds a plus or minus using a different set of conditions:</p><div class="calibre22">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">// <span><span class="calibre45"><span class="calibre16">WRONG: execution does NOT match indentation; the</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">else</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">goes with the inner</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">if</span></span></tt></span><br class="calibre6"/>if (grade % 10 &gt;= 3)<br class="calibre6"/>&#160;&#160;&#160;&#160;if (grade % 10 &gt; 7)<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;lettergrade += '+';&#160;&#160;// <span><span class="calibre45"><span class="calibre16">grades ending in</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">8</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">or</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">9</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">get a</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">+</span></span></tt></span><br class="calibre6"/>else<br class="calibre6"/>&#160;&#160;&#160;&#160;lettergrade += '-'; // <span><span class="calibre45"><span class="calibre16">grades ending in</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">3, 4, 5</span></span></tt></span>, <span><tt class="calibre23"><span class="calibre46"><span class="calibre16">6</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">will get a minus!</span></span></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">The indentation in our code indicates that we intend the <code class="calibre23"><tt class="calibre23"><span class="calibre24">else</span></tt></code> to go with the outer <code class="calibre23"><tt class="calibre23"><span class="calibre24">if</span></tt></code>&#8212;we intend for the <code class="calibre23"><tt class="calibre23"><span class="calibre24">else</span></tt></code> branch to be executed when the <code class="calibre23"><tt class="calibre23"><span class="calibre24">grade</span></tt></code> ends in a digit less than <code class="calibre23"><tt class="calibre23"><span class="calibre24">3</span></tt></code>. However, despite our intentions, and contrary to the indentation, the <code class="calibre23"><tt class="calibre23"><span class="calibre24">else</span></tt></code> branch is part of the inner <code class="calibre23"><tt class="calibre23"><span class="calibre24">if</span></tt></code>. This code adds a <code class="calibre23"><tt class="calibre23"><span class="calibre24">'-'</span></tt></code> to grades ending in <code class="calibre23"><tt class="calibre23"><span class="calibre24">3</span></tt></code> to <code class="calibre23"><tt class="calibre23"><span class="calibre24">7</span></tt></code> inclusive! Properly indented to match the actual execution, what we wrote is:</p><div class="calibre15">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">// <span><span class="calibre45"><span class="calibre16">indentation matches the execution path, not the programmer's intent</span></span></span><br class="calibre6"/>if (grade % 10 &gt;= 3)<br class="calibre6"/>&#160;&#160;&#160;&#160;if (grade % 10 &gt; 7)<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;lettergrade += '+';&#160;&#160;// <span><span class="calibre45"><span class="calibre16">grades ending in</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">8</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">or</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">9</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">get a</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">+</span></span></tt></span><br class="calibre6"/>&#160;&#160;&#160;&#160;else<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;lettergrade += '-';&#160;&#160;// <span><span class="calibre45"><span class="calibre16">grades ending in</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">3, 4, 5, 6</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">will get a minus!</span></span></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<h5 class="calibre39"><span class="calibre5">Controlling the Execution Path with Braces</span></h5><div class="calibre38">&#160;</div>
<p class="calibre14">We can make the <code class="calibre23"><tt class="calibre23"><span class="calibre24">else</span></tt></code> part of the outer <code class="calibre23"><tt class="calibre23"><span class="calibre24">if</span></tt></code> by enclosing the inner <code class="calibre23"><tt class="calibre23"><span class="calibre24">if</span></tt></code> in a block:</p><div class="calibre15">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">// <span><span class="calibre45"><span class="calibre16">add a plus for grades that end in</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">8</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">or</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">9</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">and a minus for those ending in</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">0</span></span></tt></span><span><span class="calibre45"><span class="calibre16">,</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">1</span></span></tt></span><span><span class="calibre45"><span class="calibre16">, or</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">2</span></span></tt></span><br class="calibre6"/>if (grade % 10 &gt;= 3) {<br class="calibre6"/>&#160;&#160;&#160;&#160;if (grade % 10 &gt; 7)<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;lettergrade += '+';&#160;&#160;// <span><span class="calibre45"><span class="calibre16">grades ending in</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">8</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">or</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">9</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">get a</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">+</span></span></tt></span><br class="calibre6"/>} else&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">curlies force the</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">else</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">to go with the outer</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">if</span></span></tt></span><br class="calibre6"/>&#160;&#160;&#160;&#160;lettergrade += '-'; // <span><span class="calibre45"><span class="calibre16">grades ending in</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">0</span></span></tt></span><span><span class="calibre45"><span class="calibre16">,</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">1</span></span></tt></span><span><span class="calibre45"><span class="calibre16">, or</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">2</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">will get a minus</span></span></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14"><a id="filepos1274681"/>Statements do not span block boundaries, so the inner <code class="calibre23"><tt class="calibre23"><span class="calibre24">if</span></tt></code> ends at the close curly before the <code class="calibre23"><tt class="calibre23"><span class="calibre24">else</span></tt></code>. The <code class="calibre23"><tt class="calibre23"><span class="calibre24">else</span></tt></code> cannot be part of the inner <code class="calibre23"><tt class="calibre23"><span class="calibre24">if</span></tt></code>. Now, the nearest unmatched <code class="calibre23"><tt class="calibre23"><span class="calibre24">if</span></tt></code> is the outer <code class="calibre23"><tt class="calibre23"><span class="calibre24">if</span></tt></code>, which is what we intended all along.</p><div class="calibre15">&#160;</div>
<div class="calibre42"><blockquote class="calibre26"><hr class="calibre34"/><blockquote class="calibre13"><p class="calibre43"><span class="calibre5">Exercises Section 5.3.1</span></p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 5.5:</strong> Using an <code class="calibre23"><tt class="calibre23"><span class="calibre24">if</span></tt></code>&#8211;<code class="calibre23"><tt class="calibre23"><span class="calibre24">else</span></tt></code> statement, write your own version of the program to generate the letter grade from a numeric grade.</p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 5.6:</strong> Rewrite your grading program to use the conditional operator (&#167; <a href="045-4.7._the_conditional_operator.html#filepos1107527">4.7</a>, p. <a href="045-4.7._the_conditional_operator.html#filepos1107527">151</a>) in place of the <code class="calibre23"><tt class="calibre23"><span class="calibre24">if</span></tt></code>&#8211;<code class="calibre23"><tt class="calibre23"><span class="calibre24">else</span></tt></code> statement.</p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 5.7:</strong> Correct the errors in each of the following code fragments:</p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre26"><p class="calibre53"><strong class="calibre5">(a)</strong>
<code class="calibre23"><tt class="calibre23"><span class="calibre24">if (ival1 != ival2)<br class="calibre6"/>&#160;&#160;&#160;&#160;ival1 = ival2<br class="calibre6"/>else ival1 = ival2 = 0;</span></tt></code></p></blockquote><div class="calibre15">&#160;</div>
<blockquote class="calibre26"><p class="calibre53"><strong class="calibre5">(b)</strong>
<code class="calibre23"><tt class="calibre23"><span class="calibre24">if (ival &lt; minval)<br class="calibre6"/>&#160;&#160;&#160;&#160;minval = ival;<br class="calibre6"/>&#160;&#160;&#160;&#160;occurs = 1;</span></tt></code></p></blockquote><div class="calibre15">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre26"><p class="calibre53"><strong class="calibre5">(c)</strong>
<code class="calibre23"><tt class="calibre23"><span class="calibre24">if (int ival = get_value())<br class="calibre6"/>&#160;&#160;&#160;&#160;cout &lt;&lt; "ival = " &lt;&lt; ival &lt;&lt; endl;<br class="calibre6"/>if (!ival)<br class="calibre6"/>&#160;&#160;&#160;&#160;cout &lt;&lt; "ival = 0\n";</span></tt></code></p></blockquote><div class="calibre15">&#160;</div>
<blockquote class="calibre26"><p class="calibre53"><strong class="calibre5">(d)</strong>
<code class="calibre23"><tt class="calibre23"><span class="calibre24">if (ival = 0)<br class="calibre6"/>&#160;&#160;&#160;&#160;ival = get_value();</span></tt></code></p></blockquote><div class="calibre15">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 5.8:</strong> What is a &#8220;dangling <code class="calibre23"><tt class="calibre23"><span class="calibre24">else</span></tt></code>&#8221;? How are <code class="calibre23"><tt class="calibre23"><span class="calibre24">else</span></tt></code> clauses resolved in C++?</p></blockquote><div class="calibre10">&#160;</div>
<hr class="calibre34"/></blockquote></div><div class="calibre3">&#160;</div>
<h4 id="filepos1278126" class="calibre37"><span class="calibre5">5.3.2. The <code class="calibre23"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">switch</span></span></tt></span></span></tt></code> Statement</span></h4><div class="calibre38">&#160;</div>
<p class="calibre14">A <a id="filepos1278386" href="061-defined_terms.html#filepos1409861"><code class="calibre23"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">switch</span></span></tt></span></span></tt></code>
<strong class="calibre5">statement</strong></a> provides a convenient way of selecting among a (possibly large) number of fixed alternatives. As one example, suppose that we want to count how often each of the five vowels appears in some segment of text. Our program logic is as follows:</p><div class="calibre15">&#160;</div>
<blockquote class="calibre26"><p class="calibre27">&#8226; Read every character in the input.</p></blockquote><div class="calibre15">&#160;</div>
<blockquote class="calibre26"><p class="calibre27">&#8226; Compare each character to the set of vowels.</p></blockquote><div class="calibre15">&#160;</div>
<blockquote class="calibre26"><p class="calibre27">&#8226; If the character matches one of the vowels, add 1 to that vowel&#8217;s count.</p></blockquote><div class="calibre15">&#160;</div>
<blockquote class="calibre26"><p class="calibre27">&#8226; Display the results.</p></blockquote><div class="calibre15">&#160;</div>
<p class="calibre14">For example, when we run the program on the text of this chapter, the output is</p><div class="calibre15">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">Number of vowel a: 3195</span></span></tt></span><br class="calibre6"/><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">Number of vowel e: 6230</span></span></tt></span><br class="calibre6"/><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">Number of vowel i: 3102</span></span></tt></span><br class="calibre6"/><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">Number of vowel o: 3289</span></span></tt></span><br class="calibre6"/><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">Number of vowel u: 1033</span></span></tt></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14"><a id="filepos1280212"/>We can solve our problem most directly using a <code class="calibre23"><tt class="calibre23"><span class="calibre24">switch</span></tt></code> statement:</p><div class="calibre15">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">// <span><span class="calibre45"><span class="calibre16">initialize counters for each vowel</span></span></span><br class="calibre6"/>unsigned aCnt = 0, eCnt = 0, iCnt = 0, oCnt = 0, uCnt = 0;<br class="calibre6"/>char ch;<br class="calibre6"/>while (cin &gt;&gt; ch) {<br class="calibre6"/>&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">if</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">ch</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">is a vowel, increment the appropriate counter</span></span></span><br class="calibre6"/>&#160;&#160;&#160;&#160;switch (ch) {<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;case 'a':<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;++aCnt;<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;break;<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;case 'e':<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;++eCnt;<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;break;<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;case 'i':<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;++iCnt;<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;break;<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;case 'o':<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;++oCnt;<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;break;<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;case 'u':<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;++uCnt;<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;break;<br class="calibre6"/>&#160;&#160;&#160;&#160;}<br class="calibre6"/>}<br class="calibre6"/>// <span><span class="calibre45"><span class="calibre16">print results</span></span></span><br class="calibre6"/>cout &lt;&lt; "Number of vowel a: \t" &lt;&lt; aCnt &lt;&lt; '\n'<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&lt;&lt; "Number of vowel e: \t" &lt;&lt; eCnt &lt;&lt; '\n'<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&lt;&lt; "Number of vowel i: \t" &lt;&lt; iCnt &lt;&lt; '\n'<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&lt;&lt; "Number of vowel o: \t" &lt;&lt; oCnt &lt;&lt; '\n'<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&lt;&lt; "Number of vowel u: \t" &lt;&lt; uCnt &lt;&lt; endl;</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">A <code class="calibre23"><tt class="calibre23"><span class="calibre24">switch</span></tt></code> statement executes by evaluating the parenthesized expression that follows the keyword <code class="calibre23"><tt class="calibre23"><span class="calibre24">switch</span></tt></code>. That expression may be an initialized variable declaration (&#167; <a href="055-5.2._statement_scope.html#filepos1244991">5.2</a>, p. <a href="055-5.2._statement_scope.html#filepos1244991">174</a>). The expression is converted to integral type. The result of the expression is compared with the value associated with each <code class="calibre23"><tt class="calibre23"><span class="calibre24">case</span></tt></code>.</p><div class="calibre15">&#160;</div>
<p class="calibre25">If the expression matches the value of a <code class="calibre23"><tt class="calibre23"><span class="calibre24">case</span></tt></code> label, execution begins with the first statement following that label. Execution continues normally from that statement through the end of the <code class="calibre23"><tt class="calibre23"><span class="calibre24">switch</span></tt></code> or until a <code class="calibre23"><tt class="calibre23"><span class="calibre24">break</span></tt></code> statement.</p><div class="calibre22">&#160;</div>
<p class="calibre25">We&#8217;ll look at <code class="calibre23"><tt class="calibre23"><span class="calibre24">break</span></tt></code> statements in detail in &#167; <a href="058-5.5._jump_statements.html#filepos1351310">5.5.1</a> (p. <a href="058-5.5._jump_statements.html#filepos1351310">190</a>), but, briefly, a <code class="calibre23"><tt class="calibre23"><span class="calibre24">break</span></tt></code> interrupts the current control flow. In this case, the <code class="calibre23"><tt class="calibre23"><span class="calibre24">break</span></tt></code> transfers control out of the <code class="calibre23"><tt class="calibre23"><span class="calibre24">switch</span></tt></code>. In this program, the <code class="calibre23"><tt class="calibre23"><span class="calibre24">switch</span></tt></code> is the only statement in the body of a <code class="calibre23"><tt class="calibre23"><span class="calibre24">while</span></tt></code>. Breaking out of this <code class="calibre23"><tt class="calibre23"><span class="calibre24">switch</span></tt></code> returns control to the enclosing <code class="calibre23"><tt class="calibre23"><span class="calibre24">while</span></tt></code>. Because there are no other statements in that <code class="calibre23"><tt class="calibre23"><span class="calibre24">while</span></tt></code>, execution continues at the condition in the <code class="calibre23"><tt class="calibre23"><span class="calibre24">while</span></tt></code>.</p><div class="calibre22">&#160;</div>
<p class="calibre25">If no match is found, execution falls through to the first statement following the <code class="calibre23"><tt class="calibre23"><span class="calibre24">switch</span></tt></code>. As we already know, in this example, exiting the <code class="calibre23"><tt class="calibre23"><span class="calibre24">switch</span></tt></code> returns control to the condition in the <code class="calibre23"><tt class="calibre23"><span class="calibre24">while</span></tt></code>.</p><div class="calibre22">&#160;</div>
<p class="calibre25">The <code class="calibre23"><tt class="calibre23"><span class="calibre24">case</span></tt></code> keyword and its associated value together are known as the <a id="filepos1285807" href="061-defined_terms.html#filepos1401277"><code class="calibre23"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">case</span></span></tt></span></span></tt></code>
<strong class="calibre5">label</strong></a>. <code class="calibre23"><tt class="calibre23"><span class="calibre24">case</span></tt></code> labels must be integral constant expressions (&#167; <a href="024-2.4._const_qualifier.html#filepos520427">2.4.4</a>, p. <a href="024-2.4._const_qualifier.html#filepos520427">65</a>):</p><div class="calibre22">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"><a id="filepos1286269"/></span></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">char ch = getVal();<br class="calibre6"/>int ival = 42;<br class="calibre6"/>switch(ch) {<br class="calibre6"/>&#160;&#160;&#160;&#160;case 3.14: // <span><span class="calibre45"><span class="calibre16">error: noninteger as</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">case</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">label</span></span></span><br class="calibre6"/>&#160;&#160;&#160;&#160;case ival: // <span><span class="calibre45"><span class="calibre16">error: nonconstant as</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">case</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">label</span></span></span><br class="calibre6"/>&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">. . .</span></span></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">It is an error for any two <code class="calibre23"><tt class="calibre23"><span class="calibre24">case</span></tt></code> labels to have the same value. There is also a special-case label, <code class="calibre23"><tt class="calibre23"><span class="calibre24">default</span></tt></code>, which we cover on page <a href="056-5.3._conditional_statements.html#filepos1292423">181</a>.</p><div class="calibre15">&#160;</div>
<h5 class="calibre39"><span class="calibre5">Control Flow within a <code class="calibre23"><tt class="calibre23"><span class="calibre49"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">switch</span></span></tt></span></span></tt></code></span></h5><div class="calibre38">&#160;</div>
<p class="calibre14">It is important to understand that execution flows across <code class="calibre23"><tt class="calibre23"><span class="calibre24">case</span></tt></code> labels. After a <code class="calibre23"><tt class="calibre23"><span class="calibre24">case</span></tt></code> label is matched, execution starts at that label and continues across all the remaining <code class="calibre23"><tt class="calibre23"><span class="calibre24">case</span></tt></code>s or until the program explicitly interrupts it. To avoid executing code for subsequent <code class="calibre23"><tt class="calibre23"><span class="calibre24">case</span></tt></code>s, we must explicitly tell the compiler to stop execution. Under most conditions, the last statement before the next <code class="calibre23"><tt class="calibre23"><span class="calibre24">case</span></tt></code> label is <code class="calibre23"><tt class="calibre23"><span class="calibre24">break</span></tt></code>.</p><div class="calibre15">&#160;</div>
<p class="calibre25">However, there are situations where the default <code class="calibre23"><tt class="calibre23"><span class="calibre24">switch</span></tt></code> behavior is exactly what is needed. Each <code class="calibre23"><tt class="calibre23"><span class="calibre24">case</span></tt></code> label can have only a single value, but sometimes we have two or more values that share a common set of actions. In such instances, we omit a <code class="calibre23"><tt class="calibre23"><span class="calibre24">break</span></tt></code> statement, allowing the program to <em class="calibre16">fall through</em> multiple <code class="calibre23"><tt class="calibre23"><span class="calibre24">case</span></tt></code> labels.</p><div class="calibre22">&#160;</div>
<p class="calibre25">For example, we might want to count only the total number of vowels:</p><div class="calibre22">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">unsigned vowelCnt = 0;<br class="calibre6"/>// <span><span class="calibre45"><span class="calibre16">...</span></span></span><br class="calibre6"/>switch (ch)<br class="calibre6"/>{<br class="calibre6"/>&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">any occurrence of</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">a</span></span></tt></span><span><span class="calibre45"><span class="calibre16">,</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">e</span></span></tt></span><span><span class="calibre45"><span class="calibre16">,</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">i</span></span></tt></span><span><span class="calibre45"><span class="calibre16">,</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">o</span></span></tt></span><span><span class="calibre45"><span class="calibre16">, or</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">u</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">increments</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">vowelCnt</span></span></tt></span><br class="calibre6"/>&#160;&#160;&#160;&#160;case 'a':<br class="calibre6"/>&#160;&#160;&#160;&#160;case 'e':<br class="calibre6"/>&#160;&#160;&#160;&#160;case 'i':<br class="calibre6"/>&#160;&#160;&#160;&#160;case 'o':<br class="calibre6"/>&#160;&#160;&#160;&#160;case 'u':<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;++vowelCnt;<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;break;<br class="calibre6"/>}</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">Here we stacked several <code class="calibre23"><tt class="calibre23"><span class="calibre24">case</span></tt></code> labels together with no intervening <code class="calibre23"><tt class="calibre23"><span class="calibre24">break</span></tt></code>. The same code will be executed whenever <code class="calibre23"><tt class="calibre23"><span class="calibre24">ch</span></tt></code> is a vowel.</p><div class="calibre15">&#160;</div>
<p class="calibre25">Because C++ programs are free-form, <code class="calibre23"><tt class="calibre23"><span class="calibre24">case</span></tt></code> labels need not appear on a new line. We can emphasize that the <code class="calibre23"><tt class="calibre23"><span class="calibre24">case</span></tt></code>s represent a range of values by listing them all on a single line:</p><div class="calibre22">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">switch (ch)<br class="calibre6"/>{<br class="calibre6"/>&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">alternative legal syntax</span></span></span><br class="calibre6"/>&#160;&#160;&#160;&#160;case 'a': case 'e': case 'i': case 'o': case 'u':<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;++vowelCnt;<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;break;<br class="calibre6"/>}</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<div class="calibre33"><blockquote class="calibre26"><a id="filepos1292423"/><hr class="calibre34"/><p class="calibre14"><span class="calibre5"><a/><img alt="Image" src="images/00017.jpg" class="calibre9"/> Best Practices</span></p><div class="calibre15">&#160;</div>
<blockquote class="calibre13"><p class="calibre14">Omitting a <code class="calibre23"><tt class="calibre23"><span class="calibre24">break</span></tt></code> at the end of a <code class="calibre23"><tt class="calibre23"><span class="calibre24">case</span></tt></code> happens rarely. If you do omit a <code class="calibre23"><tt class="calibre23"><span class="calibre24">break</span></tt></code>, include a comment explaining the logic.</p></blockquote><div class="calibre22">&#160;</div>
<hr class="calibre34"/></blockquote></div><div class="calibre3">&#160;</div>
<h5 class="calibre39"><span class="calibre5">Forgetting a <code class="calibre23"><tt class="calibre23"><span class="calibre49"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">break</span></span></tt></span></span></tt></code> Is a Common Source of Bugs</span></h5><div class="calibre38">&#160;</div>
<p class="calibre14">It is a common misconception to think that only the statements associated with the matched <code class="calibre23"><tt class="calibre23"><span class="calibre24">case</span></tt></code> label are executed. For example, here is an <em class="calibre16">incorrect</em> implementation of our vowel-counting <code class="calibre23"><tt class="calibre23"><span class="calibre24">switch</span></tt></code> statement:</p><div class="calibre15">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">// <span><span class="calibre45"><span class="calibre16">warning: deliberately incorrect!</span></span></span><br class="calibre6"/>switch (ch) {<br class="calibre6"/>&#160;&#160;&#160;&#160;case 'a':<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;++aCnt;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">oops: should have a</span></span></span> break <span><span class="calibre45"><span class="calibre16">statement</span></span></span><br class="calibre6"/>&#160;&#160;&#160;&#160;case 'e':<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;++eCnt;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">oops: should have a</span></span></span> break <span><span class="calibre45"><span class="calibre16">statement</span></span></span><br class="calibre6"/>&#160;&#160;&#160;&#160;case 'i':<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;++iCnt;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">oops: should have a</span></span></span> break <span><span class="calibre45"><span class="calibre16">statement</span></span></span><br class="calibre6"/>&#160;&#160;&#160;&#160;case 'o':<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;++oCnt;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">oops: should have a</span></span></span> break <span><span class="calibre45"><span class="calibre16">statement</span></span></span><br class="calibre6"/>&#160;&#160;&#160;&#160;case 'u':<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;++uCnt;<br class="calibre6"/>}</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">To understand what happens, assume that the value of <code class="calibre23"><tt class="calibre23"><span class="calibre24">ch</span></tt></code> is <code class="calibre23"><tt class="calibre23"><span class="calibre24">'e'</span></tt></code>. Execution jumps to the code following the <code class="calibre23"><tt class="calibre23"><span class="calibre24">case 'e'</span></tt></code> label, which increments <code class="calibre23"><tt class="calibre23"><span class="calibre24">eCnt</span></tt></code>. Execution <em class="calibre16">continues</em> across the <code class="calibre23"><tt class="calibre23"><span class="calibre24">case</span></tt></code> labels, incrementing <code class="calibre23"><tt class="calibre23"><span class="calibre24">iCnt</span></tt></code>, <code class="calibre23"><tt class="calibre23"><span class="calibre24">oCnt</span></tt></code>, and <code class="calibre23"><tt class="calibre23"><span class="calibre24">uCnt</span></tt></code> as well.</p><div class="calibre15">&#160;</div>
<div class="calibre33"><blockquote class="calibre26"><hr class="calibre34"/><p class="calibre14"><span class="calibre5"><a/><img alt="Image" src="images/00017.jpg" class="calibre9"/> Best Practices</span></p><div class="calibre15">&#160;</div>
<blockquote class="calibre13"><p class="calibre14">Although it is not necessary to include a <code class="calibre23"><tt class="calibre23"><span class="calibre24">break</span></tt></code> after the last label of a <code class="calibre23"><tt class="calibre23"><span class="calibre24">switch</span></tt></code>, the safest course is to provide one. That way, if an additional <code class="calibre23"><tt class="calibre23"><span class="calibre24">case</span></tt></code> is added later, the <code class="calibre23"><tt class="calibre23"><span class="calibre24">break</span></tt></code> is already in place.</p></blockquote><div class="calibre22">&#160;</div>
<hr class="calibre34"/></blockquote></div><div class="calibre3">&#160;</div>
<h5 class="calibre39"><span class="calibre5">The <code class="calibre23"><tt class="calibre23"><span class="calibre49"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">default</span></span></tt></span></span></tt></code> Label</span></h5><div class="calibre38">&#160;</div>
<p class="calibre14">The statements following the <a id="filepos1297140" href="061-defined_terms.html#filepos1404313"><code class="calibre23"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">default</span></span></tt></span></span></tt></code>
<strong class="calibre5">label</strong></a> are executed when no <code class="calibre23"><tt class="calibre23"><span class="calibre24">case</span></tt></code> label matches the value of the <code class="calibre23"><tt class="calibre23"><span class="calibre24">switch</span></tt></code> expression. For example, we might add a counter to track how many nonvowels we read. We&#8217;ll increment this counter, which we&#8217;ll name <code class="calibre23"><tt class="calibre23"><span class="calibre24">otherCnt</span></tt></code>, in the <code class="calibre23"><tt class="calibre23"><span class="calibre24">default</span></tt></code> case:</p><div class="calibre15">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">if</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">ch</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">is a vowel, increment the appropriate counter</span></span></span><br class="calibre6"/>&#160;&#160;&#160;switch (ch) {<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;case 'a': case 'e': case 'i': case 'o': case 'u':<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;++vowelCnt;<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;break;<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;default:<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;++otherCnt;<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;break;<br class="calibre6"/>&#160;&#160;&#160;}<br class="calibre6"/>}</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14"><a id="filepos1298987"/>In this version, if <code class="calibre23"><tt class="calibre23"><span class="calibre24">ch</span></tt></code> is not a vowel, execution will start at the <code class="calibre23"><tt class="calibre23"><span class="calibre24">default</span></tt></code> label and we&#8217;ll increment <code class="calibre23"><tt class="calibre23"><span class="calibre24">otherCnt</span></tt></code>.</p><div class="calibre15">&#160;</div>
<div class="calibre33"><blockquote class="calibre26"><hr class="calibre34"/><p class="calibre14"><span class="calibre5"><a/><img alt="Image" src="images/00017.jpg" class="calibre9"/> Best Practices</span></p><div class="calibre15">&#160;</div>
<blockquote class="calibre13"><p class="calibre14">It can be useful to define a <code class="calibre23"><tt class="calibre23"><span class="calibre24">default</span></tt></code> label even if there is no work for the <code class="calibre23"><tt class="calibre23"><span class="calibre24">default</span></tt></code> case. Defining an empty <code class="calibre23"><tt class="calibre23"><span class="calibre24">default</span></tt></code> section indicates to subsequent readers that the case was considered.</p></blockquote><div class="calibre22">&#160;</div>
<hr class="calibre34"/></blockquote></div><div class="calibre3">&#160;</div>
<p class="calibre25">A label may not stand alone; it must precede a statement or another <code class="calibre23"><tt class="calibre23"><span class="calibre24">case</span></tt></code> label. If a <code class="calibre23"><tt class="calibre23"><span class="calibre24">switch</span></tt></code> ends with a <code class="calibre23"><tt class="calibre23"><span class="calibre24">default</span></tt></code> case that has no work to do, then the <code class="calibre23"><tt class="calibre23"><span class="calibre24">default</span></tt></code> label must be followed by a null statement or an empty block.</p><div class="calibre22">&#160;</div>
<h5 class="calibre39"><span class="calibre5">Variable Definitions inside the Body of a <code class="calibre23"><tt class="calibre23"><span class="calibre49"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">switch</span></span></tt></span></span></tt></code></span></h5><div class="calibre38">&#160;</div>
<p class="calibre14">As we&#8217;ve seen, execution in a <code class="calibre23"><tt class="calibre23"><span class="calibre24">switch</span></tt></code> can jump across <code class="calibre23"><tt class="calibre23"><span class="calibre24">case</span></tt></code> labels. When execution jumps to a particular <code class="calibre23"><tt class="calibre23"><span class="calibre24">case</span></tt></code>, any code that occurred inside the <code class="calibre23"><tt class="calibre23"><span class="calibre24">switch</span></tt></code> before that label is ignored. The fact that code is bypassed raises an interesting question: What happens if the code that is skipped includes a variable definition?</p><div class="calibre15">&#160;</div>
<p class="calibre25">The answer is that it is illegal to jump from a place where a variable with an initializer is out of scope to a place where that variable is in scope:</p><div class="calibre22">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">case true:<br class="calibre6"/>&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">this</span></span></span> switch <span><span class="calibre45"><span class="calibre16">statement is illegal because these initializations might be bypassed</span></span></span><br class="calibre6"/>&#160;&#160;&#160;&#160;string file_name; // <span><span class="calibre45"><span class="calibre16">error: control bypasses an implicitly initialized variable</span></span></span><br class="calibre6"/>&#160;&#160;&#160;&#160;int ival = 0;&#160;&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">error: control bypasses an explicitly initialized variable</span></span></span><br class="calibre6"/>&#160;&#160;&#160;&#160;int jval; &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">ok: because</span></span></span> jval <span><span class="calibre45"><span class="calibre16">is not initialized</span></span></span><br class="calibre6"/>&#160;&#160;&#160;&#160;break;<br class="calibre6"/>case false:<br class="calibre6"/>&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">ok:</span></span></span> jval <span><span class="calibre45"><span class="calibre16">is in scope but is uninitialized</span></span></span><br class="calibre6"/>&#160;&#160;&#160;&#160;jval = next_num(); // <span><span class="calibre45"><span class="calibre16">ok: assign a value to</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">jval</span></span></tt></span><br class="calibre6"/>&#160;&#160;&#160;&#160;if (file_name.empty()) // <span><tt class="calibre23"><span class="calibre46"><span class="calibre16">file_name</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">is in scope but wasn't initialized</span></span></span><br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// ...</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">If this code were legal, then any time control jumped to the <code class="calibre23"><tt class="calibre23"><span class="calibre24">false</span></tt></code> case, it would bypass the initialization of <code class="calibre23"><tt class="calibre23"><span class="calibre24">file_name</span></tt></code> and <code class="calibre23"><tt class="calibre23"><span class="calibre24">ival</span></tt></code>. Those variables would be in scope. Code following <code class="calibre23"><tt class="calibre23"><span class="calibre24">false</span></tt></code> could use those variables. However, these variables would not have been initialized. As a result, the language does not allow us to jump over an initialization if the initialized variable is in scope at the point to which control transfers.</p><div class="calibre15">&#160;</div>
<p class="calibre25">If we need to define and initialize a variable for a particular <code class="calibre23"><tt class="calibre23"><span class="calibre24">case</span></tt></code>, we can do so by defining the variable inside a block, thereby ensuring that the variable is out of scope at the point of any subsequent label.</p><div class="calibre22">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">case true:<br class="calibre6"/>&#160;&#160;&#160;&#160;{<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">ok: declaration statement within a statement block</span></span></span><br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;string file_name = get_file_name();<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">...</span></span></span><br class="calibre6"/>&#160;&#160;&#160;&#160;}<br class="calibre6"/>&#160;&#160;&#160;&#160;break;<br class="calibre6"/>case false:<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;if (file_name.empty())&#160;&#160;// <span><span class="calibre45"><span class="calibre16">error:</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">file_name</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">is not in scope</span></span></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<div class="calibre42"><blockquote class="calibre26"><a id="filepos1305765"/><hr class="calibre34"/><blockquote class="calibre13"><p class="calibre43"><span class="calibre5">Exercises Section 5.3.2</span></p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 5.9:</strong> Write a program using a series of <code class="calibre23"><tt class="calibre23"><span class="calibre24">if</span></tt></code> statements to count the number of vowels in text read from <code class="calibre23"><tt class="calibre23"><span class="calibre24">cin</span></tt></code>.</p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 5.10:</strong> There is one problem with our vowel-counting program as we&#8217;ve implemented it: It doesn&#8217;t count capital letters as vowels. Write a program that counts both lower- and uppercase letters as the appropriate vowel&#8212;that is, your program should count both <code class="calibre23"><tt class="calibre23"><span class="calibre24">'a'</span></tt></code> and <code class="calibre23"><tt class="calibre23"><span class="calibre24">'A'</span></tt></code> as part of <code class="calibre23"><tt class="calibre23"><span class="calibre24">aCnt</span></tt></code>, and so forth.</p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 5.11:</strong> Modify our vowel-counting program so that it also counts the number of blank spaces, tabs, and newlines read.</p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 5.12:</strong> Modify our vowel-counting program so that it counts the number of occurrences of the following two-character sequences: <code class="calibre23"><tt class="calibre23"><span class="calibre24">ff</span></tt></code>, <code class="calibre23"><tt class="calibre23"><span class="calibre24">fl</span></tt></code>, and <code class="calibre23"><tt class="calibre23"><span class="calibre24">fi</span></tt></code>.</p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 5.13:</strong> Each of the programs in the highlighted text on page <a href="057-5.4._iterative_statements.html#filepos1311553">184</a> contains a common programming error. Identify and correct each error.</p></blockquote><div class="calibre10">&#160;</div>
<hr class="calibre34"/></blockquote></div><div class="calibre3">&#160;</div>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;"><a href="001-contents.html"><img src="images/teamlib.gif" width="62" height="15" border="0" align="absmiddle"  alt="Team LiB"></a></div></td><td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href="055-5.2._statement_scope.html"><img src="images/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
<a href="057-5.4._iterative_statements.html"><img src="images/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a></div></td></tr></table></body></html>
