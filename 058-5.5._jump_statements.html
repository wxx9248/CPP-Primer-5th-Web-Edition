<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>5.5. Jump Statements</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" type="text/css" rel="stylesheet"/>
<link href="page_styles.css" type="text/css" rel="stylesheet"/>
</head>
  <body class="calibre">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;"><a href="001-contents.html"><img src="images/teamlib.gif" width="62" height="15" border="0" align="absmiddle"  alt="Team LiB"></a></div></td><td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href="057-5.4._iterative_statements.html"><img src="images/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
<a href="059-5.6._try_blocks_and_exception_handling.html"><img src="images/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a></div></td></tr></table><h3 id="filepos1350645" class="calibre29"><span class="bold">5.5. Jump Statements</span></h3><div class="calibre12">&#160;</div>
<p class="calibre14">Jump statements interrupt the flow of execution. C++ offers four jumps: <code class="calibre23"><tt class="calibre23"><span class="calibre24">break</span></tt></code>, <code class="calibre23"><tt class="calibre23"><span class="calibre24">continue</span></tt></code>, and <code class="calibre23"><tt class="calibre23"><span class="calibre24">goto</span></tt></code>, which we cover in this chapter, and the <code class="calibre23"><tt class="calibre23"><span class="calibre24">return</span></tt></code> statement, which we&#8217;ll describe in &#167; <a href="065-6.3._return_types_and_the_return_statement.html#filepos1548761">6.3</a> (p. <a href="065-6.3._return_types_and_the_return_statement.html#filepos1548761">222</a>).</p><div class="calibre15">&#160;</div>
<h4 id="filepos1351310" class="calibre37"><span class="calibre5">5.5.1. The <code class="calibre23"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">break</span></span></tt></span></span></tt></code> Statement</span></h4><div class="calibre38">&#160;</div>
<p class="calibre14">A <a id="filepos1351569" href="061-defined_terms.html#filepos1400831"><code class="calibre23"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">break</span></span></tt></span></span></tt></code>
<strong class="calibre5">statement</strong></a> terminates the nearest enclosing <code class="calibre23"><tt class="calibre23"><span class="calibre24">while</span></tt></code>, <code class="calibre23"><tt class="calibre23"><span class="calibre24">do while</span></tt></code>, <code class="calibre23"><tt class="calibre23"><span class="calibre24">for</span></tt></code>, or <code class="calibre23"><tt class="calibre23"><span class="calibre24">switch</span></tt></code> statement. Execution resumes at the statement immediately following the terminated statement.</p><div class="calibre15">&#160;</div>
<p class="calibre25">A <code class="calibre23"><tt class="calibre23"><span class="calibre24">break</span></tt></code> can appear only within an iteration statement or <code class="calibre23"><tt class="calibre23"><span class="calibre24">switch</span></tt></code> statement (including inside statements or blocks nested inside such loops). A <code class="calibre23"><tt class="calibre23"><span class="calibre24">break</span></tt></code> affects only the nearest enclosing loop or <code class="calibre23"><tt class="calibre23"><span class="calibre24">switch</span></tt></code>:</p><div class="calibre22">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">string buf;<br class="calibre6"/>while (cin &gt;&gt; buf &amp;&amp; !buf.empty()) {<br class="calibre6"/>&#160;&#160;&#160;&#160;switch(buf[0]) {<br class="calibre6"/>&#160;&#160;&#160;&#160;case '-':<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">process up to the first blank</span></span></span><br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;for (auto it = buf.begin()+1; it != buf.end(); ++it) {<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if (*it == ' ')<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;break; // <span><span class="calibre45"><span class="calibre16">#1, leaves the</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">for</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">loop</span></span></span><br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">. . .</span></span></span><br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// <span><tt class="calibre23"><span class="calibre46"><span class="calibre16">break</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">#1 transfers control here</span></span></span><br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">remaining '-' processing:</span></span></span><br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;break; // <span><span class="calibre45"><span class="calibre16">#2, leaves the</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">switch</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">statement</span></span></span><br class="calibre6"/><a id="filepos1354686"/><br class="calibre6"/>&#160;&#160;&#160;&#160;case '+':<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">. . .</span></span></span><br class="calibre6"/>&#160;&#160;&#160;&#160;} // <span><span class="calibre45"><span class="calibre16">end</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">switch</span></span></tt></span><br class="calibre6"/>&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">end of</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">switch: break</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">#2 transfers control here</span></span></span><br class="calibre6"/>} // <span><span class="calibre45"><span class="calibre16">end</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">while</span></span></tt></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">The <code class="calibre23"><tt class="calibre23"><span class="calibre24">break</span></tt></code> labeled #1 terminates the <code class="calibre23"><tt class="calibre23"><span class="calibre24">for</span></tt></code> loop that follows the hyphen <code class="calibre23"><tt class="calibre23"><span class="calibre24">case</span></tt></code> label. It does not terminate the enclosing <code class="calibre23"><tt class="calibre23"><span class="calibre24">switch</span></tt></code> statement and in fact does not even terminate the processing for the current case. Processing continues with the first statement following the <code class="calibre23"><tt class="calibre23"><span class="calibre24">for</span></tt></code>, which might be additional code to handle a hyphen or the <code class="calibre23"><tt class="calibre23"><span class="calibre24">break</span></tt></code> that completes that section.</p><div class="calibre15">&#160;</div>
<p class="calibre25">The <code class="calibre23"><tt class="calibre23"><span class="calibre24">break</span></tt></code> labeled #2 terminates the <code class="calibre23"><tt class="calibre23"><span class="calibre24">switch</span></tt></code> but does not terminate the enclosing <code class="calibre23"><tt class="calibre23"><span class="calibre24">while</span></tt></code> loop. Processing continues after that <code class="calibre23"><tt class="calibre23"><span class="calibre24">break</span></tt></code> by executing the condition in the <code class="calibre23"><tt class="calibre23"><span class="calibre24">while</span></tt></code>.</p><div class="calibre22">&#160;</div>
<div class="calibre42"><blockquote class="calibre26"><hr class="calibre34"/><blockquote class="calibre13"><p class="calibre43"><span class="calibre5">Exercises Section 5.5.1</span></p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 5.20:</strong> Write a program to read a sequence of <code class="calibre23"><tt class="calibre23"><span class="calibre24">string</span></tt></code>s from the standard input until either the same word occurs twice in succession or all the words have been read. Use a <code class="calibre23"><tt class="calibre23"><span class="calibre24">while</span></tt></code> loop to read the text one word at a time. Use the <code class="calibre23"><tt class="calibre23"><span class="calibre24">break</span></tt></code> statement to terminate the loop if a word occurs twice in succession. Print the word if it occurs twice in succession, or else print a message saying that no word was repeated.</p></blockquote><div class="calibre10">&#160;</div>
<hr class="calibre34"/></blockquote></div><div class="calibre3">&#160;</div>
<h4 id="filepos1357782" class="calibre37"><span class="calibre5">5.5.2. The <code class="calibre23"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">continue</span></span></tt></span></span></tt></code> Statement</span></h4><div class="calibre38">&#160;</div>
<p class="calibre14">A <a id="filepos1358044" href="061-defined_terms.html#filepos1402642"><code class="calibre23"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">continue</span></span></tt></span></span></tt></code>
<strong class="calibre5">statement</strong></a> terminates the current iteration of the nearest enclosing loop and immediately begins the next iteration. A <code class="calibre23"><tt class="calibre23"><span class="calibre24">continue</span></tt></code> can appear only inside a <code class="calibre23"><tt class="calibre23"><span class="calibre24">for</span></tt></code>, <code class="calibre23"><tt class="calibre23"><span class="calibre24">while</span></tt></code>, or <code class="calibre23"><tt class="calibre23"><span class="calibre24">do while</span></tt></code> loop, including inside statements or blocks nested inside such loops. Like the <code class="calibre23"><tt class="calibre23"><span class="calibre24">break</span></tt></code> statement, a <code class="calibre23"><tt class="calibre23"><span class="calibre24">continue</span></tt></code> inside a nested loop affects only the nearest enclosing loop. Unlike a <code class="calibre23"><tt class="calibre23"><span class="calibre24">break</span></tt></code>, a <code class="calibre23"><tt class="calibre23"><span class="calibre24">continue</span></tt></code> may appear inside a <code class="calibre23"><tt class="calibre23"><span class="calibre24">switch</span></tt></code> only if that <code class="calibre23"><tt class="calibre23"><span class="calibre24">switch</span></tt></code> is embedded inside an iterative statement.</p><div class="calibre15">&#160;</div>
<p class="calibre25">A <code class="calibre23"><tt class="calibre23"><span class="calibre24">continue</span></tt></code> interrupts the current iteration; execution stays inside the loop. In the case of a <code class="calibre23"><tt class="calibre23"><span class="calibre24">while</span></tt></code> or a <code class="calibre23"><tt class="calibre23"><span class="calibre24">do while</span></tt></code>, execution continues by evaluating the condition. In a traditional <code class="calibre23"><tt class="calibre23"><span class="calibre24">for</span></tt></code> loop, execution continues at the <em class="calibre16">expression</em> inside the <code class="calibre23"><tt class="calibre23"><span class="calibre24">for</span></tt></code> header. In a range <code class="calibre23"><tt class="calibre23"><span class="calibre24">for</span></tt></code>, execution continues by initializing the control variable from the next element in the sequence.</p><div class="calibre22">&#160;</div>
<p class="calibre25">For example, the following loop reads the standard input one word at a time. Only words that begin with an underscore will be processed. For any other value, we terminate the current iteration and get the next input:</p><div class="calibre22">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">string buf;<br class="calibre6"/>while (cin &gt;&gt; buf &amp;&amp; !buf.empty()) {<br class="calibre6"/>&#160;&#160;&#160;&#160;if (buf[0] != '_')<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;continue; // <span><span class="calibre45"><span class="calibre16">get another input</span></span></span><br class="calibre6"/>&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">still here? the input starts with an underscore; process</span></span></span> buf <span><span class="calibre45"><span class="calibre16">. . .</span></span></span><br class="calibre6"/>}</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<div class="calibre42"><blockquote class="calibre26"><a id="filepos1361264"/><hr class="calibre34"/><blockquote class="calibre13"><p class="calibre43"><span class="calibre5">Exercises Section 5.5.2</span></p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 5.21:</strong> Revise the program from the exercise in &#167; <a href="058-5.5._jump_statements.html#filepos1351310">5.5.1</a> (p. <a href="058-5.5._jump_statements.html#filepos1351310">191</a>) so that it looks only for duplicated words that start with an uppercase letter.</p></blockquote><div class="calibre10">&#160;</div>
<hr class="calibre34"/></blockquote></div><div class="calibre3">&#160;</div>
<h4 id="filepos1361778" class="calibre37"><span class="calibre5">5.5.3. The <code class="calibre23"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">goto</span></span></tt></span></span></tt></code> Statement</span></h4><div class="calibre38">&#160;</div>
<div class="calibre28"><img alt="Image" src="images/00010.jpg" class="calibre9"/></div>
<p class="calibre14">A <a id="filepos1362096" href="061-defined_terms.html#filepos1407378"><code class="calibre23"><tt class="calibre23"><span class="calibre24"><span><tt class="calibre23"><span class="calibre32"><span class="calibre5">goto</span></span></tt></span></span></tt></code>
<strong class="calibre5">statement</strong></a> provides an unconditional jump from the <code class="calibre23"><tt class="calibre23"><span class="calibre24">goto</span></tt></code> to a another statement in the same function.</p><div class="calibre15">&#160;</div>
<div class="calibre33"><blockquote class="calibre26"><hr class="calibre34"/><p class="calibre14"><span class="calibre5"><a/><img alt="Image" src="images/00017.jpg" class="calibre9"/> Best Practices</span></p><div class="calibre15">&#160;</div>
<blockquote class="calibre13"><p class="calibre14">Programs should not use <code class="calibre23"><tt class="calibre23"><span class="calibre24">goto</span></tt></code>s. <code class="calibre23"><tt class="calibre23"><span class="calibre24">goto</span></tt></code>s make programs hard to understand and hard to modify.</p></blockquote><div class="calibre22">&#160;</div>
<hr class="calibre34"/></blockquote></div><div class="calibre3">&#160;</div>
<p class="calibre14">The syntactic form of a <code class="calibre23"><tt class="calibre23"><span class="calibre24">goto</span></tt></code> statement is</p><div class="calibre15">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">goto <span><span class="calibre45"><span class="calibre16">label;</span></span></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">where <em class="calibre16">label</em> is an identifier that identifies a statement. A <strong class="calibre5"><a id="filepos1363528" href="061-defined_terms.html#filepos1408774">labeled statement</a></strong> is any statement that is preceded by an identifier followed by a colon:</p><div class="calibre15">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">end: return;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">labeled statement; may be the target of a</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">goto</span></span></tt></span></span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">Label identifiers are independent of names used for variables and other identifiers. Hence, a label may have the same identifier as another entity in the program without interfering with the other uses of that identifier. The <code class="calibre23"><tt class="calibre23"><span class="calibre24">goto</span></tt></code> and the labeled statement to which it transfers control must be in the same function.</p><div class="calibre15">&#160;</div>
<p class="calibre25">As with a <code class="calibre23"><tt class="calibre23"><span class="calibre24">switch</span></tt></code> statement, a <code class="calibre23"><tt class="calibre23"><span class="calibre24">goto</span></tt></code> cannot transfer control from a point where an initialized variable is out of scope to a point where that variable is in scope:</p><div class="calibre22">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">. . .</span></span></span><br class="calibre6"/>&#160;&#160;&#160;&#160;goto end;<br class="calibre6"/>&#160;&#160;&#160;&#160;int ix = 10; // <span><span class="calibre45"><span class="calibre16">error:</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">goto</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">bypasses an initialized variable definition</span></span></span><br class="calibre6"/>end:<br class="calibre6"/>&#160;&#160;&#160;&#160;// <span><span class="calibre45"><span class="calibre16">error: code here could use</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">ix</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">but the</span></span></span>
<span><tt class="calibre23"><span class="calibre46"><span class="calibre16">goto</span></span></tt></span>
<span><span class="calibre45"><span class="calibre16">bypassed its declaration</span></span></span><br class="calibre6"/>&#160;&#160;&#160;&#160;ix = 42;</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre25">A jump backward over an already executed definition is okay. Jumping back to a point before a variable is defined destroys the variable and constructs it again:</p><div class="calibre22">&#160;</div>
<p class="calibre40"><span class="calibre41"><span class="calibre5"/></span></p><div class="calibre38">&#160;</div>
<blockquote class="calibre13"><p class="calibre31"><tt class="calibre23"><span class="calibre24">// <span><span class="calibre45"><span class="calibre16">backward jump over an initialized variable definition is okay</span></span></span><br class="calibre6"/>&#160;&#160;begin:<br class="calibre6"/>&#160;&#160;&#160;&#160;int sz = get_size();<br class="calibre6"/>&#160;&#160;&#160;&#160;if (sz &lt;= 0) {<br class="calibre6"/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;goto begin;<br class="calibre6"/>&#160;&#160;&#160;&#160;}</span></tt></p></blockquote><div class="calibre22">&#160;</div>
<p class="calibre14">Here <code class="calibre23"><tt class="calibre23"><span class="calibre24">sz</span></tt></code> is destroyed when the <code class="calibre23"><tt class="calibre23"><span class="calibre24">goto</span></tt></code> executes. It is defined and initialized anew when control passes back through its definition after the jump back to <code class="calibre23"><tt class="calibre23"><span class="calibre24">begin</span></tt></code>.</p><div class="calibre15">&#160;</div>
<div class="calibre42"><blockquote class="calibre26"><a id="filepos1367472"/><hr class="calibre34"/><blockquote class="calibre13"><p class="calibre43"><span class="calibre5">Exercises Section 5.5.3</span></p></blockquote><div class="calibre10">&#160;</div>
<blockquote class="calibre13"><p class="calibre44"><a/><strong class="calibre5">Exercise 5.22:</strong> The last example in this section that jumped back to <code class="calibre23"><tt class="calibre23"><span class="calibre24">begin</span></tt></code> could be better written using a loop. Rewrite the code to eliminate the <code class="calibre23"><tt class="calibre23"><span class="calibre24">goto</span></tt></code>.</p></blockquote><div class="calibre10">&#160;</div>
<hr class="calibre34"/></blockquote></div><div class="calibre3">&#160;</div>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;"><a href="001-contents.html"><img src="images/teamlib.gif" width="62" height="15" border="0" align="absmiddle"  alt="Team LiB"></a></div></td><td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href="057-5.4._iterative_statements.html"><img src="images/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
<a href="059-5.6._try_blocks_and_exception_handling.html"><img src="images/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a></div></td></tr></table></body></html>
