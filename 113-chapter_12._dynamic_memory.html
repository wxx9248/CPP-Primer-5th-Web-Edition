<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Chapter 12. Dynamic Memory</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" type="text/css" rel="stylesheet"/>
<link href="page_styles.css" type="text/css" rel="stylesheet"/>
</head>
  <body class="calibre">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;"><a href="001-contents.html"><img src="images/teamlib.gif" width="62" height="15" border="0" align="absmiddle"  alt="Team LiB"></a></div></td><td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href="112-defined_terms.html"><img src="images/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
<a href="114-12.1._dynamic_memory_and_smart_pointers.html"><img src="images/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a></div></td></tr></table><h2 id="filepos2900383" class="calibre19"><span class="bold"><a class="calibre2"/>Chapter 12. Dynamic Memory</span></h2><div class="calibre20">&#160;</div>
<p class="calibre14"><span class="calibre5">Contents</span></p><div class="calibre15">&#160;</div>
<blockquote class="calibre13"><p class="calibre14"><strong class="calibre5"><a href="114-12.1._dynamic_memory_and_smart_pointers.html#filepos2904799">Section 12.1 Dynamic Memory and Smart Pointers</a></strong></p></blockquote><div class="calibre15">&#160;</div>
<blockquote class="calibre13"><p class="calibre14"><strong class="calibre5"><a href="115-12.2._dynamic_arrays.html#filepos3086710">Section 12.2 Dynamic Arrays</a></strong></p></blockquote><div class="calibre15">&#160;</div>
<blockquote class="calibre13"><p class="calibre14"><strong class="calibre5"><a href="116-12.3._using_the_library_a_textquery_program.html#filepos3140586">Section 12.3 Using the Library: A Text-Query Program</a></strong></p></blockquote><div class="calibre15">&#160;</div>
<blockquote class="calibre13"><p class="calibre14"><strong class="calibre5"><a href="117-chapter_summary.html#filepos3185005">Chapter Summary</a></strong></p></blockquote><div class="calibre15">&#160;</div>
<blockquote class="calibre13"><p class="calibre14"><strong class="calibre5"><a href="118-defined_terms.html#filepos3186257">Defined Terms</a></strong></p></blockquote><div class="calibre15">&#160;</div>
<p class="calibre14">The programs we&#8217;ve written so far have used objects that have well-defined lifetimes. Global objects are allocated at program start-up and destroyed when the program ends. Local, automatic objects are created and destroyed when the block in which they are defined is entered and exited. Local <code class="calibre23"><tt class="calibre23"><span class="calibre24">static</span></tt></code> objects are allocated before their first use and are destroyed when the program ends.</p><div class="calibre15">&#160;</div>
<p class="calibre25">In addition to supporting automatic and <code class="calibre23"><tt class="calibre23"><span class="calibre24">static</span></tt></code> objects, C++ lets us allocate objects dynamically. Dynamically allocated objects have a lifetime that is independent of where they are created; they exist until they are explicitly freed.</p><div class="calibre22">&#160;</div>
<p class="calibre25">Properly freeing dynamic objects turns out to be a surprisingly rich source of bugs. To make using dynamic objects safer, the library defines two smart pointer types that manage dynamically allocated objects. Smart pointers ensure that the objects to which they point are automatically freed when it is appropriate to do so.</p><div class="calibre22">&#160;</div>
<p class="calibre14"><a id="filepos2902740"/><em class="calibre16">Our programs</em> have used only static or stack memory. Static memory is used for local <code class="calibre23"><tt class="calibre23"><span class="calibre24">static</span></tt></code> objects (&#167; <a href="063-6.1._function_basics.html#filepos1431793">6.1.1</a>, p. <a href="063-6.1._function_basics.html#filepos1431793">205</a>), for class <code class="calibre23"><tt class="calibre23"><span class="calibre24">static</span></tt></code> data members (&#167; <a href="078-7.6._static_class_members.html#filepos2028441">7.6</a>, p. <a href="078-7.6._static_class_members.html#filepos2028441">300</a>), and for variables defined outside any function. Stack memory is used for non<code class="calibre23"><tt class="calibre23"><span class="calibre24">static</span></tt></code> objects defined inside functions. Objects allocated in static or stack memory are automatically created and destroyed by the compiler. Stack objects exist only while the block in which they are defined is executing; <code class="calibre23"><tt class="calibre23"><span class="calibre24">static</span></tt></code> objects are allocated before they are used, and they are destroyed when the program ends.</p><div class="calibre15">&#160;</div>
<p class="calibre25">In addition to static or stack memory, every program also has a pool of memory that it can use. This memory is referred to as the <strong class="calibre5"><a id="filepos2903894" href="118-defined_terms.html#filepos3188604">free store</a></strong> or <strong class="calibre5"><a id="filepos2903969" href="118-defined_terms.html#filepos3188850">heap</a></strong>. Programs use the heap for objects that they <strong class="calibre5"><a id="filepos2904080" href="118-defined_terms.html#filepos3188274">dynamically allocate</a></strong>&#8212;that is, for objects that the program allocates at run time. The program controls the lifetime of dynamic objects; our code must explicitly destroy such objects when they are no longer needed.</p><div class="calibre22">&#160;</div>
<div class="calibre33"><blockquote class="calibre26"><hr class="calibre34"/><p class="calibre14"><span class="calibre5"><a/><img alt="Image" src="images/00013.jpg" class="calibre9"/> Warning</span></p><div class="calibre15">&#160;</div>
<blockquote class="calibre13"><p class="calibre14">Although necessary at times, dynamic memory is notoriously tricky to manage correctly.</p></blockquote><div class="calibre22">&#160;</div>
<hr class="calibre34"/></blockquote></div><div class="calibre3">&#160;</div>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr><td><div STYLE="MARGIN-LEFT: 0.15in;"><a href="001-contents.html"><img src="images/teamlib.gif" width="62" height="15" border="0" align="absmiddle"  alt="Team LiB"></a></div></td><td align="right"><div STYLE="MARGIN-LEFT: 0.15in;">
<a href="112-defined_terms.html"><img src="images/previous.gif" width="62" height="15" border="0" align="absmiddle" alt="Previous Section"></a>
<a href="114-12.1._dynamic_memory_and_smart_pointers.html"><img src="images/next.gif" width="41" height="15" border="0" align="absmiddle" alt="Next Section"></a></div></td></tr></table></body></html>
